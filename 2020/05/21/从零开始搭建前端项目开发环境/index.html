<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>从零开始搭建前端项目开发环境 - 思路大前端团队</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="思路大前端"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="思路大前端"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="实例讲解如何通过Webpack5 +TypeScript + SASS + Babel7 + ESLint7搭建前端开发环境"><meta property="og:type" content="blog"><meta property="og:title" content="从零开始搭建前端项目开发环境"><meta property="og:url" content="https://ths-fe.github.io/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"><meta property="og:site_name" content="思路大前端团队"><meta property="og:description" content="实例讲解如何通过Webpack5 +TypeScript + SASS + Babel7 + ESLint7搭建前端开发环境"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ths-fe.github.io/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/cover.jpg"><meta property="article:published_time" content="2020-05-21T01:29:34.000Z"><meta property="article:modified_time" content="2020-05-21T01:29:34.000Z"><meta property="article:author" content="天下布武"><meta property="article:tag" content="webpack"><meta property="article:tag" content="ESLint"><meta property="article:tag" content="Babel"><meta property="article:tag" content="Browserslist"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/cover.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ths-fe.github.io/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"},"headline":"思路大前端团队","image":["https://ths-fe.github.io/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/cover.jpg"],"datePublished":"2020-05-21T01:29:34.000Z","dateModified":"2020-05-21T01:29:34.000Z","author":{"@type":"Person","name":"天下布武"},"description":"实例讲解如何通过Webpack5 +TypeScript + SASS + Babel7 + ESLint7搭建前端开发环境"}</script><link rel="canonical" href="https://ths-fe.github.io/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/monokai.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?fd8cc3421abec7b8f4e6bc337e25c7d1";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-72716512-3" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-72716512-3');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-6826040978803389" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/ths.png" alt="思路大前端团队" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">博客</a><a class="navbar-item" href="/fe">大前端技术体系</a><a class="navbar-item" href="/gis">GIS技术体系</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/about">关于我们</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/cover.jpg" alt="从零开始搭建前端项目开发环境"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-05-21T01:29:34.000Z" title="2020-05-21T01:29:34.000Z">2020-05-21</time>发表</span><span class="level-item"><time dateTime="2020-05-21T01:29:34.000Z" title="2020-05-21T01:29:34.000Z">2020-05-21</time>更新</span><span class="level-item"> 天下布武 </span><span class="level-item"><a class="link-muted" href="/categories/%E5%9F%BA%E7%A1%80%E5%BB%BA%E8%AE%BE/">基础建设</a><span> / </span><a class="link-muted" href="/categories/%E5%9F%BA%E7%A1%80%E5%BB%BA%E8%AE%BE/%E9%A1%B9%E7%9B%AE%E6%90%AD%E5%BB%BA/">项目搭建</a></span><span class="level-item">1 小时读完 (大约7292个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">从零开始搭建前端项目开发环境</h1><div class="content"><h1 id="1-写在最前"><a href="#1-写在最前" class="headerlink" title="1 写在最前"></a>1 写在最前</h1><p>为何大多数人觉得搭建一个前端项目的开发环境很困难。首先，一个完整的开发环境需要依赖多个工具，每个工具又有不计其数的配置项，想要全部理解需要花费大量的时间。其次，一些官方文档中文翻译滞后，而且结构组织的也不是很好，没有从一个具体的项目出发讲解如何配置，只看API没有什么针对性。最后，好多国内相关博客要么没有标注工具的版本，导致按照步骤进行配置时会发现自己下载的和讲述的某些地方会不一致；要么只讲如何配置，不讲配置的原因，导致大家仍是云里雾里。不过所幸，大部分CLI实现了脚手架的功能，帮助快速生成项目，而不用了解工具的具体配置。</p>
<p>但是，作文里总会有个转折不是。当我们需要自己独立去创建一个项目的时候…该怎么办哖，Don’t be afraid，I’m here.</p>
<p>接下来会先介绍一下几个常用工具（Babel 7.9.0，Browserslist 4.11.1, ESLint 7.0.0, EditorConfig）的核心概念、安装和配置，最后会结合 TypeScript + SASS + webpack5 的项目来说如何将它们整合起来形成一个完整的前端项目开发环境。 Here we go.</p>
<h1 id="2-Babel-7-9-0"><a href="#2-Babel-7-9-0" class="headerlink" title="2 Babel (7.9.0)"></a>2 <a target="_blank" rel="noopener" href="https://babeljs.io/">Babel</a> (7.9.0)</h1><p>Babel是一个Javascript编译器。<strong>主要用于将 ECMAScript 2015+ 版本的代码转换为向后兼容(backwards compatible)的 JavaScript 语法，以便能够运行在当前和旧版本的浏览器或其它环境(如：node)中。</strong></p>
<h2 id="2-1-安装"><a href="#2-1-安装" class="headerlink" title="2.1 安装"></a>2.1 <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/usage">安装</a></h2><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i -D @babel/core @babel/cli @babel/preset-env</span><br><span class="line"></span><br><span class="line">npm i -D core-js</span><br></pre></td></tr></table></figure>

<p>运行此命令之前要先初始化项目，新建项目文件夹 xxx , 在该文件夹下 运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>

<p>尽量不要一路回车，建议按实际内容来。</p>
<h3 id="2-1-1-babel-core"><a href="#2-1-1-babel-core" class="headerlink" title="2.1.1 @babel/core"></a>2.1.1 <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-core/">@babel/core</a></h3><p>主要用于将源代码(JS\TS)解析为AST(抽象语法树)。</p>
<h3 id="2-1-2-babel-cli"><a href="#2-1-2-babel-cli" class="headerlink" title="2.1.2 @babel/cli"></a>2.1.2 <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-cli/">@babel/cli</a></h3><p>用于从命令行编译文件。</p>
<h3 id="2-1-3-babel-preset-env"><a href="#2-1-3-babel-preset-env" class="headerlink" title="2.1.3 @babel/preset-env"></a>2.1.3 <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-preset-env">@babel/preset-env</a></h3><p>预设环境。源代码解析成AST后，还需要进行转换和生成，这是由插件来做的。@babel/preset-env(预设环境)是常用预设和插件的集合（babel-preset-es2015，babel-preset-es2016，babel-preset-es2017，babel-preset-latest，babel-preset-node5, babel-preset-es2015-node等，@babel/preset-env不支持stage-x插件）。</p>
<p>最初每年EcmaScript标准更新，都需要使用者手动添加最新年份的预设才能进行新语法的转换:</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&quot;presets&quot;: [</span><br><span class="line">   &quot;es2015&quot;,</span><br><span class="line">   &quot;es2016&quot;,</span><br><span class="line">   &quot;es2017&quot;</span><br><span class="line"> ],</span><br></pre></td></tr></table></figure>

<p>后来改成了 babel-preset-latest，意思为最新的预设（包含了以往所有年份），不用每年都需要手动添加一把。最终 latest 也被废弃，变成了目前的 preset-env。开发人员可以在代码中直接书写已经正式发布的特性。不过，当ES更新时，肯定还需要更新一下 @babel/preset-env。</p>
<h3 id="2-1-4-core-js"><a href="#2-1-4-core-js" class="headerlink" title="2.1.4 core-js"></a>2.1.4 <a target="_blank" rel="noopener" href="https://github.com/zloirock/core-js">core-js</a></h3><p>Babel 默认只转换新的 JavaScript 语法，如： 类、箭头函数、扩展运算（spread），而不转换新的 API ，如：Iterator、Generator、Set、Maps、Proxy、Reflect、Symbol、Promise 等全局对象，以及一些定义在全局对象上的方法（如：Object.assign）。不转码的 API 详细清单可以查看 <a target="_blank" rel="noopener" href="https://github.com/babel/babel/blob/master/packages/babel-plugin-transform-runtime/src/runtime-corejs3-definitions.js">definitions.js</a> 文件。</p>
<p>core-js 提供了es5、es6+的polyfills(填充物，<strong>用于实现浏览器并不支持的原生API的代码，它将一个新的 API 引入到一个旧的环境中，仅靠旧环境中已有的技术手段实现</strong>)，包括<a target="_blank" rel="noopener" href="https://github.com/zloirock/core-js#ecmascript-promise">promises</a>, <a target="_blank" rel="noopener" href="https://github.com/zloirock/core-js#ecmascript-symbol">symbols</a>, <a target="_blank" rel="noopener" href="https://github.com/zloirock/core-js#ecmascript-collections">collections</a>, iterators, <a target="_blank" rel="noopener" href="https://github.com/zloirock/core-js#ecmascript-typed-arrays">typed arrays</a>等等。</p>
<p>这里不得不提一下该库和它的俄罗斯作者。该库一周的下载量比大家熟知的 Angular、 React、Vue加一起的下载量还要多的多。就这样的一个库谁能想到它的作者竟然需要在命令行里 looking for a good job，后来该作者又因为骑摩托车撞死一人，伤一人，被判入狱18个月, 现在应该已经处于服刑期间了…</p>
<p>@babel/polyfill 已废弃。</p>
<h2 id="2-2-配置"><a href="#2-2-配置" class="headerlink" title="2.2 配置"></a>2.2 <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/configuration">配置</a></h2><p>可以在三类文件中对Babel进行配置，在项目的根目录中创建babel.config.*、.babelrc.* (* 可为 空，json, js, cjs 或 mjs) ，或在package.json中添加。</p>
<p>如果扩展名为 json，那一般的内容是：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;presets&quot;: [...],</span><br><span class="line">  &quot;plugins&quot;: [...]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>如果扩展名为 js，则内容为：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> presets = [ ... ];</span><br><span class="line"><span class="keyword">const</span> plugins = [ ... ];</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123; presets, plugins &#125;;</span><br></pre></td></tr></table></figure>

<p>在 package.json 中：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;name&quot;: &quot;my-package&quot;,</span><br><span class="line">  &quot;version&quot;: &quot;1.0.0&quot;,</span><br><span class="line">  </span><br><span class="line">  &quot;babel&quot;: &#123;</span><br><span class="line">    &quot;presets&quot;: [ ... ],</span><br><span class="line">    &quot;plugins&quot;: [ ... ],</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p><strong>我们一般使用 babel.config.js 作为配置文件，因为在JS中可以写注释，方便理解（JSON不方便）。其它工具的配置文件能采用 js 做扩展名的也尽量使用 .js。</strong></p>
<p>在项目文件夹下创建 src 目录，新建 index.js。编写内容：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> userInfo = <span class="keyword">new</span> <span class="built_in">Map</span>();</span><br><span class="line">userInfo.set(<span class="string">&#x27;name&#x27;</span>, <span class="string">&#x27;天下布武&#x27;</span>);</span><br><span class="line">userInfo.set(<span class="string">&#x27;age&#x27;</span>, <span class="number">18</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">console</span>.log(<span class="built_in">Object</span>.entries(userInfo));</span><br></pre></td></tr></table></figure>

<p>在package.json中添加：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&quot;scripts&quot;: &#123;</span><br><span class="line">  &quot;build&quot;: &quot;./node_modules/.bin/babel src/index.js --out-dir dist&quot;</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<h3 id="2-2-1-babel-preset-env"><a href="#2-2-1-babel-preset-env" class="headerlink" title="2.2.1 @babel/preset-env"></a>2.2.1 <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-preset-env">@babel/preset-env</a></h3><p>最简设置如下(不建议，转换后会多出很多冗余代码，至少要配置一个targets)：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在命令行中运行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm run build</span><br></pre></td></tr></table></figure>

<p>就能在新生成的dist文件夹中看到 编译后的 index.js ：</p>
<img src="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/noconst.jpg" class="">

<p>可以看到之前的 const 被转译成了 var。</p>
<p>下面对两个常用参数进行说明：</p>
<h4 id="2-2-1-1-targets"><a href="#2-2-1-1-targets" class="headerlink" title="2.2.1.1 targets"></a>2.2.1.1 targets</h4><p>设置编译代码的目标平台，可以是浏览器也可以是node环境。<strong>如不设置，会将所有ES6+的代码编译为ES5-。建议设置，这样可以按目标平台来决定是否进行转换，以避免增加不必要的补丁，减少打包后的代码体积</strong>。</p>
<p>常见设置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;@babel/preset-env&#x27;</span>, &#123;</span><br><span class="line">        targets: <span class="string">&#x27;&gt; 1%, last 2 versions, ie &gt; 8&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>以上配置的意思是要兼容全球范围内使用量大于1%的浏览器和它们最新的两个版本，加上IE 9-11。这里既可以指定浏览器的版本，也可以通过查询的方式来确定要支持的浏览器。详情见<a href="#Browserslist-4-11-1">Browserslist</a>这一章节。</p>
<p>若设置 targets: ‘&gt; 10%’ , 再运行一次 npm run build ，因为大于 10% 的浏览器只有谷歌，它是支持 const 的, 因此编译结果几乎原封未动：</p>
<img src="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/const.jpg" class="">

<p><strong>建议使用 .browserslistrc 文件来定义targets，这样其它工具(Autoprefixer、PostCSS、Stylelint 等)也能通过该配置获取到目标浏览器，从而做有针对性的处理。</strong></p>
<h4 id="2-2-1-2-useBuiltIns"><a href="#2-2-1-2-useBuiltIns" class="headerlink" title="2.2.1.2 useBuiltIns"></a>2.2.1.2 useBuiltIns</h4><p>是否内置兼容。如果设置，就可以不用在HTML中引入polyfill的JS文件来处理浏览器的兼容性问题了。常见设置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        useBuiltIns: <span class="string">&#x27;usage&#x27;</span>,</span><br><span class="line">        corejs: <span class="number">3</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>可选值包括：”usage” | “entry” | false。</p>
<ul>
<li><p>false：默认值，即不引入polyfills，不做浏览器兼容。</p>
</li>
<li><p>entry：根据配置的浏览器，引入这些浏览器不兼容的polyfill。这个是在文件中已经明确写了import “core-js” 或其中具体某个模块（如：import “core-js/es/array”）的情况下，babel会根据 browserslist 自动添加指定浏览器不兼容的该模块下的所有polyfill，无论当前代码是否需要。</p>
</li>
<li><p>usage：<strong>会根据配置的浏览器以及代码中用到的 API 自动添加polyfill，实现了按需引入。一般使用这个配置。</strong></p>
</li>
</ul>
<p>只有当 useBuiltIns 的值为 entry 或 usage 时，”corejs” 这个选项才会起作用。这里如无特殊情况尽量指定 core-js 的版本为 3（默认为 2）, 因为它有很多2没有的新特性： “corejs”: 3。</p>
<p>这里运行 npm run build, 运行结果为：</p>
<img src="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/builtin.jpg" class="">

<p>可以看出它在全局作用域下添加了 Map 变量，同时在 Object 原型中添加了 entries 方法。</p>
<p><strong>babel默认转出的是模块规范为 commonJS，只能在 Node 环境中使用，如果想在浏览器环境中使用，一般有两种方式：</strong><br>1、 结合 rollup<br>2、 结合 webpack<br>我们一般使用 第二种方式，参看最后 webpack 实例。</p>
<h3 id="2-2-2-babel-plugin-transform-runtime"><a href="#2-2-2-babel-plugin-transform-runtime" class="headerlink" title="2.2.2 @babel/plugin-transform-runtime"></a>2.2.2 <a target="_blank" rel="noopener" href="https://babeljs.io/docs/en/babel-plugin-transform-runtime">@babel/plugin-transform-runtime</a></h3><p>对于一般应用开发来说，直接使用上述的 polyfill 方案是比较方便的，但如果是开发工具、库的话，这种方案未必适合(由上图可以看出，polyfill 是添加自定义全局对象 或向对象的 prototype 上添加方法实现的)。使用 @babel/plugin-transform-runtime 这个插件就可以解决这个问题。</p>
<p>安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D @babel/plugin-transform-runtime @babel/runtime-corejs3</span><br></pre></td></tr></table></figure>

<p>配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;@babel/plugin-transform-runtime&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        corejs: <span class="number">3</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p><strong>该插件无法读取 preset-env 的 targets 或者是 browserlist 中的目标平台参数，因此不会根据目标平台来决定是否进行转换和注入 polyfills，而是全转换和注入所有。以后可能会在 useBuiltIns 中增加一个参数 “runtime” 来代替该插件。</strong>可参见：<a target="_blank" rel="noopener" href="https://github.com/babel/babel/issues/10133">https://github.com/babel/babel/issues/10133</a></p>
<p>再运行 npm run build，得到：</p>
<img src="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/runtime.jpg" class="">

<p>凡是require进来的模块都直接赋值给普通变量，不会对 Map 、 Object 等全局变量造成影响。</p>
<p><strong>注：这里的和上边所有提到的“编译”一词更准确的说法应该是“转译（Transpile）”。</strong></p>
<h1 id="3-Browserslist-4-11-1"><a href="#3-Browserslist-4-11-1" class="headerlink" title="3 Browserslist (4.11.1)"></a>3 <a target="_blank" rel="noopener" href="https://github.com/browserslist/browserslist">Browserslist</a> (4.11.1)</h1><p>Browserslist <strong>是一个</strong>能够在不同的前端工具间共享目标浏览器的<strong>配置</strong>。看配置就知道当前项目支持的浏览器有哪些。它使用 <a target="_blank" rel="noopener" href="https://caniuse.com/">Can I Use</a> 的数据做查询。</p>
<p>在项目中添加 Browserslist，<strong>常用</strong>有两种方式(<strong>不能同时在 .browserslistrc 和 package.json 中配置，否则使用 Babel 转译的时候会报错</strong>)：</p>
<ul>
<li>在项目的根目录下添加 .browserslistrc 文件</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&gt; 1%</span><br><span class="line">last 2 versions</span><br><span class="line">ie &gt; 8</span><br></pre></td></tr></table></figure>

<ul>
<li>在package.json文件中增加 browserslist 节点</li>
</ul>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;private&quot;: true,</span><br><span class="line">  &quot;dependencies&quot;: &#123;</span><br><span class="line"></span><br><span class="line">  &#125;,</span><br><span class="line">  &quot;browserslist&quot;: [</span><br><span class="line">    &quot;last 2 version&quot;,</span><br><span class="line">    &quot;&gt; 1%&quot;,</span><br><span class="line">    &quot;ie &gt; 8&quot;</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>查询结果可通过 <a target="_blank" rel="noopener" href="https://browserl.ist/">https://browserl.ist/</a> 来查看。</p>
<p>运行命令行：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npx browserslist</span><br></pre></td></tr></table></figure>

<p>可查看当前项目目标浏览器列表。*<em>如果只是在 babel.config.</em> 文件中配置了 target 是检测不出来的（会优先使用），因此建议使用 单独的 .browserslistrc 来设置。**</p>
<h1 id="4-ESLint-7-0-0"><a href="#4-ESLint-7-0-0" class="headerlink" title="4 ESLint (7.0.0)"></a>4 <a target="_blank" rel="noopener" href="https://eslint.org/">ESLint</a> (7.0.0)</h1><p>是一个可以查找并且修复JavaScript(TypeScript)中错误的工具，目的是为了保证代码风格统一，避免出错。</p>
<h2 id="4-1-概念"><a href="#4-1-概念" class="headerlink" title="4.1 概念"></a>4.1 概念</h2><h3 id="4-1-1-extends（扩展）"><a href="#4-1-1-extends（扩展）" class="headerlink" title="4.1.1 extends（扩展）"></a>4.1.1 extends（扩展）</h3><p>扩展里填的内容是包含了一系列规则的配置文件。这个一般不需要自己定义，因为有很多现成的：如ESLint自身的 eslint:recommended、eslint:all 和社区的 google、airbnb。</p>
<p>配置的模块名(npm的包名)要为 eslint-config-xxx，在配置中可缩写为 xxx。</p>
<p>例：</p>
<img src="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/google.jpg" class="">

<h3 id="4-1-2-plugins（插件）"><a href="#4-1-2-plugins（插件）" class="headerlink" title="4.1.2 plugins（插件）"></a>4.1.2 plugins（插件）</h3><p>extends 中是对 eslint 现有规则的一系列预设（开启或关闭），而 plugins 不仅可以定义预设，也可以自定义规则（比如自己创建一个 no-console<strong>2</strong>，区别于ESLint的 no-console），甚至可对不是JavaScript类型的文件（如 *ts，*.md，*.vue）扩展自己的规则。</p>
<p>插件的模块名一般为 eslint-plugin-xxx，在配置中可缩写为 xxx。</p>
<p>例：</p>
<img src="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/react.jpg" class="">

<h3 id="4-1-3-rules（规则）"><a href="#4-1-3-rules（规则）" class="headerlink" title="4.1.3 rules（规则）"></a>4.1.3 rules（规则）</h3><p>直接配置已有规则的开启、关闭。比如强制在JavaScript中使用单引号（”quotes”: [2, “single”]）。规则定义中参数的设置说明：</p>
<ul>
<li><p>“off” 或 0：关闭规则</p>
</li>
<li><p>“warn” 或 1：警告，不会影响程序执行</p>
</li>
<li><p>“error” 或 2：错误，程序不能执行</p>
</li>
</ul>
<h2 id="4-2-安装"><a href="#4-2-安装" class="headerlink" title="4.2 安装"></a>4.2 安装</h2><h3 id="4-2-1-针对-JavaScript"><a href="#4-2-1-针对-JavaScript" class="headerlink" title="4.2.1 针对 JavaScript"></a>4.2.1 针对 JavaScript</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint eslint-config-airbnb-base eslint-plugin-import</span><br></pre></td></tr></table></figure>

<h4 id="4-2-1-1-eslint-config-airbnb-base"><a href="#4-2-1-1-eslint-config-airbnb-base" class="headerlink" title="4.2.1.1 eslint-config-airbnb-base"></a>4.2.1.1 eslint-config-airbnb-base</h4><p>包含了airbnb 最基础（不包含 React 相关）的JS编码风格规则。</p>
<h4 id="4-2-1-2-eslint-plugin-import"><a href="#4-2-1-2-eslint-plugin-import" class="headerlink" title="4.2.1.2 eslint-plugin-import"></a>4.2.1.2 eslint-plugin-import</h4><p>上边的插件依赖这个。😛</p>
<h3 id="4-2-2-针对-TypeScript"><a href="#4-2-2-针对-TypeScript" class="headerlink" title="4.2.2 针对 TypeScript"></a>4.2.2 <a target="_blank" rel="noopener" href="https://github.com/typescript-eslint/typescript-eslint">针对 TypeScript</a></h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint eslint-config-airbnb-typescript eslint-plugin-import @typescript-eslint/eslint-plugin</span><br></pre></td></tr></table></figure>

<h4 id="4-2-2-1eslint-config-airbnb-typescript"><a href="#4-2-2-1eslint-config-airbnb-typescript" class="headerlink" title="4.2.2.1eslint-config-airbnb-typescript"></a>4.2.2.1<a target="_blank" rel="noopener" href="https://github.com/iamturns/eslint-config-airbnb-typescript">eslint-config-airbnb-typescript</a></h4><p>Airbnb 风格的 TypeScript 支持。它将一些常见配置都加了进去，省下了好多工作量。<br>ps. 这是一个匈牙利布达佩斯技术和经济大学的学生做的，想想自己的大学生活都在做啥…</p>
<p>该插件包含了@typescript-eslint/parser（TypeScript 解析器），它调用@typescript-eslint/typescript-estree（通过在给定的源代码上调用 TypeScript 编译器，就是 npm i typescript -D 安装的那个，以产生TypeScript AST，然后将该AST转换为ESLint期望的格式）。ESlint默认的解析器叫 espree。</p>
<h4 id="4-2-2-2-typescript-eslint-eslint-plugin"><a href="#4-2-2-2-typescript-eslint-eslint-plugin" class="headerlink" title="4.2.2.2 @typescript-eslint/eslint-plugin"></a>4.2.2.2 @typescript-eslint/eslint-plugin</h4><p>与 @typescript-eslint/parser 结合使用时，运行 TypeScript 的分析规则。</p>
<h2 id="4-3-配置"><a href="#4-3-配置" class="headerlink" title="4.3 配置"></a>4.3 配置</h2><p>可使用 .eslintrc.<em>( 可为 空，js, yaml, yml, json）或在 package.json 中配置，这里使用 .eslintrc.js 来进行配置。 一个项目中在不同的文件夹下可以有多个 .eslintrc.</em> 配置文件，这样可以约束不同文件夹下的文件使用不同的风格，这一点和 editorConfig 一样。</p>
<h3 id="4-3-1-针对-JavaScript"><a href="#4-3-1-针对-JavaScript" class="headerlink" title="4.3.1 针对 JavaScript"></a>4.3.1 针对 JavaScript</h3><p>一般配置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>, <span class="comment">// 意思是到头啦，不要再向上找了</span></span><br><span class="line">  env: &#123; <span class="comment">// 代码将会在哪些环境中运行。每个环境都附带了一组特定的预定义全局变量，如 browser 中有 window，document等，添加后可以直接在代码中使用，而不报错。</span></span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    node: <span class="literal">true</span>,</span><br><span class="line">    es2020: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">extends</span>: <span class="string">&#x27;airbnb-base&#x27;</span>,  <span class="comment">// 使用airbnb风格</span></span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    ecmaVersion: <span class="number">2020</span>, <span class="comment">// 启用ES2020的语法</span></span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 只在打包时强制不使用console</span></span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 只在打包时强制不使用debugger</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="4-3-2-针对-TypeScript"><a href="#4-3-2-针对-TypeScript" class="headerlink" title="4.3.2 针对 TypeScript"></a>4.3.2 针对 TypeScript</h3><p>一般设置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>, <span class="comment">// 意思是到头啦，不要再向上找了</span></span><br><span class="line">  env: &#123; <span class="comment">// 代码将会在哪些环境中运行。每个环境都附带了一组特定的预定义全局变量，如 browser 中有 window，document等，添加后可以直接在代码中使用，而不报错。</span></span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    node: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;airbnb-typescript/base&#x27;</span>, <span class="comment">// 使用airbnb风格</span></span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/eslint-recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/recommended-requiring-type-checking&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    project: <span class="string">&#x27;./tsconfig.json&#x27;</span>, <span class="comment">// 要在tsconfig中设置编译的版本</span></span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 只在打包时强制不使用console</span></span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 只在打包时强制不使用debugger</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p><strong>最后要在 VS Code 中安装 ESLint 插件，配置相关参数，使之能够在文件保存时自动修复格式错误；WebStrom中则需设置允许 ESLint（最新的2020.1.1 版本中也能够在文件保存时自动修复错误）。</strong></p>
<h1 id="5-EditorConfig"><a href="#5-EditorConfig" class="headerlink" title="5 EditorConfig"></a>5 <a target="_blank" rel="noopener" href="https://editorconfig.org/">EditorConfig</a></h1><p>帮助在不同的编辑器或IDE上从事同一项目的多个开发人员保持一致的编码样式。</p>
<p>一个项目里可以有多个.editorconfig 分别放置在不同的文件夹中，当 VS Code 这类编辑器打开一个文件时，它会检查这个文件所在目录和它的父级文件夹（直到项目根目录或者是是某个文件夹中的 .editorconfig 里标识了 root = true 才会停止)中是否存在 .editorconfig。被打开的文件格式会以距当前文件最近的 .editorconfig 中的内容为准。</p>
<p>一般配置如下：</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 告诉编辑器这是最顶层的（不要再向上找了） EditorConfig 文件</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset = utf-8        # 设置编码为utf-8</span><br><span class="line">indent_style = space   # 缩进方式为空格</span><br><span class="line">indent_size = 2        # 缩进大小为2个字符</span><br><span class="line">end_of_line = lf       # 换行符，可选&quot;lf&quot;、&quot;cr&quot;、&quot;crlf&quot;</span><br><span class="line">trim_trailing_whitespace = true  # 删除行尾空格</span><br><span class="line">insert_final_newline = true      # 始终在文件末尾插入一个新行</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">insert_final_newline = false</span><br><span class="line">trim_trailing_whitespace = false</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h1 id="6-webpack-v5-0-0-beta-16"><a href="#6-webpack-v5-0-0-beta-16" class="headerlink" title="6 webpack (v5.0.0-beta.16)"></a>6 <a target="_blank" rel="noopener" href="https://webpack.js.org/">webpack</a> <strong>(</strong><a target="_blank" rel="noopener" href="https://github.com/webpack/webpack/releaseshttps://github.com/webpack/webpack/releases">v5.0.0-beta.16</a>)</h1><p>webpack是用于现代 JavaScript 应用程序的静态模块打包器。<br>当webpack处理应用程序时，它会在内部构建一个依赖关系图，该图映射项目所需的每个模块最终会生成一个或多个包。</p>
<h2 id="6-1-概念"><a href="#6-1-概念" class="headerlink" title="6.1 概念"></a>6.1 概念</h2><h3 id="6-1-1-modules"><a href="#6-1-1-modules" class="headerlink" title="6.1.1 modules"></a>6.1.1 <a target="_blank" rel="noopener" href="https://webpack.js.org/concepts/modules/">modules</a></h3><p>webpack中，无论是 JS 、CSS 还是图片等，总之一切皆模块。 有点像RxJS，一切皆数据流。<br>模块间依赖的表述有很多种方式，如：import，require，define，@import，url(…), &lt;img src=…&gt; 等等。</p>
<h3 id="6-1-2-Entry-amp-Output"><a href="#6-1-2-Entry-amp-Output" class="headerlink" title="6.1.2 Entry &amp; Output"></a>6.1.2 <a target="_blank" rel="noopener" href="https://webpack.js.org/concepts/#entry">Entry</a> &amp; <a target="_blank" rel="noopener" href="https://webpack.js.org/concepts/#output">Output</a></h3><p>入口指示webpack应该使用哪个模块开始构建其内部依赖关系图。默认为： ./src/index.js。</p>
<p>出口告诉webpack在何处发出它创建的包文件以及如何命名这些文件。默认为： ./dist/main.js</p>
<h3 id="6-1-3-Loaders"><a href="#6-1-3-Loaders" class="headerlink" title="6.1.3 Loaders"></a>6.1.3 <a target="_blank" rel="noopener" href="https://webpack.js.org/concepts/#loaders">Loaders</a></h3><p>webpack 默认只能解析JavaScript和JSON，可以通过添加 Loaders 来处理其他类型的文件。</p>
<h3 id="6-1-4-Plugins"><a href="#6-1-4-Plugins" class="headerlink" title="6.1.4 Plugins"></a>6.1.4 <a target="_blank" rel="noopener" href="https://webpack.js.org/concepts/#plugins">Plugins</a></h3><p>可以利用插件来执行更广泛的任务，例如打包优化，资产管理和环境变量的注入。</p>
<h3 id="6-1-5-Mode"><a href="#6-1-5-Mode" class="headerlink" title="6.1.5 Mode"></a>6.1.5 <a target="_blank" rel="noopener" href="https://webpack.js.org/concepts/#mode">Mode</a></h3><p>分development、production、none三种，每种都会对应一系列默认配置。</p>
<h2 id="6-2-实战"><a href="#6-2-实战" class="headerlink" title="6.2 实战"></a>6.2 实战</h2><p>接下来以初始化一个 TypeScript + SCSS 项目为例，介绍下webpack5的配置流程。</p>
<p>在开始之前先说下，为何没用 ts-loader 和 TSLint：</p>
<ul>
<li><p>由于 TSLint 的性能不如 ESLint，再加上有很多热门的社区（React Hooks、Vue），都是通过 ESLint 来构建规则，因此，TypeScript 团队决定专注支持 ESLint。</p>
</li>
<li><p>Babel7 虽然不支持TS类型检查，但已经支持转译。 构建需要安装的插件、工具太多，能少一个就少一个，一个编译器既能支持JS，又能支持TS，为何不用。因此，感觉 ts-loader 的生命也不会太长了…</p>
</li>
</ul>
<p><strong>Node 环境要求至少为：10.13.0。</strong></p>
<h3 id="6-2-1-初始化项目"><a href="#6-2-1-初始化项目" class="headerlink" title="6.2.1 初始化项目"></a>6.2.1 初始化项目</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm init</span><br></pre></td></tr></table></figure>

<p>在命令行中填入项目相关信息，不建议一路回车…</p>
<h3 id="6-2-2-安装-webpack"><a href="#6-2-2-安装-webpack" class="headerlink" title="6.2.2 安装 webpack"></a>6.2.2 安装 webpack</h3><p>webpack@next 是最新的 webpack5。不写@next，就是 webpack4。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D webpack@next webpack-cli</span><br></pre></td></tr></table></figure>

<p>如果需要一个web服务器做调试和热更新，则需安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D webpack-dev-server</span><br></pre></td></tr></table></figure>

<h3 id="6-2-3-创建-editorconfig"><a href="#6-2-3-创建-editorconfig" class="headerlink" title="6.2.3 创建 .editorconfig"></a>6.2.3 创建 .editorconfig</h3><p>统一编码样式。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"># 告诉编辑器这是最顶层的（不要再向上找了） EditorConfig 文件</span><br><span class="line">root = true</span><br><span class="line"></span><br><span class="line">[*]</span><br><span class="line">charset = utf-8        # 设置编码为utf-8</span><br><span class="line">indent_style = space   # 缩进方式为空格</span><br><span class="line">indent_size = 2        # 缩进大小为2个字符</span><br><span class="line">end_of_line = lf       # 换行符，可选&quot;lf&quot;、&quot;cr&quot;、&quot;crlf&quot;</span><br><span class="line">trim_trailing_whitespace = true  # 删除行尾空格</span><br><span class="line">insert_final_newline = true      # 始终在文件末尾插入一个新行</span><br><span class="line"></span><br><span class="line">[*.md]</span><br><span class="line">insert_final_newline = false</span><br><span class="line">trim_trailing_whitespace = false</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-2-4-安装-TypeScript-编译器并配置"><a href="#6-2-4-安装-TypeScript-编译器并配置" class="headerlink" title="6.2.4 安装 TypeScript 编译器并配置"></a>6.2.4 安装 TypeScript 编译器并配置</h3><p>安装编译器的目的是为了配合ESLint做代码检查和自动修复。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D typescript</span><br></pre></td></tr></table></figure>

<p>在项目根目录下创建 <a target="_blank" rel="noopener" href="https://www.typescriptlang.org/docs/handbook/tsconfig-json.html">tsconfig.json</a>，其中可定义入口文件以及编译的参数，用于将 TypeScript 转译为 JavaScript。</p>
<p>一定要设置，否则在IDE做语法校验的时候，新JavaScript API（如： Object.fromEntries ）会报错。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">  &quot;compilerOptions&quot;: &#123;</span><br><span class="line">    &quot;lib&quot;: [</span><br><span class="line">      &quot;ESNext&quot;,</span><br><span class="line">      &quot;DOM&quot;</span><br><span class="line">    ]</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>ESNext 指的是TypeScript支持的最新版本的ES。它会随着ES版本的更新而自动更新，一劳永逸。<br>DOM 类型定义，允许在TS中直接写window，document。</p>
<h3 id="6-2-5-安装-ESLint-并配置"><a href="#6-2-5-安装-ESLint-并配置" class="headerlink" title="6.2.5 安装 ESLint 并配置"></a>6.2.5 安装 ESLint 并配置</h3><figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D eslint eslint-config-airbnb-typescript eslint-plugin-import @typescript-eslint/eslint-plugin</span><br></pre></td></tr></table></figure>

<p>.eslintrc.js</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  root: <span class="literal">true</span>, <span class="comment">// 这个配置同 editorConfig，意思是不要找了</span></span><br><span class="line">  env: &#123; <span class="comment">// 代码将会在哪些环境中运行。每个环境都附带了一组特定的预定义全局变量，如 browser 中有 window，document等，添加后可以直接在代码中使用，而不报错。</span></span><br><span class="line">    browser: <span class="literal">true</span>,</span><br><span class="line">    node: <span class="literal">true</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="keyword">extends</span>: [</span><br><span class="line">    <span class="string">&#x27;airbnb-typescript/base&#x27;</span>, <span class="comment">// 使用airbnb风格</span></span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/eslint-recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/recommended&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;plugin:@typescript-eslint/recommended-requiring-type-checking&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  parserOptions: &#123;</span><br><span class="line">    project: <span class="string">&#x27;./tsconfig.json&#x27;</span>, <span class="comment">// 要在tsconfig中设置编译的版本</span></span><br><span class="line">  &#125;,</span><br><span class="line">  rules: &#123;</span><br><span class="line">    <span class="string">&#x27;no-console&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 只在打包时强制不使用console</span></span><br><span class="line">    <span class="string">&#x27;no-debugger&#x27;</span>: process.env.NODE_ENV === <span class="string">&#x27;production&#x27;</span> ? <span class="string">&#x27;warn&#x27;</span> : <span class="string">&#x27;off&#x27;</span>, <span class="comment">// 只在打包时强制不使用debugger</span></span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-2-6-创建-gitignore"><a href="#6-2-6-创建-gitignore" class="headerlink" title="6.2.6 创建 .gitignore"></a>6.2.6 创建 .gitignore</h3><p>提交Git服务器时，忽略的文件列表。使用SVN的就不需要这个了。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">.DS_Store</span><br><span class="line">node_modules</span><br><span class="line">/dist</span><br><span class="line"></span><br><span class="line"># local env files</span><br><span class="line">.env.local</span><br><span class="line">.env.*.local</span><br><span class="line"></span><br><span class="line"># Log files</span><br><span class="line">npm-debug.log*</span><br><span class="line">yarn-debug.log*</span><br><span class="line">yarn-error.log*</span><br><span class="line"></span><br><span class="line"># Editor directories and files</span><br><span class="line">.idea</span><br><span class="line">.vscode</span><br><span class="line">*.suo</span><br><span class="line">*.ntvs*</span><br><span class="line">*.njsproj</span><br><span class="line">*.sln</span><br><span class="line">*.sw?</span><br><span class="line">.git</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-2-7-创建-browserslistrc"><a href="#6-2-7-创建-browserslistrc" class="headerlink" title="6.2.7 创建 .browserslistrc"></a>6.2.7 创建 .browserslistrc</h3><p>这里设置兼容IE11。<strong>当前项目如果是作为库使用的话，该设置不会起作用。</strong>详情见：<a href="#babel-plugin-transform-runtime">babel-plugin-transform-runtime</a></p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&gt; 1%</span><br><span class="line">last 2 versions</span><br><span class="line">not ie &lt; 11</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-2-8-安装-webpack-loaders"><a href="#6-2-8-安装-webpack-loaders" class="headerlink" title="6.2.8 安装 webpack loaders"></a>6.2.8 安装 webpack loaders</h3><p>所有 Loaders 都在 webpack.config.js 文件中的 module 节点中进行添加。</p>
<h4 id="6-2-8-1-转译"><a href="#6-2-8-1-转译" class="headerlink" title="6.2.8.1 转译"></a>6.2.8.1 转译</h4><h5 id="6-2-8-1-1-babel-loader及相关"><a href="#6-2-8-1-1-babel-loader及相关" class="headerlink" title="6.2.8.1.1 babel-loader及相关"></a>6.2.8.1.1 babel-loader及相关</h5><p>webpack本身只能打包（模块合并）而没有转译的能力，TS转译成JS用的是 Babel ，并没有使用 TypeScript 编译器。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">npm i -D babel-loader</span><br><span class="line"></span><br><span class="line">npm i -D @babel/core @babel/preset-env @babel/preset-typescript core-js</span><br></pre></td></tr></table></figure>

<p>babel.config.js：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">    presets: [ [</span><br><span class="line">        <span class="string">&quot;@babel/preset-env&quot;</span>,&#123;</span><br><span class="line">            <span class="string">&quot;useBuiltIns&quot;</span>: <span class="string">&quot;usage&quot;</span>,</span><br><span class="line">            <span class="string">&quot;corejs&quot;</span>: <span class="number">3</span></span><br><span class="line">        &#125;],</span><br><span class="line">        <span class="string">&quot;@babel/preset-typescript&quot;</span></span><br><span class="line">    ]</span><br><span class="line">&#125;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>webpack.config.js 片段:</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>: &#123;</span><br><span class="line">   rules: [</span><br><span class="line">     <span class="comment">// 使用 babel-loader 解析 ts, js, tsx, jsx 文件.</span></span><br><span class="line">     &#123;</span><br><span class="line">       test: <span class="regexp">/\.(ts|js)x?$/</span>, <span class="comment">// 匹配扩展名为 .ts,.js,.tsx.jsx 的文件</span></span><br><span class="line">       use: <span class="string">&#x27;babel-loader&#x27;</span>, <span class="comment">// 使用 babel-loader 来进行解析</span></span><br><span class="line">       exclude: <span class="regexp">/node_modules/</span>, <span class="comment">// 排除 node_modules 文件下的文件</span></span><br><span class="line">     &#125;,</span><br><span class="line">   ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p> 更多配置可见下方完整的配置。</p>
<p><strong>当前项目将要作为库的话，还得安装：</strong></p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D @babel/plugin-transform-runtime @babel/runtime-corejs3</span><br></pre></td></tr></table></figure>

<p><strong>同时 babel.config.js 中的配置改成下面这个：</strong></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    <span class="string">&#x27;@babel/preset-env&#x27;</span>,</span><br><span class="line">    <span class="string">&#x27;@babel/preset-typescript&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;@babel/plugin-transform-runtime&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        corejs: <span class="number">3</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="6-2-8-2-样式"><a href="#6-2-8-2-样式" class="headerlink" title="6.2.8.2 样式"></a>6.2.8.2 样式</h4><h5 id="6-2-8-2-1-sass-loader"><a href="#6-2-8-2-1-sass-loader" class="headerlink" title="6.2.8.2.1 sass-loader"></a>6.2.8.2.1 sass-loader</h5><p>加载 SASS/SCSS 文件 并将其编译为 CSS。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D sass-loader node-sass</span><br></pre></td></tr></table></figure>

<p>sass-loader 要求要安装 Dart Sass 或者是 Node Sass。弄过 NPM 下载下来的这两者只是个编译器。据说前者在node环境中性能比后者要差，因此一般都会使用 node-sass。</p>
<p>webpack.config.js 一般配置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 执行顺序：从右到左</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="comment">// 从字符串中创建style标签到HTML的Header中</span></span><br><span class="line">          <span class="string">&#x27;style-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 转换CSS为字符串</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 给CSS添加前缀以适应各浏览器</span></span><br><span class="line">          <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 编译 Sass 到 CSS</span></span><br><span class="line">          <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="6-2-8-2-2-postcss-loader"><a href="#6-2-8-2-2-postcss-loader" class="headerlink" title="6.2.8.2.2 postcss-loader"></a>6.2.8.2.2 postcss-loader</h5><p> <a target="_blank" rel="noopener" href="http://postcss.org/">PostCSS</a>是CSS语法转换的工具。它提供API来对CSS文件进行分析和修改它的规则。<br>利用其插件 autoprefixer ，可以给 CSS 添加目标浏览器（Browserslist中定义的）前缀。</p>
<figure class="highlight text"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">-moz-     /* 火狐等使用Mozilla浏览器引擎的浏览器 */</span><br><span class="line">-webkit-  /* Safari, 谷歌浏览器等使用Webkit引擎的浏览器 */</span><br><span class="line">-o-       /* Opera浏览器(早期) */</span><br><span class="line">-ms-      /* Internet Explorer */</span><br></pre></td></tr></table></figure>

<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D postcss-loader autoprefixer</span><br></pre></td></tr></table></figure>

<p>创建 postcss.config.js, 定义 PostCSS 的插件为 autoprefixer：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: &#123;</span><br><span class="line">    autoprefixer: &#123;&#125;,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h5 id="6-2-8-2-3-css-loader"><a href="#6-2-8-2-3-css-loader" class="headerlink" title="6.2.8.2.3 css-loader"></a>6.2.8.2.3 css-loader</h5><p>加载CSS文件，并以JS模块（CSS样式以字符串的形式封装在其中）的形式返回。</p>
<ul>
<li>如果只使用 css-loader，解析出的CSS内容都在打包后的js代码中，没有任何作用。</li>
<li>只有配合 style-loader 或 mini-css-extract-plugin 等，引用的样式才会起作用。</li>
</ul>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D css-loader</span><br></pre></td></tr></table></figure>

<h5 id="6-2-8-2-4-style-loader"><a href="#6-2-8-2-4-style-loader" class="headerlink" title="6.2.8.2.4 style-loader"></a>6.2.8.2.4 style-loader</h5><p>将CSS样式注入到DOM中。默认是在&lt;header&gt;最后添加&lt;style&gt;，这是通过生成JS方法动态添加的。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D style-loader</span><br></pre></td></tr></table></figure>

<p>一般这样配置：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;</span><br><span class="line">    test: <span class="regexp">/\.css$/</span>,</span><br><span class="line">    use: [<span class="string">&#x27;style-loader&#x27;</span>, <span class="string">&#x27;css-loader&#x27;</span>, <span class="string">&#x27;postcss-loader&#x27;</span>],</span><br><span class="line">&#125;,</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="6-2-8-3-文件"><a href="#6-2-8-3-文件" class="headerlink" title="6.2.8.3 文件"></a>6.2.8.3 文件</h4><h5 id="6-2-8-3-1-url-loader"><a href="#6-2-8-3-1-url-loader" class="headerlink" title="6.2.8.3.1 url-loader"></a>6.2.8.3.1 url-loader</h5><p>将小于一个限制大小的文件转换为<a target="_blank" rel="noopener" href="https://tools.ietf.org/html/rfc2397">base64 URIs</a>。超过限制的，会默认使用 file-loader来做处理。所以这里一定要把 file-loader 也安装上。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D url-loader file-loader</span><br></pre></td></tr></table></figure>

<h5 id="6-2-8-3-2-file-loader"><a href="#6-2-8-3-2-file-loader" class="headerlink" title="6.2.8.3.2 file-loader"></a>6.2.8.3.2 file-loader</h5><p>生成文件到输出的文件夹中，并返回相对路径URL 。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D file-loader</span><br></pre></td></tr></table></figure>

<h3 id="6-2-9-安装-webpack-plugins"><a href="#6-2-9-安装-webpack-plugins" class="headerlink" title="6.2.9 安装 webpack plugins"></a>6.2.9 安装 webpack plugins</h3><h4 id="6-2-9-1-HTMLWebpackPlugin"><a href="#6-2-9-1-HTMLWebpackPlugin" class="headerlink" title="6.2.9.1 HTMLWebpackPlugin"></a>6.2.9.1 <a target="_blank" rel="noopener" href="https://webpack.js.org/plugins/html-webpack-plugin/">HTMLWebpackPlugin</a></h4><p>会生成一个HTML5文件，其中body中会加入所有webpack打包出来的内容。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D html-webpack-plugin</span><br></pre></td></tr></table></figure>

<h4 id="6-2-9-2-clean-webpack-plugin"><a href="#6-2-9-2-clean-webpack-plugin" class="headerlink" title="6.2.9.2 clean-webpack-plugin"></a>6.2.9.2 <a target="_blank" rel="noopener" href="https://github.com/johnagan/clean-webpack-plugin">clean-webpack-plugin</a></h4><p>移除或清空构建出的文件夹。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D clean-webpack-plugin</span><br></pre></td></tr></table></figure>

<h4 id="6-2-9-3-mini-css-extract-plugin"><a href="#6-2-9-3-mini-css-extract-plugin" class="headerlink" title="6.2.9.3 mini-css-extract-plugin"></a>6.2.9.3 mini-css-extract-plugin</h4><p>将CSS提取到单独的CSS文件中。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D mini-css-extract-plugin</span><br></pre></td></tr></table></figure>

<p>一般的配置如下：</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">&quot;mini-css-extract-plugin&quot;</span>);</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"> <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      ...</span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="comment">// 提取到单独的CSS文件</span></span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          <span class="comment">// 转换 CSS 到 CommonJS</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 给 CSS 添加前缀以适应各浏览器</span></span><br><span class="line">          <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 编译 Sass 到 CSS</span></span><br><span class="line">          <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line"></span><br><span class="line"></span><br><span class="line"></span><br><span class="line">plugins: [</span><br><span class="line"> ...js</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">&#x27;css/[name].css&#x27;</span>,</span><br><span class="line">      chunkFilename: <span class="string">&#x27;css/[id].css&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">],</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="6-2-9-4-webpack-bundle-analyzer"><a href="#6-2-9-4-webpack-bundle-analyzer" class="headerlink" title="6.2.9.4 webpack-bundle-analyzer"></a>6.2.9.4 webpack-bundle-analyzer</h4><p>可视化webpack输出文件的大小。</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D webpack-bundle-analyzer</span><br></pre></td></tr></table></figure>

<figure class="highlight js"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; BundleAnalyzerPlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;webpack-bundle-analyzer&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> BundleAnalyzerPlugin()</span><br><span class="line">  ]</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="6-2-10-创建-webpack-config-js"><a href="#6-2-10-创建-webpack-config-js" class="headerlink" title="6.2.10 创建 webpack.config.js"></a>6.2.10 创建 webpack.config.js</h3><p>配置webPack来处理TypeScript。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br><span class="line">74</span><br><span class="line">75</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> &#123; CleanWebpackPlugin &#125; = <span class="built_in">require</span>(<span class="string">&#x27;clean-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> HtmlWebpackPlugin = <span class="built_in">require</span>(<span class="string">&#x27;html-webpack-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> MiniCssExtractPlugin = <span class="built_in">require</span>(<span class="string">&#x27;mini-css-extract-plugin&#x27;</span>);</span><br><span class="line"><span class="keyword">const</span> path = <span class="built_in">require</span>(<span class="string">&#x27;path&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> config = &#123;</span><br><span class="line">  entry: <span class="string">&#x27;./src/index.ts&#x27;</span>, <span class="comment">// 入口文件</span></span><br><span class="line">  externals: &#123;</span><br><span class="line">    cesium: <span class="string">&#x27;Cesium&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">  <span class="built_in">module</span>: &#123;</span><br><span class="line">    rules: [</span><br><span class="line">      <span class="comment">// 使用 babel-loader 解析 ts, js, tsx, jsx 文件.</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(ts|js)x?$/</span>,</span><br><span class="line">        use: <span class="string">&#x27;babel-loader&#x27;</span>,</span><br><span class="line">        exclude: <span class="regexp">/node_modules/</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 执行顺序：从右到左</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.s[ac]ss$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          <span class="comment">// 提取到单独的CSS文件</span></span><br><span class="line">          MiniCssExtractPlugin.loader,</span><br><span class="line">          <span class="comment">// 转换 CSS 到 CommonJS</span></span><br><span class="line">          <span class="string">&#x27;css-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 给 CSS 添加前缀以适应各浏览器</span></span><br><span class="line">          <span class="string">&#x27;postcss-loader&#x27;</span>,</span><br><span class="line">          <span class="comment">// 编译 Sass 到 CSS</span></span><br><span class="line">          <span class="string">&#x27;sass-loader&#x27;</span>,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="comment">// 使用 url-loader 将小于 4KB 图片 转换为 base64 URIs</span></span><br><span class="line">      &#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpe?g|gif|webp)$/i</span>,</span><br><span class="line">        use: [</span><br><span class="line">          &#123;</span><br><span class="line">            loader: <span class="string">&#x27;url-loader&#x27;</span>,</span><br><span class="line">            options: &#123;</span><br><span class="line">              name: <span class="string">&#x27;images/[name].[hash:8].[ext]&#x27;</span>,</span><br><span class="line">              limit: <span class="number">4096</span>,</span><br><span class="line">              esModule: <span class="literal">false</span>,</span><br><span class="line">            &#125;,</span><br><span class="line">          &#125;,</span><br><span class="line">        ],</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  &#125;,</span><br><span class="line">  resolve: &#123;</span><br><span class="line">    extensions: [<span class="string">&#x27;.ts&#x27;</span>, <span class="string">&#x27;.tsx&#x27;</span>, <span class="string">&#x27;.js&#x27;</span>, <span class="string">&#x27;.jsx&#x27;</span>, <span class="string">&#x27;.json&#x27;</span>], <span class="comment">// 按顺序解析以上扩展名的文件(必须添加，否则通过import进来的文件无法解析。import时可不写扩展名 默认值为 [&#x27;.wasm&#x27;, &#x27;.mjs&#x27;, &#x27;.js&#x27;, &#x27;.json&#x27;]</span></span><br><span class="line">  &#125;,</span><br><span class="line">  output: &#123;</span><br><span class="line">    filename: <span class="string">&#x27;bundle.js&#x27;</span>,</span><br><span class="line">    path: path.resolve(__dirname, <span class="string">&#x27;dist&#x27;</span>),</span><br><span class="line">  &#125;,</span><br><span class="line">  plugins: [</span><br><span class="line">    <span class="keyword">new</span> CleanWebpackPlugin(),</span><br><span class="line">    <span class="keyword">new</span> HtmlWebpackPlugin(&#123; <span class="attr">template</span>: <span class="string">&#x27;public/index.html&#x27;</span>, <span class="attr">title</span>: <span class="string">&#x27;TypeScript-Webpack-starter&#x27;</span> &#125;),</span><br><span class="line">    <span class="keyword">new</span> MiniCssExtractPlugin(&#123;</span><br><span class="line">      filename: <span class="string">&#x27;css/[name].css&#x27;</span>,</span><br><span class="line">      chunkFilename: <span class="string">&#x27;css/[id].css&#x27;</span>,</span><br><span class="line">    &#125;),</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="built_in">module</span>.exports = <span class="function">(<span class="params">env, argv</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="keyword">if</span> (argv.mode === <span class="string">&#x27;development&#x27;</span>) &#123;</span><br><span class="line">    config.devtool = <span class="string">&#x27;source-map&#x27;</span>; <span class="comment">// 导出SourceMap供调试</span></span><br><span class="line">  &#125;</span><br><span class="line"></span><br><span class="line">  <span class="keyword">if</span> (argv.mode === <span class="string">&#x27;production&#x27;</span>) &#123;</span><br><span class="line"></span><br><span class="line">  &#125;</span><br><span class="line">  <span class="keyword">return</span> config;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>某些开源项目会在项目的根目录下创建一个 build 文件夹，将 webpack 的配置拆分为base(存放公用配置)、dev(开发环境特有的配置)、prod(生产环境特有的配置)，利用合并插件将dev或prod和base合并。个人认为其拆分的思想没有问题，但如果配置项没达到一定规模(500行以上?)可以不用这么麻烦。如上方配置所示：只使用 webpack.config.js ，先添加公用配置(一个对象)，然后通过判断当前是开发还是生产模式，补充相应配置。</p>
<h3 id="6-2-11-添加脚本"><a href="#6-2-11-添加脚本" class="headerlink" title="6.2.11 添加脚本"></a>6.2.11 添加脚本</h3><p>package.json</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">  &quot;scripts&quot;: &#123;</span><br><span class="line">    &quot;serve&quot;: &quot;webpack-dev-server --mode development --open&quot;,</span><br><span class="line">    &quot;dev&quot;: &quot;webpack-dev-server --mode development --open&quot;,</span><br><span class="line">    &quot;build&quot;: &quot;webpack --mode production&quot;</span><br><span class="line">  &#125;,</span><br></pre></td></tr></table></figure>

<h3 id="6-2-12-形成项目结构"><a href="#6-2-12-形成项目结构" class="headerlink" title="6.2.12 形成项目结构"></a>6.2.12 形成项目结构</h3><p>创建libs、public、src文件夹</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line">├── libs                        <span class="comment">// 第三方库</span></span><br><span class="line">├── public</span><br><span class="line">│ ├── index.html</span><br><span class="line">├── src</span><br><span class="line">│ ├── assets                    <span class="comment">// 资源</span></span><br><span class="line">│ │ ├── images                  <span class="comment">// 图片</span></span><br><span class="line">│ │ ├── styles                  <span class="comment">// 样式文件 scss、less、css</span></span><br><span class="line">│ └── index.ts</span><br><span class="line">├── .browserslistrc</span><br><span class="line">├── .editorconfig</span><br><span class="line">├── .eslintrc.js</span><br><span class="line">├── .gitignore</span><br><span class="line">├── babel.config.js</span><br><span class="line">├── package.json</span><br><span class="line">├── postcss.config.js</span><br><span class="line">├── README.md</span><br><span class="line">├── tsconfig.json</span><br><span class="line">└── webpack.config.js</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>其中index.html</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">&lt;!DOCTYPE <span class="meta-keyword">html</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;<span class="name">html</span> <span class="attr">lang</span>=<span class="string">&quot;zh-cmn-Hans&quot;</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">head</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">charset</span>=<span class="string">&quot;utf-8&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">http-equiv</span>=<span class="string">&quot;X-UA-Compatible&quot;</span> <span class="attr">content</span>=<span class="string">&quot;IE=edge&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">meta</span> <span class="attr">name</span>=<span class="string">&quot;viewport&quot;</span> <span class="attr">content</span>=<span class="string">&quot;width=device-width,initial-scale=1.0&quot;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">title</span>&gt;</span><span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span><span class="tag">&lt;/<span class="name">title</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">head</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;<span class="name">body</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">noscript</span>&gt;</span></span><br><span class="line">    <span class="tag">&lt;<span class="name">strong</span>&gt;</span>We&#x27;re sorry but <span class="tag">&lt;<span class="name">%=</span> <span class="attr">htmlWebpackPlugin.options.title</span> %&gt;</span> doesn&#x27;t work properly without JavaScript enabled.</span><br><span class="line">      Please enable it to continue.<span class="tag">&lt;/<span class="name">strong</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;/<span class="name">noscript</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">div</span> <span class="attr">id</span>=<span class="string">&quot;app&quot;</span>&gt;</span><span class="tag">&lt;/<span class="name">div</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">body</span>&gt;</span></span><br><span class="line"></span><br><span class="line"><span class="tag">&lt;/<span class="name">html</span>&gt;</span></span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="6-2-13-源码地址"><a href="#6-2-13-源码地址" class="headerlink" title="6.2.13 源码地址"></a>6.2.13 源码地址</h3><p><a target="_blank" rel="noopener" href="https://github.com/THS-FE/typescript-webpack-starter">https://github.com/THS-FE/typescript-webpack-starter</a></p>
<h1 id="7-备注"><a href="#7-备注" class="headerlink" title="7 备注"></a>7 备注</h1><h2 id="7-1-为什么好多配置文件的后缀是-rc"><a href="#7-1-为什么好多配置文件的后缀是-rc" class="headerlink" title="7.1 为什么好多配置文件的后缀是 rc"></a>7.1 为什么好多配置文件的后缀是 rc</h2><blockquote>
<p>[Unix: from runcom files on the CTSS system 1962-63, via the startup script /etc/rc] Script file containing startup instructions for an application program (or an entire operating system), usually a text file containing commands of the sort that might have been invoked manually once the system was running but are to be executed automatically each time the system starts up.</p>
</blockquote>
<p>rc代表短语 runcom （运行命令），unix的爷爷CTSS系统中的脚本文件，里边包含了应用或者整个系统启动时要执行的命令。</p>
<p>现在更通用的含义可能是 runtime configration，即应用运行时的配置。</p>
<p>参考：<a target="_blank" rel="noopener" href="https://stackoverflow.com/questions/11030552/what-does-rc-mean-in-dot-files">https://stackoverflow.com/questions/11030552/what-does-rc-mean-in-dot-files</a></p>
<p><a target="_blank" rel="noopener" href="https://unix.stackexchange.com/questions/3467/what-does-rc-in-bashrc-stand-for">https://unix.stackexchange.com/questions/3467/what-does-rc-in-bashrc-stand-for</a></p>
</div><div class="article-licensing box"><div class="licensing-title"><p>从零开始搭建前端项目开发环境</p><p><a href="https://ths-fe.github.io/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">https://ths-fe.github.io/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>天下布武</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-05-21</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2020-05-21</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="" rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/webpack/">webpack</a><a class="link-muted mr-2" rel="tag" href="/tags/ESLint/">ESLint</a><a class="link-muted mr-2" rel="tag" href="/tags/Babel/">Babel</a><a class="link-muted mr-2" rel="tag" href="/tags/Browserslist/">Browserslist</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5ea1492221690600121bcf3a&amp;product=inline-share-buttons&amp;cms=sop" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipayqr.jpg" alt="支付宝"></span></a><a class="button donate" href="https://www.buymeacoffee.com/zapzqc?new=1" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechatqr.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/05/21/%E5%89%8D%E7%AB%AF%E5%BC%80%E5%8F%91%E5%BF%85%E9%A1%BB%E6%8E%8C%E6%8F%A1%E7%9A%84%E5%9F%BA%E6%9C%AC%E6%A6%82%E5%BF%B5/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">前端开发必须掌握的基本概念</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"><span class="level-item">Vue.js2最佳实践(持续更新至Vue.js3出来😁)</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "4o5OfjCIGaSyqIwg7jop80Ge-gzGzoHsz",
            appKey: "Rj9jcPLhW8WgWd6bDmXGmKaA",
            placeholder: "欢迎评论交流",
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-写在最前"><span class="level-left"><span class="level-item">1 写在最前</span></span></a></li><li><a class="level is-mobile" href="#2-Babel-7-9-0"><span class="level-left"><span class="level-item">2 Babel (7.9.0)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-1-安装"><span class="level-left"><span class="level-item">2.1 安装</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-1-1-babel-core"><span class="level-left"><span class="level-item">2.1.1 @babel/core</span></span></a></li><li><a class="level is-mobile" href="#2-1-2-babel-cli"><span class="level-left"><span class="level-item">2.1.2 @babel/cli</span></span></a></li><li><a class="level is-mobile" href="#2-1-3-babel-preset-env"><span class="level-left"><span class="level-item">2.1.3 @babel/preset-env</span></span></a></li><li><a class="level is-mobile" href="#2-1-4-core-js"><span class="level-left"><span class="level-item">2.1.4 core-js</span></span></a></li></ul></li><li><a class="level is-mobile" href="#2-2-配置"><span class="level-left"><span class="level-item">2.2 配置</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-2-1-babel-preset-env"><span class="level-left"><span class="level-item">2.2.1 @babel/preset-env</span></span></a></li><li><a class="level is-mobile" href="#2-2-2-babel-plugin-transform-runtime"><span class="level-left"><span class="level-item">2.2.2 @babel/plugin-transform-runtime</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#3-Browserslist-4-11-1"><span class="level-left"><span class="level-item">3 Browserslist (4.11.1)</span></span></a></li><li><a class="level is-mobile" href="#4-ESLint-7-0-0"><span class="level-left"><span class="level-item">4 ESLint (7.0.0)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-1-概念"><span class="level-left"><span class="level-item">4.1 概念</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-1-1-extends（扩展）"><span class="level-left"><span class="level-item">4.1.1 extends（扩展）</span></span></a></li><li><a class="level is-mobile" href="#4-1-2-plugins（插件）"><span class="level-left"><span class="level-item">4.1.2 plugins（插件）</span></span></a></li><li><a class="level is-mobile" href="#4-1-3-rules（规则）"><span class="level-left"><span class="level-item">4.1.3 rules（规则）</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-2-安装"><span class="level-left"><span class="level-item">4.2 安装</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-2-1-针对-JavaScript"><span class="level-left"><span class="level-item">4.2.1 针对 JavaScript</span></span></a></li><li><a class="level is-mobile" href="#4-2-2-针对-TypeScript"><span class="level-left"><span class="level-item">4.2.2 针对 TypeScript</span></span></a></li></ul></li><li><a class="level is-mobile" href="#4-3-配置"><span class="level-left"><span class="level-item">4.3 配置</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-3-1-针对-JavaScript"><span class="level-left"><span class="level-item">4.3.1 针对 JavaScript</span></span></a></li><li><a class="level is-mobile" href="#4-3-2-针对-TypeScript"><span class="level-left"><span class="level-item">4.3.2 针对 TypeScript</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#5-EditorConfig"><span class="level-left"><span class="level-item">5 EditorConfig</span></span></a></li><li><a class="level is-mobile" href="#6-webpack-v5-0-0-beta-16"><span class="level-left"><span class="level-item">6 webpack (v5.0.0-beta.16)</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-1-概念"><span class="level-left"><span class="level-item">6.1 概念</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-1-1-modules"><span class="level-left"><span class="level-item">6.1.1 modules</span></span></a></li><li><a class="level is-mobile" href="#6-1-2-Entry-amp-Output"><span class="level-left"><span class="level-item">6.1.2 Entry &amp; Output</span></span></a></li><li><a class="level is-mobile" href="#6-1-3-Loaders"><span class="level-left"><span class="level-item">6.1.3 Loaders</span></span></a></li><li><a class="level is-mobile" href="#6-1-4-Plugins"><span class="level-left"><span class="level-item">6.1.4 Plugins</span></span></a></li><li><a class="level is-mobile" href="#6-1-5-Mode"><span class="level-left"><span class="level-item">6.1.5 Mode</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-2-实战"><span class="level-left"><span class="level-item">6.2 实战</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-2-1-初始化项目"><span class="level-left"><span class="level-item">6.2.1 初始化项目</span></span></a></li><li><a class="level is-mobile" href="#6-2-2-安装-webpack"><span class="level-left"><span class="level-item">6.2.2 安装 webpack</span></span></a></li><li><a class="level is-mobile" href="#6-2-3-创建-editorconfig"><span class="level-left"><span class="level-item">6.2.3 创建 .editorconfig</span></span></a></li><li><a class="level is-mobile" href="#6-2-4-安装-TypeScript-编译器并配置"><span class="level-left"><span class="level-item">6.2.4 安装 TypeScript 编译器并配置</span></span></a></li><li><a class="level is-mobile" href="#6-2-5-安装-ESLint-并配置"><span class="level-left"><span class="level-item">6.2.5 安装 ESLint 并配置</span></span></a></li><li><a class="level is-mobile" href="#6-2-6-创建-gitignore"><span class="level-left"><span class="level-item">6.2.6 创建 .gitignore</span></span></a></li><li><a class="level is-mobile" href="#6-2-7-创建-browserslistrc"><span class="level-left"><span class="level-item">6.2.7 创建 .browserslistrc</span></span></a></li><li><a class="level is-mobile" href="#6-2-8-安装-webpack-loaders"><span class="level-left"><span class="level-item">6.2.8 安装 webpack loaders</span></span></a></li><li><a class="level is-mobile" href="#6-2-9-安装-webpack-plugins"><span class="level-left"><span class="level-item">6.2.9 安装 webpack plugins</span></span></a></li><li><a class="level is-mobile" href="#6-2-10-创建-webpack-config-js"><span class="level-left"><span class="level-item">6.2.10 创建 webpack.config.js</span></span></a></li><li><a class="level is-mobile" href="#6-2-11-添加脚本"><span class="level-left"><span class="level-item">6.2.11 添加脚本</span></span></a></li><li><a class="level is-mobile" href="#6-2-12-形成项目结构"><span class="level-left"><span class="level-item">6.2.12 形成项目结构</span></span></a></li><li><a class="level is-mobile" href="#6-2-13-源码地址"><span class="level-left"><span class="level-item">6.2.13 源码地址</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#7-备注"><span class="level-left"><span class="level-item">7 备注</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#7-1-为什么好多配置文件的后缀是-rc"><span class="level-left"><span class="level-item">7.1 为什么好多配置文件的后缀是 rc</span></span></a></li></ul></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label"> </h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6826040978803389" data-ad-slot="1033672070" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/ths.png" alt="思路大前端团队" height="28"></a><p class="is-size-7"><span>&copy; 2020 天下布武</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>