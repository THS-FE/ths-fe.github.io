<!doctype html>
<html lang="zh"><head><meta charset="utf-8"><meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"><meta><title>Vue.js2最佳实践(持续更新至Vue.js3出来😁) - 思路大前端团队</title><link rel="manifest" href="/manifest.json"><meta name="theme-color" content="#f7f7f7"><meta name="application-name" content="思路大前端"><meta name="msapplication-TileImage" content="/img/favicon.ico"><meta name="msapplication-TileColor" content="#f7f7f7"><meta name="apple-mobile-web-app-capable" content="yes"><meta name="apple-mobile-web-app-title" content="思路大前端"><meta name="apple-mobile-web-app-status-bar-style" content="default"><meta description="本文详细地描述了Vue.js2模板工程的内容及Vue.js2的命名、使用规范和技巧。"><meta property="og:type" content="blog"><meta property="og:title" content="Vue.js2最佳实践(持续更新至Vue.js3出来😁)"><meta property="og:url" content="https://ths-fe.github.io/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"><meta property="og:site_name" content="思路大前端团队"><meta property="og:description" content="本文详细地描述了Vue.js2模板工程的内容及Vue.js2的命名、使用规范和技巧。"><meta property="og:locale" content="zh_CN"><meta property="og:image" content="https://ths-fe.github.io/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/cover.jpg"><meta property="article:published_time" content="2020-04-29T02:55:53.000Z"><meta property="article:modified_time" content="2020-07-26T01:29:39.000Z"><meta property="article:author" content="天下布武"><meta property="article:tag" content="Vue.js2"><meta property="twitter:card" content="summary"><meta property="twitter:image" content="/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/cover.jpg"><script type="application/ld+json">{"@context":"https://schema.org","@type":"BlogPosting","mainEntityOfPage":{"@type":"WebPage","@id":"https://ths-fe.github.io/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"},"headline":"思路大前端团队","image":["https://ths-fe.github.io/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/cover.jpg"],"datePublished":"2020-04-29T02:55:53.000Z","dateModified":"2020-07-26T01:29:39.000Z","author":{"@type":"Person","name":"天下布武"},"description":"本文详细地描述了Vue.js2模板工程的内容及Vue.js2的命名、使用规范和技巧。"}</script><link rel="canonical" href="https://ths-fe.github.io/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/"><link rel="icon" href="/img/favicon.ico"><link rel="stylesheet" href="https://cdn.bootcdn.net/ajax/libs/font-awesome/5.13.1/css/all.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/highlight.js@9.12.0/styles/monokai.css"><link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Ubuntu:wght@400;600&amp;family=Source+Code+Pro"><link rel="stylesheet" href="/css/default.css"><style>body>.footer,body>.navbar,body>.section{opacity:0}</style><!--!--><script>var _hmt = _hmt || [];
        (function() {
            var hm = document.createElement("script");
            hm.src = "//hm.baidu.com/hm.js?fd8cc3421abec7b8f4e6bc337e25c7d1";
            var s = document.getElementsByTagName("script")[0];
            s.parentNode.insertBefore(hm, s);
        })();</script><script src="//busuanzi.ibruce.info/busuanzi/2.3/busuanzi.pure.mini.js" defer></script><!--!--><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/css/lightgallery.min.css"><link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/css/justifiedGallery.min.css"><script src="https://www.googletagmanager.com/gtag/js?id=UA-72716512-3" async></script><script>window.dataLayer = window.dataLayer || [];
        function gtag(){dataLayer.push(arguments);}
        gtag('js', new Date());
    
        gtag('config', 'UA-72716512-3');</script><!--!--><script src="https://cdn.jsdelivr.net/npm/pace-js@1.0.2/pace.min.js"></script><!--!--><!--!--><script data-ad-client="ca-pub-6826040978803389" src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js" async></script><meta name="generator" content="Hexo 5.2.0"></head><body class="is-2-column"><nav class="navbar navbar-main"><div class="container"><div class="navbar-brand justify-content-center"><a class="navbar-item navbar-logo" href="/"><img src="/img/ths.png" alt="思路大前端团队" height="28"></a></div><div class="navbar-menu"><div class="navbar-start"><a class="navbar-item" href="/">博客</a><a class="navbar-item" href="/fe">大前端技术体系</a><a class="navbar-item" href="/gis">GIS技术体系</a><a class="navbar-item" href="/archives">归档</a><a class="navbar-item" href="/about">关于我们</a></div><div class="navbar-end"><a class="navbar-item is-hidden-tablet catalogue" title="目录" href="javascript:;"><i class="fas fa-list-ul"></i></a><a class="navbar-item search" title="搜索" href="javascript:;"><i class="fas fa-search"></i></a></div></div></div></nav><section class="section"><div class="container"><div class="columns"><div class="column order-2 column-main is-8-tablet is-8-desktop is-8-widescreen"><div class="card"><div class="card-image"><span class="image is-7by3"><img class="fill" src="/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/cover.jpg" alt="Vue.js2最佳实践(持续更新至Vue.js3出来😁)"></span></div><article class="card-content article" role="article"><div class="article-meta is-size-7 is-uppercase level is-mobile"><div class="level-left"><span class="level-item"><time dateTime="2020-04-29T02:55:53.000Z" title="2020-04-29T02:55:53.000Z">2020-04-29</time>发表</span><span class="level-item"><time dateTime="2020-07-26T01:29:39.000Z" title="2020-07-26T01:29:39.000Z">2020-07-26</time>更新</span><span class="level-item"> 天下布武 </span><span class="level-item"><a class="link-muted" href="/categories/JS%E6%A1%86%E6%9E%B6/">JS框架</a><span> / </span><a class="link-muted" href="/categories/JS%E6%A1%86%E6%9E%B6/Vue-js2/">Vue.js2</a></span><span class="level-item">1 小时读完 (大约12354个字)</span><span class="level-item" id="busuanzi_container_page_pv"><span id="busuanzi_value_page_pv">0</span>次访问</span></div></div><h1 class="title is-3 is-size-4-mobile">Vue.js2最佳实践(持续更新至Vue.js3出来😁)</h1><div class="content"><h1 id="1-写在开头"><a href="#1-写在开头" class="headerlink" title="1 写在开头"></a>1 写在开头</h1><p>  文档较长，可按需耐心反复阅读。其中带（官）的是直接引用了Vue官方的<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/">风格指南</a>。针对Vue性能优化相关内容，单独在内容后进行了标注，可通过搜索“性能优化”四个字查找。</p>
<h1 id="2-Vue-js2模板工程说明"><a href="#2-Vue-js2模板工程说明" class="headerlink" title="2 Vue.js2模板工程说明"></a>2 Vue.js2模板工程说明</h1><h2 id="2-1-目的"><a href="#2-1-目的" class="headerlink" title="2.1 目的"></a>2.1 目的</h2><p>封装常用功能和配置，规范代码编写，保证输出的一致性，方便前端人员在此基础上快速开发新项目的业务模块。</p>
<h2 id="2-2-下载"><a href="#2-2-下载" class="headerlink" title="2.2 下载"></a>2.2 下载</h2><p>模板项目（Boilerplate）分为JavaScript和TypeScript两个版本。</p>
<p>JS：</p>
<pre><code>git clone https://github.com/THS-FE/vue2-starter-js.git</code></pre>
<p>TS：</p>
<pre><code>git clone https://github.com/THS-FE/vue2-starter-ts.git</code></pre>
<h2 id="2-3-目录结构"><a href="#2-3-目录结构" class="headerlink" title="2.3 目录结构"></a>2.3 目录结构</h2><p>该目录结构适合中大型项目，如果是小型项目，可对目录或模块进行适当删减（尤其是后面有可选标识的）。</p>
<h3 id="2-3-1-JavaScript版"><a href="#2-3-1-JavaScript版" class="headerlink" title="2.3.1 JavaScript版"></a>2.3.1 JavaScript版</h3><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br></pre></td><td class="code"><pre><span class="line">├── public           <span class="comment">// 静态资源 该文件夹下的内容在构建时会直接拷贝到dist文件夹下</span></span><br><span class="line">  ├── favicon.ico    <span class="comment">// 网站图标</span></span><br><span class="line">  ├── index.html     <span class="comment">// HTML模板页</span></span><br><span class="line">│ └── ...</span><br><span class="line">├── src              <span class="comment">// 主要的工作目录</span></span><br><span class="line">  ├── assets         <span class="comment">// 静态资源 会经过webpack打包处理</span></span><br><span class="line">    ├── fonts        <span class="comment">// 字体文件（可选）</span></span><br><span class="line">      └── ...</span><br><span class="line">    ├── images       <span class="comment">// 图片</span></span><br><span class="line">      ├── error      <span class="comment">// error（通用出错页面）模块</span></span><br><span class="line">        └── ...      <span class="comment">// 使用到的图片</span></span><br><span class="line">      ├── <span class="built_in">module</span>-a   <span class="comment">// 用模块命名（可选）</span></span><br><span class="line">        └── ...      <span class="comment">// 该模块下使用到的图片</span></span><br><span class="line">      └── ...        <span class="comment">// 通用的图片（小项目就不用分文件夹了）</span></span><br><span class="line">    └── styles       <span class="comment">// 样式</span></span><br><span class="line">      ├── common.scss     <span class="comment">// 常用样式（提供通用的）</span></span><br><span class="line">      ├── element-variables.scss     <span class="comment">// 自定义element样式</span></span><br><span class="line">      ├── <span class="built_in">global</span>.scss     <span class="comment">// 全局样式</span></span><br><span class="line">      ├── style.scss      <span class="comment">// 组装各样式并导出，最终被 main.js 引入</span></span><br><span class="line">      └── ...</span><br><span class="line">  ├── components     <span class="comment">// 组件(dumb components，获取props，派发事件)</span></span><br><span class="line">    ├── common</span><br><span class="line">        └── ...      <span class="comment">// 不同项目中的通用组件</span></span><br><span class="line">    ├── <span class="built_in">module</span>-a     <span class="comment">// 用模块命名（可选）</span></span><br><span class="line">        └── ...      <span class="comment">// 该模块下的组件</span></span><br><span class="line">    └── ...          <span class="comment">// 当前项目中的通用组件</span></span><br><span class="line">  ├── directives     <span class="comment">// 指令（可选）</span></span><br><span class="line">     └── ...         <span class="comment">// 自定义指令</span></span><br><span class="line">  ├── layouts        <span class="comment">// 布局（可选）</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── plugins        <span class="comment">// vue插件（如：Element，vuetify）</span></span><br><span class="line">    ├── element.js   <span class="comment">// Element按需加载</span></span><br><span class="line">    ├── index.js     <span class="comment">// 插件的入口文件，组装各插件并导出</span></span><br><span class="line">    └── ...          <span class="comment">// 自定义插件</span></span><br><span class="line">  ├── router         <span class="comment">// 路由（统一使用懒加载）</span></span><br><span class="line">    ├── index.js     <span class="comment">// 路由的入口文件，组装各路由并导出</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── services       <span class="comment">// 接口请求</span></span><br><span class="line">    ├── config.js    <span class="comment">// 常量</span></span><br><span class="line">    ├── index.js     <span class="comment">// 服务调用的入口文件，组装各模块请求方法并导出</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── store          <span class="comment">// 状态管理（可选）</span></span><br><span class="line">    ├── modules      <span class="comment">// 各模块</span></span><br><span class="line">       └── ...       <span class="comment">// 命名尽量和views中的模块对应上</span></span><br><span class="line">    ├── actions.js   <span class="comment">// 根级别的 action</span></span><br><span class="line">    ├── getters.js   <span class="comment">// 根级别的 getter</span></span><br><span class="line">    ├── index.js     <span class="comment">// 状态管理的入口文件，组装各模块并导出</span></span><br><span class="line">    ├── mutation-types.js <span class="comment">// mutation事件类型定义</span></span><br><span class="line">    └── mutations.js <span class="comment">// 根级别的 mutation</span></span><br><span class="line">  ├── utils          <span class="comment">// 工具类</span></span><br><span class="line">    ├── config.js    <span class="comment">// 常量</span></span><br><span class="line">    ├── common.js    <span class="comment">// 常用功能（通用的）</span></span><br><span class="line">    ├── request.js   <span class="comment">// HTTP请求封装</span></span><br><span class="line">    ├── validator.js <span class="comment">// 表单验证</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── views          <span class="comment">// 页面(smart components，可以访问store，路由，window)</span></span><br><span class="line">    ├── exception           <span class="comment">// 通用异常页面</span></span><br><span class="line">      ├── not-found.vue     <span class="comment">// 404页面</span></span><br><span class="line">      └── unauthorized.vue  <span class="comment">// 403页面</span></span><br><span class="line">    ├── <span class="built_in">module</span>-a.vue        <span class="comment">// 用模块命名,如该模块下页面较多，可建以模块为名称的文件夹，在其中创建多个页面</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── app.vue        <span class="comment">// 根组件</span></span><br><span class="line">  └── main.js        <span class="comment">// 入口文件（引入全局的样式和脚本，可安装插件、注册组件或指令等）</span></span><br><span class="line">├── .browserslistrc  <span class="comment">// 目标浏览器配置</span></span><br><span class="line">├── .editorconfig    <span class="comment">// 代码风格规范，如：缩进</span></span><br><span class="line">├── .eslintrc.js     <span class="comment">// eslint配置</span></span><br><span class="line">├── babel.config.js  <span class="comment">// babel配置</span></span><br><span class="line">├── package.json     <span class="comment">// 项目依赖、脚本</span></span><br><span class="line">└── vue.config.js    <span class="comment">// webpack打包配置</span></span><br></pre></td></tr></table></figure>

<p>在创建该项目时，没有添加PWA、单元测试和端到端测试。原因：PWA并没有普及，没多少人会使用；各类测试对于需求经常变化的项目来说就是个累赘，测试用例还没有写完，需求变了…</p>
<img src="/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/createjs.png" class="">

<p>对项目相关工具配置项不了解的，可参看 《<a href="../../../05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/">从零开始搭建前端项目开发环境</a>》</p>
<h3 id="2-3-2-TypeScript版"><a href="#2-3-2-TypeScript版" class="headerlink" title="2.3.2 TypeScript版"></a>2.3.2 TypeScript版</h3><p>因Vue3.0取消了基于类的组件（class based component），使用functional based component+hooks(也就是Composition API)，为了降低学习成本，在使用脚手架创建项目时，没有启用vue-class-component。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br><span class="line">47</span><br><span class="line">48</span><br><span class="line">49</span><br><span class="line">50</span><br><span class="line">51</span><br><span class="line">52</span><br><span class="line">53</span><br><span class="line">54</span><br><span class="line">55</span><br><span class="line">56</span><br><span class="line">57</span><br><span class="line">58</span><br><span class="line">59</span><br><span class="line">60</span><br><span class="line">61</span><br><span class="line">62</span><br><span class="line">63</span><br><span class="line">64</span><br><span class="line">65</span><br><span class="line">66</span><br><span class="line">67</span><br><span class="line">68</span><br><span class="line">69</span><br><span class="line">70</span><br><span class="line">71</span><br><span class="line">72</span><br><span class="line">73</span><br></pre></td><td class="code"><pre><span class="line">├── public           <span class="comment">// 静态资源 该文件夹下的内容在构建时会直接拷贝到dist文件夹下</span></span><br><span class="line">  ├── favicon.ico    <span class="comment">// 网站图标</span></span><br><span class="line">  ├── index.html     <span class="comment">// HTML模板页</span></span><br><span class="line">│ └── ...</span><br><span class="line">├── src              <span class="comment">// 主要工作目录</span></span><br><span class="line">  ├── assets         <span class="comment">// 静态资源 会被webpack打包处理</span></span><br><span class="line">    ├── fonts        <span class="comment">// 字体文件（可选）</span></span><br><span class="line">      └── ...</span><br><span class="line">    ├── images       <span class="comment">// 图片</span></span><br><span class="line">      ├── exception  <span class="comment">// exception（通用异常页面）模块使用到的图片</span></span><br><span class="line">      └── ...</span><br><span class="line">      ├── <span class="built_in">module</span>-a   <span class="comment">// 此处要用模块命名（可选）</span></span><br><span class="line"> 	      └── ...      <span class="comment">// 该模块下使用到的图片</span></span><br><span class="line">      └── ...        <span class="comment">// 通用的图片（小项目就不用分文件夹了）</span></span><br><span class="line">    └── styles       <span class="comment">// 样式</span></span><br><span class="line">      ├── common.scss     <span class="comment">// 常用样式（提供通用的）</span></span><br><span class="line">      ├── element-variables.scss     <span class="comment">// 自定义element样式</span></span><br><span class="line">      ├── <span class="built_in">global</span>.scss     <span class="comment">// 全局样式</span></span><br><span class="line">      ├── style.scss      <span class="comment">// 组装各样式并导出最终被 main.js 引入</span></span><br><span class="line">      └── ...</span><br><span class="line">  ├── components     <span class="comment">// 组件(dumb components，获取props，派发事件)</span></span><br><span class="line">    ├── common</span><br><span class="line">        └── ...      <span class="comment">// 通用组件</span></span><br><span class="line">    ├── <span class="built_in">module</span>-a     <span class="comment">// 此处要用模块命名（可选）</span></span><br><span class="line">        └── ...      <span class="comment">// 该模块下的组件</span></span><br><span class="line">    └── ...          <span class="comment">// 当前项目中的通用组件</span></span><br><span class="line">  ├── directives     <span class="comment">// 指令（可选）</span></span><br><span class="line">     └── ...         <span class="comment">// 自定义指令</span></span><br><span class="line">  ├── layouts        <span class="comment">// 布局（可选）</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── plugins        <span class="comment">// vue插件（如：Element，vuetify）</span></span><br><span class="line">    ├── element.ts   <span class="comment">// Element按需加载</span></span><br><span class="line">    ├── index.ts     <span class="comment">// 组装各插件并导出</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── router         <span class="comment">// 路由（统一使用懒加载）</span></span><br><span class="line">    ├── index.ts     <span class="comment">// 组装各路由并导出</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── services       <span class="comment">// 接口请求</span></span><br><span class="line">    ├── config.ts    <span class="comment">// 常量</span></span><br><span class="line">    ├── index.ts     <span class="comment">// 组装各请求并导出</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── store          <span class="comment">// 状态管理（可选）</span></span><br><span class="line">    ├── modules      <span class="comment">// 各模块</span></span><br><span class="line">       └── ...       <span class="comment">// 尽量和views中的模块对应上</span></span><br><span class="line">    ├── actions.ts   <span class="comment">// 根级别的 action</span></span><br><span class="line">    ├── getters.js   <span class="comment">// 根级别的 getter</span></span><br><span class="line">    ├── index.ts     <span class="comment">// 组装模块并导出</span></span><br><span class="line">    ├── mutation-types.ts <span class="comment">// mutation事件类型定义</span></span><br><span class="line">    └── mutations.ts <span class="comment">// 根级别的 mutation</span></span><br><span class="line">  ├── utils          <span class="comment">// 工具类</span></span><br><span class="line">    ├── config.ts    <span class="comment">// 常量</span></span><br><span class="line">    ├── common.ts    <span class="comment">// 常用功能（提供通用的）</span></span><br><span class="line">    ├── request.ts   <span class="comment">// HTTP请求</span></span><br><span class="line">    ├── validator.ts <span class="comment">// 表单验证</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── views          <span class="comment">// 页面(smart components，可以访问store，路由，window)</span></span><br><span class="line">    ├── exception        <span class="comment">// 通用异常展示页面</span></span><br><span class="line">      ├── NotFound.vue     <span class="comment">// 404页面</span></span><br><span class="line">      └── Unauthorized.vue <span class="comment">// 401页面</span></span><br><span class="line">    ├── <span class="built_in">module</span>-a.vue     <span class="comment">// 用模块命名,如该模块下页面较多，可建以模块为名称的文件夹，在其中创建多个页面</span></span><br><span class="line">    └── ...</span><br><span class="line">  ├── app.vue        <span class="comment">// 根组件</span></span><br><span class="line">  ├── main.ts        <span class="comment">// 入口文件（引入全局的样式和脚本，可安装插件、注册组件或指令等）</span></span><br><span class="line">  ├── shims-tsx.d.ts <span class="comment">// 允许使用tsx的文件，用于编写jsx风格的ts代码</span></span><br><span class="line">  └── shims-vue.d.ts <span class="comment">// 帮助IDE识别 .vue文件</span></span><br><span class="line">├── .browserslistrc  <span class="comment">// 目标浏览器配置</span></span><br><span class="line">├── .editorconfig    <span class="comment">// 代码风格规范</span></span><br><span class="line">├── .eslintrc.js     <span class="comment">// eslint配置</span></span><br><span class="line">├── babel.config.js  <span class="comment">// babel配置</span></span><br><span class="line">├── package.json     <span class="comment">// 项目依赖、脚本</span></span><br><span class="line">├── postcss.config.js<span class="comment">// postcss配置</span></span><br><span class="line">├── tsconfig.json    <span class="comment">// TypeScript配置文件</span></span><br><span class="line">└── vue.config.js    <span class="comment">// webpack打包配置</span></span><br></pre></td></tr></table></figure>

<h2 id="2-4-配置变更"><a href="#2-4-配置变更" class="headerlink" title="2.4 配置变更"></a>2.4 配置变更</h2><p>以下内容均已在模板项目里添加，这里只是做个说明。</p>
<h3 id="2-4-1-新增依赖"><a href="#2-4-1-新增依赖" class="headerlink" title="2.4.1 新增依赖"></a>2.4.1 新增依赖</h3><h4 id="2-4-1-1-Normalize-css-6-2k"><a href="#2-4-1-1-Normalize-css-6-2k" class="headerlink" title="2.4.1.1 Normalize.css 6.2k"></a>2.4.1.1 <a target="_blank" rel="noopener" href="http://necolas.github.io/normalize.css/">Normalize.css</a> 6.2k</h4><p>为默认的HTML元素样式上提供了跨浏览器的高度一致性。相比于传统的CSS reset，Normalize.css是一种现代的、为HTML5准备的优质替代方案。</p>
<p>安装：</p>
<pre><code>npm i normalize.css -S</code></pre>
<p>已在main.js文件中引入：</p>
<pre><code>import &#39;normalize.css&#39;;</code></pre>
<h4 id="2-4-1-2-moment-239-1kDay-js-6-3k"><a href="#2-4-1-2-moment-239-1kDay-js-6-3k" class="headerlink" title="2.4.1.2 moment 239.1kDay.js 6.3k"></a>2.4.1.2 <del><a target="_blank" rel="noopener" href="http://momentjs.cn/">moment</a> 239.1k</del><a target="_blank" rel="noopener" href="https://github.com/iamkun/dayjs/blob/dev/docs/zh-cn/README.zh-CN.md">Day.js</a> 6.3k</h4><p>是一个轻量的处理时间和日期的 JavaScript 库，和 Moment.js 的 API 设计保持完全一样，用于解析、检验、操作、以及显示日期。</p>
<p>安装：</p>
<pre><code>npm i dayjs -S</code></pre>
<p>可在任何需要的文件中引入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> dayjs <span class="keyword">from</span> <span class="string">&#x27;dayjs&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;dayjs/locale/zh-cn&#x27;</span>;</span><br><span class="line"></span><br><span class="line">dayjs.locale(<span class="string">&#x27;zh-cn&#x27;</span>); <span class="comment">// 使用中文</span></span><br></pre></td></tr></table></figure>

<h4 id="2-4-1-3-Element-637-7k"><a href="#2-4-1-3-Element-637-7k" class="headerlink" title="2.4.1.3 Element 637.7k"></a>2.4.1.3 <a target="_blank" rel="noopener" href="https://element.eleme.cn/#/">Element</a> 637.7k</h4><p>一套为开发者、设计师和产品经理准备的基于 Vue2.0 的桌面端组件库。</p>
<p>安装：</p>
<pre><code>npm i element-ui -S</code></pre>
<p>已在plugins/index.js文件中引入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> ElementUI <span class="keyword">from</span> <span class="string">&#x27;element-ui&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/assets/styles/element-variables.scss&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(ElementUI);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>项目中已改成按需加载。</p>
<h4 id="2-4-1-4-axios-12-9k"><a href="#2-4-1-4-axios-12-9k" class="headerlink" title="2.4.1.4 axios 12.9k"></a>2.4.1.4 <a target="_blank" rel="noopener" href="http://www.axios-js.com/">axios</a> 12.9k</h4><p>是一个基于 promise 的 HTTP 库，可以用在浏览器和 node.js 中。</p>
<p>安装：</p>
<pre><code>npm i axios -S</code></pre>
<p>已在utils/request.js文件中引入：</p>
<pre><code>import axios from &#39;axios&#39;;</code></pre>
<h4 id="2-4-1-5-vue-event-proxy-1-79kb"><a href="#2-4-1-5-vue-event-proxy-1-79kb" class="headerlink" title="2.4.1.5 vue-event-proxy 1.79kb"></a>2.4.1.5 <a target="_blank" rel="noopener" href="https://github.com/jser-club/vue-event-proxy">vue-event-proxy</a> 1.79kb</h4><p>让Vue.js支持全局事件的库。</p>
<ul>
<li>通过增加前缀实现全局事件，能在不同组件间进行数据通信</li>
<li>组件销毁自动移除注册的事件</li>
</ul>
<p>安装：</p>
<pre><code>npm i vue-event-proxy -S</code></pre>
<p>已在plugins/index.js文件中引入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> EventBus <span class="keyword">from</span> <span class="string">&#x27;vue-event-proxy&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(EventBus);</span><br></pre></td></tr></table></figure>

<p>TS版需要同时在shims-vue.d.ts文件中添加模块申明：</p>
<pre><code>declare module &#39;vue-event-proxy&#39;</code></pre>
<p>在非父子组件间使用（相当于事件总线）：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 发布</span></span><br><span class="line"><span class="built_in">this</span>.$emit(<span class="string">&#x27;global:你的事件名字&#x27;</span>);</span><br><span class="line"></span><br><span class="line"><span class="comment">// 监听</span></span><br><span class="line"><span class="built_in">this</span>.$on(<span class="string">&#x27;global:你的事件名字&#x27;</span>, <span class="function">() =&gt;</span> &#123;&#125;);</span><br></pre></td></tr></table></figure>

<p>如不加 global: 前缀，则和平时使用的方式一致。</p>
<h3 id="2-4-2-新增功能"><a href="#2-4-2-新增功能" class="headerlink" title="2.4.2 新增功能"></a>2.4.2 新增功能</h3><h4 id="2-4-2-1-request"><a href="#2-4-2-1-request" class="headerlink" title="2.4.2.1 request"></a>2.4.2.1 request</h4><p>定义拦截器对HTTP请求配置做统一处理。</p>
<p>已写在utils/request.js文件中，需按实际项目需要进行修改：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> axios <span class="keyword">from</span> <span class="string">&#x27;axios&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> service = axios.create(&#123;</span><br><span class="line">  baseURL: process.env.VUE_APP_BASE_API, <span class="comment">// url = base url + request url</span></span><br><span class="line"><span class="comment">//   withCredentials: true, // 如跨域请求时要带上cookie,则设置为true</span></span><br><span class="line">  timeout: <span class="number">5000</span>, <span class="comment">// 请求超时时长</span></span><br><span class="line">&#125;);</span><br><span class="line"></span><br><span class="line">service.interceptors.request.use(</span><br><span class="line">  (config) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 按需添加内容</span></span><br><span class="line">    <span class="comment">// eslint-disable-next-line no-empty</span></span><br><span class="line">    <span class="keyword">if</span> (config.method === <span class="string">&#x27;post&#x27;</span>) &#123;</span><br><span class="line"></span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> config;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line">service.interceptors.response.use(</span><br><span class="line">  (response) =&gt; &#123;</span><br><span class="line">    <span class="comment">// 如果返回的状态不是200 就报错 按需修改</span></span><br><span class="line">    <span class="keyword">if</span> (response.status &amp;&amp; response.status !== <span class="number">200</span>) &#123;</span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(<span class="keyword">new</span> <span class="built_in">Error</span>(<span class="string">&#x27;Error&#x27;</span>));</span><br><span class="line">    &#125;</span><br><span class="line">    <span class="keyword">return</span> response;</span><br><span class="line">  &#125;,</span><br><span class="line">  (error) =&gt; &#123;</span><br><span class="line">    <span class="built_in">console</span>.log(error);</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">Promise</span>.reject(error);</span><br><span class="line">  &#125;,</span><br><span class="line">);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> service;</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<p>如果使用同一个服务地址，那么还需要在vue.config.js中要修改：</p>
<p>// 设置HTTP请求的base url，需修改</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 设置HTTP请求的base url，需修改</span></span><br><span class="line">process.env.VUE_APP_BASE_API = isProd() ? <span class="string">&#x27;这里要修改成实际的地址&#x27;</span> : <span class="string">&#x27;&#x27;</span>;</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-2-导航守卫"><a href="#2-4-2-2-导航守卫" class="headerlink" title="2.4.2.2 导航守卫"></a>2.4.2.2 导航守卫</h4><p>通过跳转或取消的方式守卫导航。</p>
<p>已写在router/index.js文件中，需按实际项目需要进行修改：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">router.beforeEach(<span class="function">(<span class="params">to, <span class="keyword">from</span>, next</span>) =&gt;</span> &#123;</span><br><span class="line">  <span class="comment">// 如果登录的时候设置过;</span></span><br><span class="line">  <span class="keyword">if</span> (<span class="built_in">localStorage</span>.getItem(<span class="string">&#x27;token&#x27;</span>) != <span class="literal">null</span>) &#123;</span><br><span class="line">    next();</span><br><span class="line">  &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">    <span class="comment">// 如果没有设置这个值为空,说明没有登录，导向登录页</span></span><br><span class="line">    <span class="comment">// eslint-disable-next-line no-lonely-if</span></span><br><span class="line">    <span class="keyword">if</span> (to.name === <span class="string">&#x27;login&#x27;</span>) &#123;</span><br><span class="line">      next();</span><br><span class="line">    &#125; <span class="keyword">else</span> &#123;</span><br><span class="line">      next(&#123; <span class="attr">path</span>: <span class="string">&#x27;/login&#x27;</span> &#125;);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-3-路由拆分"><a href="#2-4-2-3-路由拆分" class="headerlink" title="2.4.2.3 路由拆分"></a>2.4.2.3 路由拆分</h4><p>按模块拆分成不同的路由文件，方便多人协作同步开发，互不影响。</p>
<p>可在router/index.js 文件中添加：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> homeRoutes <span class="keyword">from</span> <span class="string">&#x27;./home&#x27;</span>; <span class="comment">// 引入首页模块的路由</span></span><br><span class="line"></span><br><span class="line"><span class="comment">// routes 需要定义类型</span></span><br><span class="line"><span class="keyword">let</span> routes: RouteConfig[] = [&#123;</span><br><span class="line">  path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">  redirect: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">&#125;,</span><br><span class="line">&#123;</span><br><span class="line">  path: <span class="string">&#x27;/login&#x27;</span>,</span><br><span class="line">  name: <span class="string">&#x27;login&#x27;</span>,</span><br><span class="line">  component: Login,</span><br><span class="line">&#125;,</span><br><span class="line">...</span><br><span class="line">];</span><br><span class="line"></span><br><span class="line">routes = [...routes, ...homeRoutes]; <span class="comment">// 合并它模块的路由</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> router = <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  mode: <span class="string">&#x27;history&#x27;</span>,</span><br><span class="line">  base: process.env.BASE_URL,</span><br><span class="line">  routes,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-4-store拆分"><a href="#2-4-2-4-store拆分" class="headerlink" title="2.4.2.4 store拆分"></a>2.4.2.4 store拆分</h4><p>如果项目非常大状态就会有很多，如不进行分类处理，所有的状态和对状态的处理都放一个文件里面，代码会很臃肿，不利于后期的维护。</p>
<p>在store/index.js 文件中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> mutations <span class="keyword">from</span> <span class="string">&#x27;./mutations&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> actions <span class="keyword">from</span> <span class="string">&#x27;./actions&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> getters <span class="keyword">from</span> <span class="string">&#x27;./getters&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> user <span class="keyword">from</span> <span class="string">&#x27;./modules/user&#x27;</span>;</span><br><span class="line"></span><br><span class="line"><span class="keyword">const</span> state = &#123;</span><br><span class="line"></span><br><span class="line">&#125;;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  state,</span><br><span class="line">  getters,</span><br><span class="line">  actions,</span><br><span class="line">  mutations,</span><br><span class="line">  modules: &#123;</span><br><span class="line">    user,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-5-Vue-Composition-API"><a href="#2-4-2-5-Vue-Composition-API" class="headerlink" title="2.4.2.5 Vue Composition API"></a>2.4.2.5 <a target="_blank" rel="noopener" href="https://vue-composition-api-rfc.netlify.app/#summary">Vue Composition API</a></h4><p>方便以后平滑过渡到 Vue.js3.0。</p>
<p>安装：</p>
<pre><code>npm i @vue/composition-api -S</code></pre>
<p>已在plugins/index.js文件中引入：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> VueCompositionApi <span class="keyword">from</span> <span class="string">&#x27;@vue/composition-api&#x27;</span></span><br><span class="line"></span><br><span class="line">Vue.use(VueCompositionApi)</span><br></pre></td></tr></table></figure>

<h4 id="2-4-2-6-主题切换"><a href="#2-4-2-6-主题切换" class="headerlink" title="2.4.2.6 主题切换"></a>2.4.2.6 主题切换</h4><p>使用CSS Variables</p>
<h3 id="2-4-3-配置新增"><a href="#2-4-3-配置新增" class="headerlink" title="2.4.3 配置新增"></a>2.4.3 配置新增</h3><h4 id="2-4-3-1-vue-config-js"><a href="#2-4-3-1-vue-config-js" class="headerlink" title="2.4.3.1 vue.config.js"></a>2.4.3.1 vue.config.js</h4><p>为了不改变默认配置，在 configureWebpack 中通过 Object.assign 的方式合并配置，这种方式只会对配置进行新增、修改，而不会过多地改变默认配置。</p>
<h5 id="2-4-3-1-1-去除console"><a href="#2-4-3-1-1-去除console" class="headerlink" title="2.4.3.1.1 去除console"></a>2.4.3.1.1 去除console</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 去除 console</span></span><br><span class="line"><span class="built_in">Object</span>.assign(config.optimization.minimizer[<span class="number">0</span>].options.terserOptions.compress, &#123;</span><br><span class="line">  drop_console: <span class="literal">true</span>,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h5 id="2-4-3-1-2-分离第三方库"><a href="#2-4-3-1-2-分离第三方库" class="headerlink" title="2.4.3.1.2 分离第三方库"></a>2.4.3.1.2 分离第三方库</h5><figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 单独将 elementUI 拆包</span></span><br><span class="line"><span class="built_in">Object</span>.assign(config.optimization.splitChunks.cacheGroups, &#123;</span><br><span class="line">  elementUI: &#123;</span><br><span class="line">    name: <span class="string">&#x27;chunk-elementUI&#x27;</span>,</span><br><span class="line">    priority: <span class="number">20</span>, <span class="comment">// 权重要大于 vendors 和 app 不然会被打包进 vendors 或者 app</span></span><br><span class="line">    test: <span class="regexp">/[\\/]node_modules[\\/]element-ui[\\/]/</span>,</span><br><span class="line">    chunks: <span class="string">&#x27;all&#x27;</span>,</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<h4 id="2-4-3-2-Element-按需加载-性能优化1"><a href="#2-4-3-2-Element-按需加载-性能优化1" class="headerlink" title="2.4.3.2 Element 按需加载 (性能优化1)"></a>2.4.3.2 Element 按需加载 (性能优化1)</h4><p>安装：</p>
<pre><code>npm install babel-plugin-component -D</code></pre>
<p>修改babel.config.js：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  presets: [</span><br><span class="line">    <span class="string">&#x27;@vue/cli-plugin-babel/preset&#x27;</span>,</span><br><span class="line">  ],</span><br><span class="line">  <span class="comment">// element按需加载</span></span><br><span class="line">  plugins: [</span><br><span class="line">    [</span><br><span class="line">      <span class="string">&#x27;component&#x27;</span>,</span><br><span class="line">      &#123;</span><br><span class="line">        libraryName: <span class="string">&#x27;element-ui&#x27;</span>,</span><br><span class="line">        styleLibraryName: <span class="string">&#x27;theme-chalk&#x27;</span>,</span><br><span class="line">      &#125;,</span><br><span class="line">    ],</span><br><span class="line">  ],</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h2 id="2-5-安装运行"><a href="#2-5-安装运行" class="headerlink" title="2.5 安装运行"></a>2.5 安装运行</h2><p>在项目所在文件夹下运行命令行安装依赖：</p>
<pre><code>npm install</code></pre>
<p>如果NPM下载慢的话，可使用以下命令：</p>
<pre><code>npm install --registry=https://registry.npm.taobao.org</code></pre>
<p>项目启动：</p>
<pre><code>npm run serve</code></pre>
<p>项目打包：</p>
<pre><code>npm run build</code></pre>
<h1 id="3-命名"><a href="#3-命名" class="headerlink" title="3 命名"></a>3 命名</h1><h2 id="3-1-组件"><a href="#3-1-组件" class="headerlink" title="3.1 组件"></a>3.1 组件</h2><p>尽量将组件放在对应目录所属模块的文件夹之下，若只有一个文件的则直接放在components或views目录下，如：login，home。</p>
<p>组件名尽量为名词，开头的单词就是所属模块的名字。</p>
<h3 id="3-1-1（官）使用两个或以上单词"><a href="#3-1-1（官）使用两个或以上单词" class="headerlink" title="3.1.1（官）使用两个或以上单词"></a>3.1.1（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E7%BB%84%E4%BB%B6%E5%90%8D%E4%B8%BA%E5%A4%9A%E4%B8%AA%E5%8D%95%E8%AF%8D-%E5%BF%85%E8%A6%81">使用两个或以上单词</a></h3><p>根组件 App 以及 &lt;transition&gt;、&lt;component&gt; 之类的 Vue 内置组件除外。这样做可以避免跟现有的以及未来的 HTML 元素<a target="_blank" rel="noopener" href="https://w3c.github.io/webcomponents/spec/custom/#valid-custom-element-name">相冲突</a>，因为所有的 HTML 元素名称都是单个单词的。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;todo&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;Todo&#x27;</span>,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;todo-item&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;TodoItem&#x27;</span>,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>常用的结尾单词有</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">***-detail.vue</span><br><span class="line"></span><br><span class="line">***-edit.vue</span><br><span class="line"></span><br><span class="line">***-list.vue</span><br><span class="line"></span><br><span class="line">***-info.vue</span><br><span class="line"></span><br><span class="line">***-report.vue</span><br></pre></td></tr></table></figure>

<h3 id="3-1-2（官）使用PascalCase或kebab-case命名组件文件"><a href="#3-1-2（官）使用PascalCase或kebab-case命名组件文件" class="headerlink" title="3.1.2（官）使用PascalCase或kebab-case命名组件文件"></a>3.1.2（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E5%8D%95%E6%96%87%E4%BB%B6%E7%BB%84%E4%BB%B6%E6%96%87%E4%BB%B6%E7%9A%84%E5%A4%A7%E5%B0%8F%E5%86%99-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">使用<del>PascalCase或</del>kebab-case命名组件文件</a></h3><p>单词大写开头对于代码编辑器的自动补全最为友好。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- mycomponent.vue</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- myComponent.vue</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- my-component.vue</span><br><span class="line"></span><br></pre></td></tr></table></figure>

<h3 id="3-1-3（官）JS-JSX-中的组件名应该始终使用-PascalCase-进行命名"><a href="#3-1-3（官）JS-JSX-中的组件名应该始终使用-PascalCase-进行命名" class="headerlink" title="3.1.3（官）JS/JSX 中的组件名应该始终使用 PascalCase 进行命名"></a>3.1.3（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#JS-JSX-%E4%B8%AD%E7%9A%84%E7%BB%84%E4%BB%B6%E5%90%8D%E5%A4%A7%E5%B0%8F%E5%86%99-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">JS/JSX 中的组件名应该始终使用 PascalCase 进行命名</a></h3><p>在 JavaScript 中，PascalCase 是类和构造函数 (本质上任何可以产生多份不同实例的东西) 的命名约定。Vue 组件也有多份实例，所以同样使用 PascalCase 是有意义的。额外的好处是，在 JSX (和模板) 里使用 PascalCase 使得代码的读者更容易分辨 Vue 组件和 HTML 元素。</p>
<p>然而，对于只通过 Vue.component 定义全局组件的应用来说，推荐 kebab-case 作为替代。原因是：</p>
<ul>
<li>全局组件很少被 JavaScript 引用，所以遵守 JavaScript 的命名约定意义不大。</li>
<li>这些应用往往包含许多 DOM 内的模板，这种情况下是必须使用 kebab-case 的。</li>
</ul>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;myComponent&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> myComponent <span class="keyword">from</span> <span class="string">&#x27;./MyComponent.vue&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;myComponent&#x27;</span>,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;my-component&#x27;</span>,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;MyComponent&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;my-component&#x27;</span>, &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> MyComponent <span class="keyword">from</span> <span class="string">&#x27;./MyComponent.vue&#x27;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  name: <span class="string">&#x27;MyComponent&#x27;</span>,</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h3 id="3-1-4（官）和父组件紧密耦合的子组件应该以父组件名作为前缀命名"><a href="#3-1-4（官）和父组件紧密耦合的子组件应该以父组件名作为前缀命名" class="headerlink" title="3.1.4（官）和父组件紧密耦合的子组件应该以父组件名作为前缀命名"></a>3.1.4（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E7%B4%A7%E5%AF%86%E8%80%A6%E5%90%88%E7%9A%84%E7%BB%84%E4%BB%B6%E5%90%8D-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">和父组件紧密耦合的子组件应该以父组件名作为前缀命名</a></h3><p>可以试着通过在其父组件命名的目录中嵌套子组件以解决这个问题。比如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- TodoList/</span><br><span class="line">   |- Item/</span><br><span class="line">      |- index.vue</span><br><span class="line">      |- Button.vue</span><br><span class="line">   |- index.vue</span><br></pre></td></tr></table></figure>

<p>或：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- TodoList/</span><br><span class="line">   |- Item/</span><br><span class="line">      |- Button.vue</span><br><span class="line">   |- Item.vue</span><br><span class="line">|- TodoList.vue</span><br></pre></td></tr></table></figure>

<p>但是这种方式并不推荐，因为这会导致：</p>
<ul>
<li>许多文件的名字相同，使得在编辑器中快速切换文件变得困难。</li>
<li>过多嵌套的子目录增加了在编辑器侧边栏中浏览组件所花的时间。</li>
</ul>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- TodoList.vue</span><br><span class="line">|- TodoItem.vue</span><br><span class="line">|- TodoButton.vue</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- SearchSidebar.vue</span><br><span class="line">|- NavigationForSearchSidebar.vue</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- TodoList.vue</span><br><span class="line">|- TodoListItem.vue</span><br><span class="line">|- TodoListItemButton.vue</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- SearchSidebar.vue</span><br><span class="line">|- SearchSidebarNavigation.vue</span><br></pre></td></tr></table></figure>

<h3 id="3-1-5（官）以高级别的-通常是一般化描述的-单词开头，以描述性的修饰词结尾"><a href="#3-1-5（官）以高级别的-通常是一般化描述的-单词开头，以描述性的修饰词结尾" class="headerlink" title="3.1.5（官）以高级别的(通常是一般化描述的) 单词开头，以描述性的修饰词结尾"></a>3.1.5（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E7%BB%84%E4%BB%B6%E5%90%8D%E4%B8%AD%E7%9A%84%E5%8D%95%E8%AF%8D%E9%A1%BA%E5%BA%8F-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">以高级别的(通常是一般化描述的) 单词开头，以描述性的修饰词结尾</a></h3><p>比如对于一个带搜索表单的应用来说，它可能包含这样的组件：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- ClearSearchButton.vue</span><br><span class="line">|- ExcludeFromSearchInput.vue</span><br><span class="line">|- LaunchOnStartupCheckbox.vue</span><br><span class="line">|- RunSearchButton.vue</span><br><span class="line">|- SearchInput.vue</span><br><span class="line">|- TermsCheckbox.vue</span><br></pre></td></tr></table></figure>

<p>很难看出来哪些组件是针对搜索的。现根据规则给组件重新命名：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- SearchButtonClear.vue</span><br><span class="line">|- SearchButtonRun.vue</span><br><span class="line">|- SearchInputExcludeGlob.vue</span><br><span class="line">|- SearchInputQuery.vue</span><br><span class="line">|- SettingsCheckboxLaunchOnStartup.vue</span><br><span class="line">|- SettingsCheckboxTerms.vue</span><br></pre></td></tr></table></figure>

<p>因为编辑器通常会按字母顺序组织文件，所以现在组件之间的重要关系一目了然。</p>
<p>若换成多级目录的方式，把所有的搜索组件放到“search”目录，把所有的设置组件放到“settings”目录。只推荐在非常大型 (如有 100+ 个组件) 的应用下才考虑这么做，因为：</p>
<ul>
<li>在多级目录间找来找去，要比在单个 components 目录下滚动查找花费更多的精力。</li>
<li>存在组件重名 (比如存在多个 ButtonDelete 组件) 的时候在编辑器里更难快速定位。</li>
<li>让重构变得更难，为一个移动了的组件更新相关引用时，查找/替换通常并不高效。</li>
</ul>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- ClearSearchButton.vue</span><br><span class="line">|- ExcludeFromSearchInput.vue</span><br><span class="line">|- LaunchOnStartupCheckbox.vue</span><br><span class="line">|- RunSearchButton.vue</span><br><span class="line">|- SearchInput.vue</span><br><span class="line">|- TermsCheckbox.vue</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- SearchButtonClear.vue</span><br><span class="line">|- SearchButtonRun.vue</span><br><span class="line">|- SearchInputQuery.vue</span><br><span class="line">|- SearchInputExcludeGlob.vue</span><br><span class="line">|- SettingsCheckboxTerms.vue</span><br><span class="line">|- SettingsCheckboxLaunchOnStartup.vue</span><br></pre></td></tr></table></figure>

<h3 id="3-1-6（官）使用完整单词而不是缩写"><a href="#3-1-6（官）使用完整单词而不是缩写" class="headerlink" title="3.1.6（官）使用完整单词而不是缩写"></a>3.1.6（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E5%AE%8C%E6%95%B4%E5%8D%95%E8%AF%8D%E7%9A%84%E7%BB%84%E4%BB%B6%E5%90%8D-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">使用完整单词而不是缩写</a></h3><p>编辑器中的自动补全已经让书写长命名的代价非常之低了，而其带来的明确性却是非常宝贵的。不常用的缩写尤其应该避免。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- SdSettings.vue</span><br><span class="line">|- UProfOpts.vue</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- StudentDashboardSettings.vue</span><br><span class="line">|- UserProfileOptions.vue</span><br></pre></td></tr></table></figure>

<h3 id="3-1-7（官）基础组件-也就是展示类的、无逻辑的或无状态的组件-应该全部以一个特定的前缀开头，比如-Base"><a href="#3-1-7（官）基础组件-也就是展示类的、无逻辑的或无状态的组件-应该全部以一个特定的前缀开头，比如-Base" class="headerlink" title="3.1.7（官）基础组件(也就是展示类的、无逻辑的或无状态的组件) 应该全部以一个特定的前缀开头，比如 Base"></a>3.1.7（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E5%9F%BA%E7%A1%80%E7%BB%84%E4%BB%B6%E5%90%8D-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">基础组件(也就是展示类的、无逻辑的或无状态的组件) 应该全部以一个特定的前缀开头，比如 Base</a></h3><ul>
<li>当在编辑器中以字母顺序排序时，应用的基础组件会全部列在一起，这样更容易识别。</li>
<li>因为组件名应该始终是多个单词，所以这样做可以避免在包裹简单组件时随意选择前缀 (比如 MyButton、VueButton)。</li>
<li>因为这些组件会被频繁使用，所以可能想把它们放到全局而不是在各处分别导入它们。</li>
</ul>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- MyButton.vue</span><br><span class="line">|- VueTable.vue</span><br><span class="line">|- Icon.vue</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- BaseButton.vue</span><br><span class="line">|- BaseTable.vue</span><br><span class="line">|- BaseIcon.vue</span><br></pre></td></tr></table></figure>

<h3 id="3-1-8（官）单个活跃实例的组件应该以The前缀命名，以示其唯一性"><a href="#3-1-8（官）单个活跃实例的组件应该以The前缀命名，以示其唯一性" class="headerlink" title="3.1.8（官）单个活跃实例的组件应该以The前缀命名，以示其唯一性"></a>3.1.8（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E5%8D%95%E4%BE%8B%E7%BB%84%E4%BB%B6%E5%90%8D-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">单个活跃实例的组件应该以The前缀命名，以示其唯一性</a></h3><p>这不意味着组件只可用于一个单页面，而是每个页面只使用一次。这些组件永远不接受任何 prop，因为它们是为应用定制的，而不是它们在应用中的上下文。如果发现有必要添加 prop，那就表明这实际上是一个可复用的组件，只是目前在每个页面里只使用一次。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- Heading.vue</span><br><span class="line">|- MySidebar.vue</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">components/</span><br><span class="line">|- TheHeading.vue</span><br><span class="line">|- TheSidebar.vue</span><br></pre></td></tr></table></figure>

<h2 id="3-2-Prop"><a href="#3-2-Prop" class="headerlink" title="3.2 Prop"></a>3.2 Prop</h2><h3 id="3-2-1（官）应该始终使用camelCase，而在模板和-JSX-中应该始终使用-kebab-case"><a href="#3-2-1（官）应该始终使用camelCase，而在模板和-JSX-中应该始终使用-kebab-case" class="headerlink" title="3.2.1（官）应该始终使用camelCase，而在模板和 JSX 中应该始终使用 kebab-case"></a>3.2.1（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#Prop-%E5%90%8D%E5%A4%A7%E5%B0%8F%E5%86%99-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">应该始终使用camelCase，而在模板和 JSX 中应该始终使用 kebab-case</a></h3><p>我们单纯的遵循每个语言的约定。在 JavaScript 中更自然的是 camelCase。而在 HTML 中则是 kebab-case。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">  <span class="string">&#x27;greeting-text&#x27;</span>: <span class="built_in">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;WelcomeMessage greetingText=<span class="string">&quot;hi&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">props: &#123;</span><br><span class="line">  greetingText: <span class="built_in">String</span></span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">&lt;WelcomeMessage greeting-text=<span class="string">&quot;hi&quot;</span>/&gt;</span><br></pre></td></tr></table></figure>

<h2 id="3-3-method"><a href="#3-3-method" class="headerlink" title="3.3 method"></a>3.3 method</h2><h3 id="3-3-1-要是动宾短语"><a href="#3-3-1-要是动宾短语" class="headerlink" title="3.3.1 要是动宾短语"></a>3.3.1 要是动宾短语</h3><p>Bad</p>
<pre><code>  go、nextPage、show、open、login</code></pre>
<p>Good</p>
<pre><code>  jumpPage、openCarInfoDialog</code></pre>
<p>尽量使用常用单词开头：</p>
<pre><code>  set、get、open、close、jump</code></pre>
<h3 id="3-3-2-使用camelCase进行命名"><a href="#3-3-2-使用camelCase进行命名" class="headerlink" title="3.3.2 使用camelCase进行命名"></a>3.3.2 使用camelCase进行命名</h3><p>Bad</p>
<pre><code>  get_list_data、getlistData</code></pre>
<p>Good</p>
<pre><code>  getListData</code></pre>
<h2 id="3-4-事件"><a href="#3-4-事件" class="headerlink" title="3.4 事件"></a>3.4 事件</h2><h3 id="3-4-1（官）使用kebab-case进行命名"><a href="#3-4-1（官）使用kebab-case进行命名" class="headerlink" title="3.4.1（官）使用kebab-case进行命名"></a>3.4.1（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-custom-events.html#%E4%BA%8B%E4%BB%B6%E5%90%8D">使用kebab-case进行命名</a></h3><p>无论是camelCase 或 PascalCase的命名，都能被监听到，但 DOM 模板中使用会感觉怪怪的。</p>
<h3 id="3-4-2-以动词或是名词结尾"><a href="#3-4-2-以动词或是名词结尾" class="headerlink" title="3.4.2 以动词或是名词结尾"></a>3.4.2 以动词或是名词结尾</h3><p>如：upload-success、upload-error 、 dropzone-upload-success、dropzone-upload-error。</p>
<h2 id="3-5-文件夹"><a href="#3-5-文件夹" class="headerlink" title="3.5 文件夹"></a>3.5 文件夹</h2><h3 id="3-5-1-尽量是小写的单个名词"><a href="#3-5-1-尽量是小写的单个名词" class="headerlink" title="3.5.1 尽量是小写的单个名词"></a>3.5.1 尽量是小写的单个名词</h3><p>有复数结构时，要采用复数命名法。例：scripts, styles, images。</p>
<h3 id="3-5-2-如不是单个，则使用-kebab-case进行命名"><a href="#3-5-2-如不是单个，则使用-kebab-case进行命名" class="headerlink" title="3.5.2 如不是单个，则使用 kebab-case进行命名"></a>3.5.2 如不是单个，则使用 kebab-case进行命名</h3><p>使用kebab-case命名的文件夹比camelCase命名的文件夹看起来更清晰，可参考node_modules文件夹里的内容。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">errorPage</span><br><span class="line"></span><br><span class="line">ErrorPage</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">error-page</span><br></pre></td></tr></table></figure>

<h2 id="3-6-文件"><a href="#3-6-文件" class="headerlink" title="3.6 文件"></a>3.6 文件</h2><h3 id="3-6-1-js文件命名规范"><a href="#3-6-1-js文件命名规范" class="headerlink" title="3.6.1 *.js文件命名规范"></a>3.6.1 *.js文件命名规范</h3><p>统一使用kebab-case风格</p>
<h3 id="3-6-2-ts文件命名规范"><a href="#3-6-2-ts文件命名规范" class="headerlink" title="3.6.2 *.ts文件命名规范"></a>3.6.2 *.ts文件命名规范</h3><p>统一使用kebab-case风格</p>
<h3 id="3-6-3-scss文件命名规范"><a href="#3-6-3-scss文件命名规范" class="headerlink" title="3.6.3 *.scss文件命名规范"></a>3.6.3 *.scss文件命名规范</h3><p>统一使用kebab-case命名风格</p>
<h3 id="3-6-4-其它文件命名规范"><a href="#3-6-4-其它文件命名规范" class="headerlink" title="3.6.4 其它文件命名规范"></a>3.6.4 其它文件命名规范</h3><p>统一使用kebab-case命名风格</p>
<h1 id="4-一般约束"><a href="#4-一般约束" class="headerlink" title="4 一般约束"></a>4 一般约束</h1><h2 id="4-1（官）顶级App组件和布局组件中的样式可以是全局的，但是其它所有组件都应该是有作用域的"><a href="#4-1（官）顶级App组件和布局组件中的样式可以是全局的，但是其它所有组件都应该是有作用域的" class="headerlink" title="4.1（官）顶级App组件和布局组件中的样式可以是全局的，但是其它所有组件都应该是有作用域的"></a>4.1（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E4%B8%BA%E7%BB%84%E4%BB%B6%E6%A0%B7%E5%BC%8F%E8%AE%BE%E7%BD%AE%E4%BD%9C%E7%94%A8%E5%9F%9F-%E5%BF%85%E8%A6%81">顶级App组件和布局组件中的样式可以是全局的，但是其它所有组件都应该是有作用域的</a></h2><p>这条规则只和单文件组件有关。不一定要使用 scoped 特性。设置作用域也可以通过 CSS Modules，那是一个基于 class 的类似 BEM 的策略，当然也可以使用其它的库或约定。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;btn btn-close&quot;</span>&gt;X&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;style&gt;</span><br><span class="line">.btn-close &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;button button-close&quot;</span>&gt;X&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 使用 <span class="string">`scoped`</span> 特性 --&gt;</span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">.button &#123;</span><br><span class="line">  border: none;</span><br><span class="line">  border-radius: <span class="number">2</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.button-close &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button :<span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;[$style.button, $style.buttonClose]&quot;</span>&gt;X&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 使用 CSS Modules --&gt;</span><br><span class="line">&lt;style <span class="built_in">module</span>&gt;</span><br><span class="line">.button &#123;</span><br><span class="line">  border: none;</span><br><span class="line">  border-radius: <span class="number">2</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.buttonClose &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;c-Button c-Button--close&quot;</span>&gt;X&lt;/button&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- 使用 BEM 约定 --&gt;</span><br><span class="line">&lt;style&gt;</span><br><span class="line">.c-Button &#123;</span><br><span class="line">  border: none;</span><br><span class="line">  border-radius: <span class="number">2</span>px;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line">.c-Button--close &#123;</span><br><span class="line">  background-color: red;</span><br><span class="line">&#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-2（官）始终为插件、混入等不考虑作为对外公共API的自定义私有属性使用-前缀。并附带一个命名空间以回避和其它作者的冲突"><a href="#4-2（官）始终为插件、混入等不考虑作为对外公共API的自定义私有属性使用-前缀。并附带一个命名空间以回避和其它作者的冲突" class="headerlink" title="4.2（官）始终为插件、混入等不考虑作为对外公共API的自定义私有属性使用 $_ 前缀。并附带一个命名空间以回避和其它作者的冲突"></a>4.2（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E7%A7%81%E6%9C%89%E5%B1%9E%E6%80%A7%E5%90%8D-%E5%BF%85%E8%A6%81">始终为插件、混入等不考虑作为对外公共API的自定义私有属性使用 $_ 前缀。并附带一个命名空间以回避和其它作者的冲突</a></h2><p>Vue 使用 _前缀来定义其自身的私有属性，所以使用相同的前缀 (比如_update) 有覆写实例属性的风险。即便检查确认 Vue 当前版本没有用到这个属性名，也不能保证和将来的版本没有冲突。</p>
<p>对于 $ 前缀来说，其在 Vue 生态系统中的目的是暴露给用户的一个特殊的实例属性，所以把它用于私有属性并不合适。</p>
<p>不过，推荐把这两个前缀结合为 $_，作为一个用户定义的私有属性的约定，以确保不会和 Vue 自身相冲突。。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myGreatMixin = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    update: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myGreatMixin = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    _update: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myGreatMixin = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    $update: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> myGreatMixin = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    $_myGreatMixin_update: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 甚至更好！</span></span><br><span class="line"><span class="keyword">var</span> myGreatMixin = &#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  methods: &#123;</span><br><span class="line">    <span class="function"><span class="title">publicMethod</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="comment">// ...</span></span><br><span class="line">      myPrivateFunction()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">myPrivateFunction</span>(<span class="params"></span>) </span>&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">&#125;</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> myGreatMixin</span><br></pre></td></tr></table></figure>

<h2 id="4-3（官）在单文件组件、字符串模板和JSX中没有内容的组件应该是自闭合的——但在-DOM-模板里永远不要这样做"><a href="#4-3（官）在单文件组件、字符串模板和JSX中没有内容的组件应该是自闭合的——但在-DOM-模板里永远不要这样做" class="headerlink" title="4.3（官）在单文件组件、字符串模板和JSX中没有内容的组件应该是自闭合的——但在 DOM 模板里永远不要这样做"></a>4.3（官）在<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/render-function.html#JSX">单文件组件、字符串模板和JSX中没有内容的组件应该是自闭合的——但在 DOM 模板里永远不要这样做</a></h2><p>自闭合组件表示它们不仅没有内容，而且刻意没有内容。其不同之处就好像书上的一页白纸对比贴有&quot;本页有意留白&quot;标签的白纸。而且没有了额外的闭合标签，代码也更简洁。</p>
<p>不幸的是，HTML 并不支持自闭合的自定义元素——只有<a target="_blank" rel="noopener" href="https://www.w3.org/TR/html/syntax.html#void-elements">官方的&quot;空&quot;元素</a>。所以上述策略仅适用于进入 DOM 之前 Vue 的模板编译器能够触达的地方，然后再产出符合 DOM 规范的 HTML。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在单文件组件、字符串模板和 JSX 中 --&gt;</span><br><span class="line">&lt;MyComponent&gt;&lt;/MyComponent&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在 DOM 模板中 --&gt;</span><br><span class="line">&lt;my-component/&gt;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在单文件组件、字符串模板和 JSX 中 --&gt;</span><br><span class="line">&lt;MyComponent/&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在 DOM 模板中 --&gt;</span><br><span class="line">&lt;my-component&gt;&lt;/my-component&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-4（官）组件的data必须是一个函数"><a href="#4-4（官）组件的data必须是一个函数" class="headerlink" title="4.4（官）组件的data必须是一个函数"></a>4.4（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E7%BB%84%E4%BB%B6%E6%95%B0%E6%8D%AE-%E5%BF%85%E8%A6%81">组件的data必须是一个函数</a></h2><p>当在组件中使用 data 属性的时候 (除了 new Vue 外的任何地方)，它的值必须是返回一个对象的函数。</p>
<p>当 data 的值是一个对象时，它会在这个组件的所有实例之间共享。若希望每个组件实例都管理其自己的数据。为了做到这一点，每个实例必须生成一个独立的数据对象。在 JavaScript 中，在一个函数中返回这个对象就可以了。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;some-comp&#x27;</span>, &#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    foo: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    foo: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;some-comp&#x27;</span>, &#123;</span><br><span class="line">  data: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      foo: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// In a .vue file 尽量使用简写</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data () &#123;</span><br><span class="line">    <span class="comment">// 可以在这里写很多的前置数据操作</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="keyword">return</span> &#123;</span><br><span class="line">      foo: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 在一个 Vue 的根实例上直接使用对象是可以的，</span></span><br><span class="line"><span class="comment">// 因为只存在一个这样的实例。</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    foo: <span class="string">&#x27;bar&#x27;</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="4-5（官）Prop定义要详细：类型、必填、验证"><a href="#4-5（官）Prop定义要详细：类型、必填、验证" class="headerlink" title="4.5（官）Prop定义要详细：类型、必填、验证"></a>4.5（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#Prop-%E5%AE%9A%E4%B9%89-%E5%BF%85%E8%A6%81">Prop定义要详细：类型、必填<del>、验证</del></a></h2><p>细致的 <a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-props.html#Prop-%E9%AA%8C%E8%AF%81">prop</a>定义有两个好处：</p>
<ul>
<li>它们写明了组件的 API，所以很容易看懂组件的用法；</li>
<li>在开发环境下，如果向一个组件提供格式不正确的 prop，Vue 将会告警，以帮助你捕获潜在的错误来源。</li>
</ul>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#123;</span><br><span class="line">  props: [<span class="string">&#x27;status&#x27;</span>]</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(&#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    status: &#123;</span><br><span class="line">      type: <span class="built_in">String</span>,</span><br><span class="line">      required: <span class="literal">true</span>,</span><br><span class="line">      validator: <span class="function">(<span class="params">value</span>) =&gt;</span> [<span class="string">&#x27;syncing&#x27;</span>, <span class="string">&#x27;synced&#x27;</span>, <span class="string">&#x27;error&#x27;</span>].includes(value);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="4-6（官）尽量使用指令缩写，而且要么都用要么都不用"><a href="#4-6（官）尽量使用指令缩写，而且要么都用要么都不用" class="headerlink" title="4.6（官）尽量使用指令缩写，而且要么都用要么都不用"></a>4.6（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E6%8C%87%E4%BB%A4%E7%BC%A9%E5%86%99-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">尽量使用指令缩写，而且要么都用要么都不用</a></h2><p>用 : 表示 v-bind: 、用 @ 表示 v-on: 和用 # 表示 v-slot。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  v-bind:value=<span class="string">&quot;newTodoText&quot;</span></span><br><span class="line">  :placeholder=<span class="string">&quot;newTodoInstructions&quot;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  v-on:input=<span class="string">&quot;onInput&quot;</span></span><br><span class="line">  @focus=<span class="string">&quot;onFocus&quot;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-slot:header&gt;</span><br><span class="line">  &lt;h1&gt;Here might be a page title&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template #footer&gt;</span><br><span class="line">  &lt;p&gt;Here<span class="string">&#x27;s some contact info&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  :value=<span class="string">&quot;newTodoText&quot;</span></span><br><span class="line">  :placeholder=<span class="string">&quot;newTodoInstructions&quot;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  v-bind:value=<span class="string">&quot;newTodoText&quot;</span></span><br><span class="line">  v-bind:placeholder=<span class="string">&quot;newTodoInstructions&quot;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  @input=<span class="string">&quot;onInput&quot;</span></span><br><span class="line">  @focus=<span class="string">&quot;onFocus&quot;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;input</span><br><span class="line">  v-on:input=<span class="string">&quot;onInput&quot;</span></span><br><span class="line">  v-on:focus=<span class="string">&quot;onFocus&quot;</span></span><br><span class="line">&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template v-slot:header&gt;</span><br><span class="line">  &lt;h1&gt;Here might be a page title&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template v-slot:footer&gt;</span><br><span class="line">  &lt;p&gt;Here<span class="string">&#x27;s some contact info&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line">&lt;template #header&gt;</span><br><span class="line">  &lt;h1&gt;Here might be a page title&lt;/h1&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;template #footer&gt;</span><br><span class="line">  &lt;p&gt;Here<span class="string">&#x27;s some contact info&lt;/p&gt;</span></span><br><span class="line"><span class="string">&lt;/template&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="4-7（官）应该优先通过Vuex管理全局状态，而不是通过-this-root-或一个全局事件总线"><a href="#4-7（官）应该优先通过Vuex管理全局状态，而不是通过-this-root-或一个全局事件总线" class="headerlink" title="4.7（官）应该优先通过Vuex管理全局状态，而不是通过 this.$root 或一个全局事件总线"></a>4.7（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E9%9D%9E-Flux-%E7%9A%84%E5%85%A8%E5%B1%80%E7%8A%B6%E6%80%81%E7%AE%A1%E7%90%86-%E8%B0%A8%E6%85%8E%E4%BD%BF%E7%94%A8">应该优先通过Vuex管理全局状态，而不是通过 this.$root 或一个全局事件总线</a></h2><p>通过 this.$root和/或<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/migration.html#dispatch-%E5%92%8C-broadcast-%E6%9B%BF%E6%8D%A2">全局事件总线</a>管理状态在很多简单的情况下都是很方便的，但是并不适用于绝大多数的应用。Vuex 提供的不仅是一个管理状态的中心区域，还是组织、追踪和调试状态变更的好工具。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// main.js</span></span><br><span class="line"><span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  data: &#123;</span><br><span class="line">    todos: []</span><br><span class="line">  &#125;,</span><br><span class="line">  created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="built_in">this</span>.$on(<span class="string">&#x27;remove-todo&#x27;</span>, <span class="built_in">this</span>.removeTodo)</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    removeTodo: <span class="function"><span class="keyword">function</span> (<span class="params">todo</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">var</span> todoIdToRemove = todo.id</span><br><span class="line">      <span class="built_in">this</span>.todos = <span class="built_in">this</span>.todos.filter(<span class="function"><span class="keyword">function</span> (<span class="params">todo</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> todo.id !== todoIdToRemove</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// store/modules/todos.js</span></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  state: &#123;</span><br><span class="line">    list: []</span><br><span class="line">  &#125;,</span><br><span class="line">  mutations: &#123;</span><br><span class="line">    REMOVE_TODO (state, todoId) &#123;</span><br><span class="line">      state.list = state.list.filter(<span class="function"><span class="params">todo</span> =&gt;</span> todo.id !== todoId)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  actions: &#123;</span><br><span class="line">    removeTodo (&#123; commit, state &#125;, todo) &#123;</span><br><span class="line">      commit(<span class="string">&#x27;REMOVE_TODO&#x27;</span>, todo.id)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- TodoItem.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;span&gt;</span><br><span class="line">    &#123;&#123; todo.text &#125;&#125;</span><br><span class="line">    &lt;button @click=<span class="string">&quot;removeTodo(todo)&quot;</span>&gt;</span><br><span class="line">      X</span><br><span class="line">    &lt;/button&gt;</span><br><span class="line">  &lt;/span&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">import</span> &#123; mapActions &#125; <span class="keyword">from</span> <span class="string">&#x27;vuex&#x27;</span></span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    todo: &#123;</span><br><span class="line">      type: <span class="built_in">Object</span>,</span><br><span class="line">      required: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: mapActions([<span class="string">&#x27;removeTodo&#x27;</span>])</span><br><span class="line">&#125;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-8（官）简单逻辑可在模板中使用表达式，中等逻辑操作使用computed-，复杂或需调用异步方法时使用watch"><a href="#4-8（官）简单逻辑可在模板中使用表达式，中等逻辑操作使用computed-，复杂或需调用异步方法时使用watch" class="headerlink" title="4.8（官）简单逻辑可在模板中使用表达式，中等逻辑操作使用computed ，复杂或需调用异步方法时使用watch"></a>4.8（官）简单逻辑可在模板中使用表达式，中等逻辑操作使用computed ，复杂或需调用异步方法时使用watch</h2><p>模板内的表达式非常便利，但是设计它们的初衷是用于简单运算的。在模板中放入太多的逻辑会让模板过重且难以维护。例如：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;example&quot;</span>&gt;</span><br><span class="line">  &#123;&#123; message.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>) &#125;&#125;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<p>在这个地方，模板不再是简单的声明式逻辑。你必须看一段时间才能意识到，这里是想要显示变量message的翻转字符串。当你想要在模板中多次引用此处的翻转字符串时，就会更加难以处理。所以，对于任何复杂逻辑，你都应当使用计算属性。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line">&lt;div id=<span class="string">&quot;example&quot;</span>&gt;</span><br><span class="line">  &lt;p&gt;Original message: <span class="string">&quot;&#123;&#123; message &#125;&#125;&quot;</span>&lt;/p&gt;</span><br><span class="line">  &lt;p&gt;Computed reversed message: <span class="string">&quot;&#123;&#123; reversedMessage &#125;&#125;&quot;</span>&lt;/p&gt;</span><br><span class="line">&lt;/div&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">var</span> vm = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#example&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    message: <span class="string">&#x27;Hello&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  computed: &#123;</span><br><span class="line">    <span class="comment">// 计算属性的 getter</span></span><br><span class="line">    reversedMessage: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="comment">// `this` 指向 vm 实例</span></span><br><span class="line">      <span class="keyword">return</span> <span class="built_in">this</span>.message.split(<span class="string">&#x27;&#x27;</span>).reverse().join(<span class="string">&#x27;&#x27;</span>)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>虽然计算属性在大多数情况下更合适，但有时也需要一个自定义的侦听器。这就是为什么 Vue 通过watch选项提供了一个更通用的方法，来响应数据的变化。当需要在数据变化时执行异步或开销较大的操作时，这个方式是最有用的。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br></pre></td><td class="code"><pre><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">var</span> watchExampleVM = <span class="keyword">new</span> Vue(&#123;</span><br><span class="line">  el: <span class="string">&#x27;#watch-example&#x27;</span>,</span><br><span class="line">  data: &#123;</span><br><span class="line">    question: <span class="string">&#x27;&#x27;</span>,</span><br><span class="line">    answer: <span class="string">&#x27;I cannot give you an answer until you ask a question!&#x27;</span></span><br><span class="line">  &#125;,</span><br><span class="line">  watch: &#123;</span><br><span class="line">    <span class="comment">// 如果 `question` 发生改变，这个函数就会运行</span></span><br><span class="line">    question: <span class="function"><span class="keyword">function</span> (<span class="params">newQuestion, oldQuestion</span>) </span>&#123;</span><br><span class="line">      <span class="built_in">this</span>.answer = <span class="string">&#x27;Waiting for you to stop typing...&#x27;</span><span class="built_in">this</span>.debouncedGetAnswer()</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  created: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="comment">// `_.debounce` 是一个通过 Lodash 限制操作频率的函数。// 在这个例子中，我们希望限制访问 yesno.wtf/api 的频率// AJAX 请求直到用户输入完毕才会发出。想要了解更多关于// `_.debounce` 函数 (及其近亲 `_.throttle`) 的知识，// 请参考：https://lodash.com/docs#debouncethis.debouncedGetAnswer = _.debounce(this.getAnswer, 500)</span></span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    getAnswer: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">      <span class="keyword">if</span> (<span class="built_in">this</span>.question.indexOf(<span class="string">&#x27;?&#x27;</span>) === -<span class="number">1</span>) &#123;</span><br><span class="line">        <span class="built_in">this</span>.answer = <span class="string">&#x27;Questions usually contain a question mark. ;-)&#x27;</span><span class="keyword">return</span></span><br><span class="line">      &#125;</span><br><span class="line">      <span class="built_in">this</span>.answer = <span class="string">&#x27;Thinking...&#x27;</span><span class="keyword">var</span> vm = <span class="built_in">this</span></span><br><span class="line">      axios.get(<span class="string">&#x27;https://yesno.wtf/api&#x27;</span>)</span><br><span class="line">        .then(<span class="function"><span class="keyword">function</span> (<span class="params">response</span>) </span>&#123;</span><br><span class="line">          vm.answer = _.capitalize(response.data.answer)</span><br><span class="line">        &#125;)</span><br><span class="line">        .catch(<span class="function"><span class="keyword">function</span> (<span class="params">error</span>) </span>&#123;</span><br><span class="line">          vm.answer = <span class="string">&#x27;Error! Could not reach the API. &#x27;</span> + error</span><br><span class="line">        &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;</span><br><span class="line">&#125;)</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="4-9-生命周期函数调用规则"><a href="#4-9-生命周期函数调用规则" class="headerlink" title="4.9 生命周期函数调用规则"></a>4.9 生命周期函数调用规则</h2><img src="/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/lifecycle.png" class="">

<h1 id="5-编程思想"><a href="#5-编程思想" class="headerlink" title="5 编程思想"></a>5 编程思想</h1><h2 id="5-1（官）组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法"><a href="#5-1（官）组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法" class="headerlink" title="5.1（官）组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法"></a>5.1（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E7%B4%A7%E5%AF%86%E8%80%A6%E5%90%88%E7%9A%84%E7%BB%84%E4%BB%B6%E5%90%8D-%E5%BC%BA%E7%83%88%E6%8E%A8%E8%8D%90">组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法</a></h2><p>复杂表达式会让模板变得不那么声明式。应该尽量描述应该出现的是什么，而非如何计算那个值。而且<strong>计算属性和方法使得代码可以重用</strong>。<br>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&#123;&#123;</span><br><span class="line">  fullName.split(<span class="string">&#x27; &#x27;</span>).map(<span class="function"><span class="keyword">function</span> (<span class="params">word</span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> word[<span class="number">0</span>].toUpperCase() + word.slice(<span class="number">1</span>)</span><br><span class="line">  &#125;).join(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">&#125;&#125;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 在模板中 --&gt;</span><br><span class="line">&#123;&#123; normalizedFullName &#125;&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// 复杂表达式已经移入一个计算属性</span></span><br><span class="line">computed: &#123;</span><br><span class="line">  normalizedFullName: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.fullName.split(<span class="string">&#x27; &#x27;</span>).map(<span class="function"><span class="keyword">function</span> (<span class="params">word</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> word[<span class="number">0</span>].toUpperCase() + word.slice(<span class="number">1</span>)</span><br><span class="line">    &#125;).join(<span class="string">&#x27; &#x27;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="5-2（官）应该优先通过prop和事件进行父子组件之间的通信，而不是-this-parent-或改变-prop"><a href="#5-2（官）应该优先通过prop和事件进行父子组件之间的通信，而不是-this-parent-或改变-prop" class="headerlink" title="5.2（官）应该优先通过prop和事件进行父子组件之间的通信，而不是 this.$parent 或改变 prop"></a>5.2（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E9%9A%90%E6%80%A7%E7%9A%84%E7%88%B6%E5%AD%90%E7%BB%84%E4%BB%B6%E9%80%9A%E4%BF%A1-%E8%B0%A8%E6%85%8E%E4%BD%BF%E7%94%A8">应该优先通过prop和事件进行父子组件之间的通信，而不是 this.$parent 或改变 prop</a></h2><p>一个理想的 Vue 应用是 prop 向下传递，事件向上传递的。遵循这一约定会让组件更易于理解。访问组件之外的上下文违反了<a target="_blank" rel="noopener" href="https://github.com/pablohpsilva/vuejs-component-style-guide/blob/master/README-CN.md#%E5%9F%BA%E4%BA%8E%E6%A8%A1%E5%9D%97%E5%BC%80%E5%8F%91">基于模块开发</a>的<a target="_blank" rel="noopener" href="https://addyosmani.com/first/">第一原则</a>。因此<strong>应该尽量避免使用 this.$parent</strong>。</p>
<ul>
<li>组件必须相互保持独立，Vue 组件也是。如果组件需要访问其父层的上下文就违反了该原则。</li>
<li>如果一个组件需要访问其父组件的上下文，那么该组件将不能在其它上下文中复用。</li>
</ul>
<p>在有些情况下，可能需要对一个 prop 进行&quot;双向绑定&quot;。不幸的是，真正的双向绑定会带来维护上的问题，因为子组件可以修改父组件，且在父组件和子组件都没有明显的改动来源，推荐以 update:myPropName 的模式触发事件取而代之。<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6">在子组件中通过</a><a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/guide/components-custom-events.html#sync-%E4%BF%AE%E9%A5%B0%E7%AC%A6">.sync/emit</a>模式来改变父组件传入的Props的值。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line">Vue.component(<span class="string">&#x27;TodoItem&#x27;</span>, &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    todo: &#123;</span><br><span class="line">      type: <span class="built_in">Object</span>,</span><br><span class="line">      required: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">    removeTodo () &#123;</span><br><span class="line">      <span class="keyword">var</span> vm = <span class="built_in">this</span>;</span><br><span class="line">      vm.$parent.todos = vm.$parent.todos.filter(<span class="function"><span class="keyword">function</span> (<span class="params">todo</span>) </span>&#123;</span><br><span class="line">        <span class="keyword">return</span> todo.id !== vm.todo.id</span><br><span class="line">      &#125;)</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;span&gt;</span></span><br><span class="line"><span class="string">          &#123;&#123; todo.text &#125;&#125;</span></span><br><span class="line"><span class="string">          &lt;button @click=&quot;removeTodo&quot;&gt;</span></span><br><span class="line"><span class="string">              X</span></span><br><span class="line"><span class="string">          &lt;/button&gt;</span></span><br><span class="line"><span class="string">      &lt;/span&gt;  `</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// parent template</span></span><br><span class="line">&lt;todo-item :todo.sync=<span class="string">&quot;todoObj&quot;</span>&gt;</span><br><span class="line"></span><br><span class="line"><span class="comment">// child</span></span><br><span class="line">Vue.component(<span class="string">&#x27;TodoItem&#x27;</span>, &#123;</span><br><span class="line">  props: &#123;</span><br><span class="line">    todo: &#123;</span><br><span class="line">      type: <span class="built_in">Object</span>,</span><br><span class="line">      required: <span class="literal">true</span></span><br><span class="line">    &#125;</span><br><span class="line">  &#125;,</span><br><span class="line">  methods: &#123;</span><br><span class="line">      removeTodo: <span class="function">(<span class="params">newFoo</span>) =&gt;</span> &#123;</span><br><span class="line">          <span class="built_in">this</span>.$emit(<span class="string">&#x27;update:todo&#x27;</span>, newTodoObj);</span><br><span class="line">      &#125;  </span><br><span class="line">  &#125;，</span><br><span class="line">  template: <span class="string">`</span></span><br><span class="line"><span class="string">      &lt;span&gt;</span></span><br><span class="line"><span class="string">          &#123;&#123; todo.text &#125;&#125;</span></span><br><span class="line"><span class="string">          &lt;button @click=&quot;removeTodo&quot;&gt;</span></span><br><span class="line"><span class="string">              X</span></span><br><span class="line"><span class="string">          &lt;/button&gt;</span></span><br><span class="line"><span class="string">      &lt;/span&gt;  `</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<h2 id="5-3-谨慎使用-this-refs"><a href="#5-3-谨慎使用-this-refs" class="headerlink" title="5.3 谨慎使用 this.$refs"></a>5.3 谨慎使用 this.$refs</h2><p>Vue.js 支持通过 ref 属性来访问其它组件和 HTML 元素。并通过 this.$refs 可以得到组件或 HTML 元素的上下文。在大多数情况下，通过 this.$refs来访问其它组件的上下文是可以避免的。在使用的的时候你需要注意避免调用了不恰当的组件 API，所以应该<strong>尽量避免使用 this.$refs</strong>。</p>
<ul>
<li>当遇到 props 和 events 难以实现的功能时，通过 this.$refs来实现。</li>
<li>当需要操作 DOM 无法通过指令来做的时候可使用 this.$ref 而不是 JQuery、document.getElement*、document.queryElement。</li>
</ul>
<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 推荐，并未使用 <span class="built_in">this</span>.$refs --&gt;</span><br><span class="line">&lt;range</span><br><span class="line">  :max=<span class="string">&quot;max&quot;</span></span><br><span class="line">  :min=<span class="string">&quot;min&quot;</span></span><br><span class="line">  @current-value=<span class="string">&quot;currentValue&quot;</span></span><br><span class="line">  :step=<span class="string">&quot;1&quot;</span></span><br><span class="line">&gt;</span><br><span class="line">&lt;/range&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- 使用 <span class="built_in">this</span>.$refs 的适用情况--&gt;</span><br><span class="line">&lt;modal ref=<span class="string">&quot;basicModal&quot;</span>&gt;</span><br><span class="line">  &lt;h4&gt;Basic Modal&lt;/h4&gt;</span><br><span class="line">  &lt;button <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;primary&quot;</span></span><br><span class="line">    @click=<span class="string">&quot;$refs.basicModal.hide()&quot;</span></span><br><span class="line">    &gt;Close</span><br><span class="line">  &lt;/button&gt;</span><br><span class="line">&lt;/modal&gt;</span><br><span class="line">&lt;button</span><br><span class="line">  @click=<span class="string">&quot;$refs.basicModal.open()&quot;</span></span><br><span class="line">  &gt;Open modal</span><br><span class="line">&lt;/button&gt;</span><br><span class="line"></span><br><span class="line">&lt;!-- Modal component --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div v-show=<span class="string">&quot;active&quot;</span>&gt;</span><br><span class="line">    &lt;!-- ... --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;  </span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// ...</span></span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;</span><br><span class="line">        active: <span class="literal">false</span>,</span><br><span class="line">      &#125;;</span><br><span class="line">    &#125;,</span><br><span class="line">    methods: &#123;</span><br><span class="line">      <span class="function"><span class="title">open</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.active = <span class="literal">true</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">      <span class="function"><span class="title">hide</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">        <span class="built_in">this</span>.active = <span class="literal">false</span>;</span><br><span class="line">      &#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// ...  </span></span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-4-按照一定的结构顺序来组织组件"><a href="#5-4-按照一定的结构顺序来组织组件" class="headerlink" title="5.4 按照一定的结构顺序来组织组件"></a>5.4 按照一定的结构顺序来组织组件</h2><ul>
<li>导出一个清晰、组织有序的组件，使得代码易于阅读和理解。同时也便于标准化。</li>
<li>按首字母排序 properties、data、computed、watches 和 methods 使得这些对象内的属性便于查找。</li>
<li>合理组织，使得组件易于阅读。（name; extends; props, data 和 computed; components; watch 和 methods; lifecycle methods 等）。</li>
<li>使用 name 属性。借助于 <a target="_blank" rel="noopener" href="https://chrome.google.com/webstore/detail/vuejs-devtools/nhdogjmejiglipccpnnnanhbledajbpd?hl=en">vue devtools</a> 可以让你更方便的测试。</li>
<li>合理的 CSS 结构，如 <a target="_blank" rel="noopener" href="https://medium.com/tldr-tech/bem-blocks-elements-and-modifiers-6b3b0af9e3ea#.bhnomd7gw">BEM</a>。</li>
<li>使用单文件 .vue 文件格式来组件代码。</li>
</ul>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br><span class="line">24</span><br><span class="line">25</span><br><span class="line">26</span><br><span class="line">27</span><br><span class="line">28</span><br><span class="line">29</span><br><span class="line">30</span><br><span class="line">31</span><br><span class="line">32</span><br><span class="line">33</span><br><span class="line">34</span><br><span class="line">35</span><br><span class="line">36</span><br><span class="line">37</span><br><span class="line">38</span><br><span class="line">39</span><br><span class="line">40</span><br><span class="line">41</span><br><span class="line">42</span><br><span class="line">43</span><br><span class="line">44</span><br><span class="line">45</span><br><span class="line">46</span><br></pre></td><td class="code"><pre><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div <span class="class"><span class="keyword">class</span></span>=<span class="string">&quot;Ranger__Wrapper&quot;</span>&gt;</span><br><span class="line">    &lt;!-- ... --&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line">  <span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">    <span class="comment">// 不要忘记 name 属性</span></span><br><span class="line">    name: <span class="string">&#x27;RangeSlider&#x27;</span>,</span><br><span class="line">    <span class="comment">// 使用组件 mixins 共享通用功能</span></span><br><span class="line">    mixins: [],</span><br><span class="line">    <span class="comment">// 使用其它组件</span></span><br><span class="line">    components: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 组成新的组件</span></span><br><span class="line">    <span class="keyword">extends</span>: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 指令</span></span><br><span class="line">    directives: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 组件属性、变量</span></span><br><span class="line">    props: &#123;</span><br><span class="line">      bar: &#123;&#125;, <span class="comment">// 按字母顺序</span></span><br><span class="line">      foo: &#123;&#125;,</span><br><span class="line">      fooBar: &#123;&#125;,</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 变量</span></span><br><span class="line">    <span class="function"><span class="title">data</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">      <span class="keyword">return</span> &#123;&#125;</span><br><span class="line">    &#125;,</span><br><span class="line">    <span class="comment">// 方法</span></span><br><span class="line">    computed: &#123;&#125;,</span><br><span class="line">    watch: &#123;&#125;,</span><br><span class="line">    methods: &#123;&#125;,</span><br><span class="line">    <span class="comment">// 生命周期函数（按顺序）</span></span><br><span class="line">    ...</span><br><span class="line">    <span class="function"><span class="title">beforeCreate</span>(<span class="params"></span>)</span> &#123;&#125;,</span><br><span class="line">    created () &#123;&#125;,</span><br><span class="line">    <span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;&#125;</span><br><span class="line">    ...</span><br><span class="line">  &#125;;</span><br><span class="line">&lt;/script&gt;</span><br><span class="line"></span><br><span class="line">&lt;style scoped&gt;</span><br><span class="line">  .Ranger__Wrapper &#123;</span><br><span class="line">   &lt;!-- ... --&gt;</span><br><span class="line">  &#125;</span><br><span class="line">&lt;/style&gt;</span><br></pre></td></tr></table></figure>

<h2 id="5-5-接口调用流程"><a href="#5-5-接口调用流程" class="headerlink" title="5.5 接口调用流程"></a>5.5 接口调用流程</h2><p>未使用状态管理时：</p>
<ol>
<li>在services文件夹下按模块添加方法，该方法包括调用接口以及返回数据的处理。（方便复用）</li>
<li>在单文件组件中调用上述方法。</li>
</ol>
<p>使用状态管理时：</p>
<ol>
<li>在services文件夹下按模块添加方法，该方法包括调用接口以及返回数据的处理。（方便复用）</li>
<li>在store的actions中调用上述方法，commit到mutation，mutation改变state的值。</li>
<li>在单文件组件中调用actions中的方法。</li>
</ol>
<h2 id="5-6-每个分类都只有一个入口（如：router、store、plugins等分类下）"><a href="#5-6-每个分类都只有一个入口（如：router、store、plugins等分类下）" class="headerlink" title="5.6 每个分类都只有一个入口（如：router、store、plugins等分类下）"></a>5.6 每个分类都只有一个入口（如：router、store、plugins等分类下）</h2><p>即每个文件夹下都会有一个index.js/ts, 目的是对外隔离，当引入该分类下的文件时，不用按每个JS模块路径引入，否则调整单个模块位置需要修改依赖它的所有模块。</p>
<h2 id="5-7-每个分类内部模块互相引用时，使用相对路径-分类之间模块引用时，使用绝对路径"><a href="#5-7-每个分类内部模块互相引用时，使用相对路径-分类之间模块引用时，使用绝对路径" class="headerlink" title="5.7 每个分类内部模块互相引用时，使用相对路径; 分类之间模块引用时，使用绝对路径"></a>5.7 每个分类内部模块互相引用时，使用相对路径; 分类之间模块引用时，使用绝对路径</h2><p>相对路径目的是对外隔离，不和分类外的路径产生关系，同时方便分类复用。<br>如 plugins 文件夹下的 index 文件。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">// Element</span></span><br><span class="line"><span class="keyword">import</span> <span class="string">&#x27;./element&#x27;</span>;</span><br></pre></td></tr></table></figure>

<p>绝对路径目的是从语义上区分模块是否是同一分类，分类路径发生改变时一次性全局替换。如在 main.js 中引入 plugins。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> <span class="string">&#x27;@/plugins&#x27;</span>; <span class="comment">// 按需引入插件</span></span><br></pre></td></tr></table></figure>

<p>vue组件、assets等其它各模块的引用路径，类似如下，用&quot;@&quot;直接引用src目录下的，而不是使用相对路径。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> AjaxTree <span class="keyword">from</span> <span class="string">&#x27;@/components/tree/ajax-tree&#x27;</span></span><br><span class="line"><span class="keyword">import</span> VmTable <span class="keyword">from</span> <span class="string">&#x27;@/components/table/vm-table&#x27;</span></span><br></pre></td></tr></table></figure>

<p>css的文件引用路径如下，用&quot;~@&quot;替换之前的&quot;../../&quot;：</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">style</span> <span class="attr">lang</span>=<span class="string">&quot;scss&quot;</span>&gt;</span></span><br><span class="line"><span class="css"><span class="keyword">@import</span> <span class="string">&#x27;~@/assets/styles/common.scss&#x27;</span>;</span></span><br><span class="line"><span class="css"><span class="keyword">@import</span> <span class="string">&#x27;~@/assets/styles/table.scss&#x27;</span>;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">style</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="5-8-组件封装"><a href="#5-8-组件封装" class="headerlink" title="5.8 组件封装"></a>5.8 组件封装</h2><p>组件分为dumb component（普通组件，一般是components里的一个单文件组件） 和 smart component（容器组件，一般是views里的一个单文件组件）两种。</p>
<p>普通组件尽量只通过 props 接收容器组件传来的数据，向父组件派发消息，而不做其它任何主动调取数据等工作。</p>
<h1 id="6-性能优化"><a href="#6-性能优化" class="headerlink" title="6 性能优化"></a>6 性能优化</h1><h2 id="6-1（官）总是用key配合-v-for-性能优化2"><a href="#6-1（官）总是用key配合-v-for-性能优化2" class="headerlink" title="6.1（官）总是用key配合 v-for (性能优化2)"></a>6.1（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E4%B8%BA-v-for-%E8%AE%BE%E7%BD%AE%E9%94%AE%E5%80%BC-%E5%BF%85%E8%A6%81">总是用key配合 v-for</a> (性能优化2)</h2><p>在组件上总是必须用 key 配合 v-for，以便维护内部组件及其子树的状态。 <strong>同时，Key不要为index，尽量是一个唯一值</strong>，因为数据发生变化时，index可能不变。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li v-<span class="keyword">for</span>=<span class="string">&quot;todo in todos&quot;</span>&gt;</span><br><span class="line">    &#123;&#123; todo.text &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li</span><br><span class="line">    v-<span class="keyword">for</span>=<span class="string">&quot;todo in todos&quot;</span></span><br><span class="line">    :key=<span class="string">&quot;todo.id&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    &#123;&#123; todo.text &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-2（官）永远不要把v-if-和-v-for-同时用在同一个元素上-性能优化3"><a href="#6-2（官）永远不要把v-if-和-v-for-同时用在同一个元素上-性能优化3" class="headerlink" title="6.2（官）永远不要把v-if 和 v-for 同时用在同一个元素上 (性能优化3)"></a>6.2（官）<a target="_blank" rel="noopener" href="https://cn.vuejs.org/v2/style-guide/#%E9%81%BF%E5%85%8D-v-if-%E5%92%8C-v-for-%E7%94%A8%E5%9C%A8%E4%B8%80%E8%B5%B7-%E5%BF%85%E8%A6%81">永远不要把v-if 和 v-for 同时用在同一个元素上</a> (性能优化3)</h2><p>一般在两种常见的情况下会倾向于这样做： 为了过滤一个列表中的项目 (比如 v-for=&quot;user in users&quot; v-if=&quot;user.isActive&quot;)。在这种情形下，请将 users 替换为一个计算属性 (比如 activeUsers)，让其返回过滤后的列表。会获得如下好处：</p>
<ul>
<li>过滤后的列表只会在 users 数组发生相关变化时才被重新运算，过滤更高效。</li>
<li>使用 v-for=&quot;user in activeUsers&quot; 之后，在渲染的时候只遍历活跃用户，渲染更高效。</li>
<li>解耦渲染层的逻辑，可维护性 (对逻辑的更改和扩展) 更强。</li>
</ul>
<p>为了避免渲染本应该被隐藏的列表 (比如 v-for=&quot;user in users&quot; v-if=&quot;shouldShowUsers&quot;)。这种情形下，请将 v-if 移动至容器元素上 (比如 ul, ol)。</p>
<ul>
<li>通过将 v-if 移动到容器元素，不会再对列表中的每个用户检查 shouldShowUsers。取而代之的是，只检查它一次，且不会在 shouldShowUsers 为否的时候运算 v-for。</li>
</ul>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li</span><br><span class="line">    v-<span class="keyword">for</span>=<span class="string">&quot;user in users&quot;</span></span><br><span class="line">    v-<span class="keyword">if</span>=<span class="string">&quot;user.isActive&quot;</span></span><br><span class="line">    :key=<span class="string">&quot;user.id&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li</span><br><span class="line">    v-<span class="keyword">for</span>=<span class="string">&quot;user in users&quot;</span></span><br><span class="line">    v-<span class="keyword">if</span>=<span class="string">&quot;shouldShowUsers&quot;</span></span><br><span class="line">    :key=<span class="string">&quot;user.id&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul&gt;</span><br><span class="line">  &lt;li</span><br><span class="line">    v-<span class="keyword">for</span>=<span class="string">&quot;user in activeUsers&quot;</span></span><br><span class="line">    :key=<span class="string">&quot;user.id&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br><span class="line"></span><br><span class="line">computed: &#123;</span><br><span class="line">  activeUsers: <span class="function"><span class="keyword">function</span> (<span class="params"></span>) </span>&#123;</span><br><span class="line">    <span class="keyword">return</span> <span class="built_in">this</span>.users.filter(<span class="function"><span class="keyword">function</span> (<span class="params">user</span>) </span>&#123;</span><br><span class="line">      <span class="keyword">return</span> user.isActive</span><br><span class="line">    &#125;)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br></pre></td><td class="code"><pre><span class="line">&lt;ul v-<span class="keyword">if</span>=<span class="string">&quot;shouldShowUsers&quot;</span>&gt;</span><br><span class="line">  &lt;li</span><br><span class="line">    v-<span class="keyword">for</span>=<span class="string">&quot;user in users&quot;</span></span><br><span class="line">    :key=<span class="string">&quot;user.id&quot;</span></span><br><span class="line">  &gt;</span><br><span class="line">    &#123;&#123; user.name &#125;&#125;</span><br><span class="line">  &lt;/li&gt;</span><br><span class="line">&lt;/ul&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-3-组件销毁时及时清除事件监听、定时器等-性能优化4"><a href="#6-3-组件销毁时及时清除事件监听、定时器等-性能优化4" class="headerlink" title="6.3 组件销毁时及时清除事件监听、定时器等 (性能优化4)"></a>6.3 组件销毁时及时清除事件监听、定时器等 (性能优化4)</h2><p>一般在 created 或 mounted 生命周期函数中添加 <strong>事件总线和 window上的事件监听或定时器</strong>，在 beforeDestroy 或 destroyed 中，添加以上三类事件的移除方法。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$eventHub.$on(<span class="string">&#x27;logged-in&#x27;</span>, <span class="built_in">this</span>.getCurrentUser);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">beforeDestroy</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.$eventHub.$off(<span class="string">&#x27;logged-in&#x27;</span>);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="function"><span class="title">getCurrentUser</span>(<span class="params"></span>)</span>&#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">window</span>.addEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="built_in">this</span>.scrollhandle);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">beforeDestroy</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">window</span>.removeEventListener(<span class="string">&#x27;scroll&#x27;</span>, <span class="built_in">this</span>.scrollhandle);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line">methods: &#123;</span><br><span class="line">  <span class="function"><span class="title">scrollhandle</span>(<span class="params">event</span>)</span> &#123;</span><br><span class="line">    ...</span><br><span class="line">  &#125;,</span><br><span class="line">&#125;,</span><br></pre></td></tr></table></figure>

<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="function"><span class="title">mounted</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">this</span>.interVal = <span class="built_in">setInterval</span>(callback,millisec,args);</span><br><span class="line">&#125;,</span><br><span class="line"></span><br><span class="line"><span class="function"><span class="title">beforeDestroy</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">  <span class="built_in">clearInterval</span>(<span class="built_in">this</span>.interVal);</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-4-通过ES6动态导入的方式引入异步组件-性能优化5"><a href="#6-4-通过ES6动态导入的方式引入异步组件-性能优化5" class="headerlink" title="6.4 通过ES6动态导入的方式引入异步组件 (性能优化5)"></a>6.4 通过ES6动态导入的方式引入异步组件 (性能优化5)</h2><p>在平时的开发工作中，为了减少首屏代码体积，往往会把一些非首屏的组件设计成异步组件，按需加载。</p>
<p>基于路由</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br><span class="line">19</span><br><span class="line">20</span><br><span class="line">21</span><br><span class="line">22</span><br><span class="line">23</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">import</span> Vue <span class="keyword">from</span> <span class="string">&#x27;vue&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Router <span class="keyword">from</span> <span class="string">&#x27;vue-router&#x27;</span>;</span><br><span class="line"><span class="keyword">import</span> Home <span class="keyword">from</span> <span class="string">&#x27;../views/Home.vue&#x27;</span>;</span><br><span class="line"></span><br><span class="line">Vue.use(Router);</span><br><span class="line"></span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> <span class="keyword">new</span> Router(&#123;</span><br><span class="line">  routes: [</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;home&#x27;</span>,</span><br><span class="line">      component: Home,</span><br><span class="line">    &#125;,</span><br><span class="line">    &#123;</span><br><span class="line">      path: <span class="string">&#x27;/about&#x27;</span>,</span><br><span class="line">      name: <span class="string">&#x27;about&#x27;</span>,</span><br><span class="line">      <span class="comment">// route level code-splitting</span></span><br><span class="line">      <span class="comment">// this generates a separate chunk (about.[hash].js) for this route</span></span><br><span class="line">      <span class="comment">// which is lazy-loaded when the route is visited.</span></span><br><span class="line">      component: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="comment">/* webpackChunkName: &quot;about&quot; */</span> <span class="string">&#x27;../views/About.vue&#x27;</span>),</span><br><span class="line">    &#125;,</span><br><span class="line">  ],</span><br><span class="line">&#125;);</span><br></pre></td></tr></table></figure>

<p>本地注册</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br></pre></td><td class="code"><pre><span class="line">&lt;!-- App.vue --&gt;</span><br><span class="line">&lt;template&gt;</span><br><span class="line">  &lt;div&gt;</span><br><span class="line">    &lt;message&gt;&lt;/message&gt;</span><br><span class="line">  &lt;/div&gt;</span><br><span class="line">&lt;/template&gt;</span><br><span class="line"></span><br><span class="line">&lt;script&gt;</span><br><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  components: &#123;</span><br><span class="line">    Message: <span class="function">() =&gt;</span> <span class="keyword">import</span>(<span class="string">&quot;./Message&quot;</span>)</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br><span class="line">&lt;/script&gt;</span><br></pre></td></tr></table></figure>

<h2 id="6-5-VueX状态管理"><a href="#6-5-VueX状态管理" class="headerlink" title="6.5 VueX状态管理"></a>6.5 VueX状态管理</h2><h3 id="6-5-1-不要过度使用Store-性能优化6"><a href="#6-5-1-不要过度使用Store-性能优化6" class="headerlink" title="6.5.1 不要过度使用Store (性能优化6)"></a>6.5.1 不要过度使用Store (性能优化6)</h3><p>把所有逻辑移到Store中会导致更多的性能开销和不必要的复杂性。</p>
<p>在严格模式下，无论何时发生了状态变更且不是由 mutation 函数引起的，将会抛出错误。这能保证所有的状态变更都能被调试工具跟踪到。</p>
<p>开启严格模式：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> store = <span class="keyword">new</span> Vuex.Store(&#123;</span><br><span class="line">  <span class="comment">// ...</span></span><br><span class="line">  strict: process.env.NODE_ENV !== <span class="string">&#x27;production&#x27;</span></span><br><span class="line">&#125;)</span><br></pre></td></tr></table></figure>

<p>不要在发布环境下启用严格模式！严格模式会深度监测状态树来检测不合规的状态变更——请确保在发布环境下关闭严格模式，以避免性能损失。</p>
<h3 id="6-5-2-State"><a href="#6-5-2-State" class="headerlink" title="6.5.2 State"></a>6.5.2 State</h3><h4 id="6-5-2-1-将数组转化为对象进行存储-性能优化7"><a href="#6-5-2-1-将数组转化为对象进行存储-性能优化7" class="headerlink" title="6.5.2.1 将数组转化为对象进行存储 (性能优化7)"></a>6.5.2.1 将数组转化为对象进行存储 (性能优化7)</h4><p>即使从接口中返回的数据就是对象数组的形式，并且视图需要将其显示为使用v-for指令映射的数组，也应考虑将其作为对象放在存储中。</p>
<ul>
<li>可以轻松地使用ES6+内置的Object.keys，Object.values和Object.entries方法从任何对象中获取数组，但反之则有些复杂。</li>
<li>作为一种算法，通过键从对象中检索到的内容的时间复杂度为O(1)，如果使用搜索或过滤器来查找相同的数据，则是O(n)。</li>
</ul>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  partnersList: [], <span class="comment">// array of all partners</span></span><br><span class="line">  currentPartner: &#123;&#125;, <span class="comment">// current partner object.</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> initialState = &#123;</span><br><span class="line">  partnersList: &#123;&#125;, <span class="comment">// object with all partners keyed by ID</span></span><br><span class="line">  currentPartnerId: <span class="string">``</span>, <span class="comment">// a string contining the ID of the current partner.</span></span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<h3 id="6-5-3-Getter"><a href="#6-5-3-Getter" class="headerlink" title="6.5.3 Getter"></a>6.5.3 Getter</h3><h4 id="6-5-3-1-需要包含一些逻辑"><a href="#6-5-3-1-需要包含一些逻辑" class="headerlink" title="6.5.3.1 需要包含一些逻辑"></a>6.5.3.1 需要包含一些逻辑</h4><p>如果要访问子属性，通过mapState。</p>
<p>Bad</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  getProducts: <span class="function"><span class="params">state</span> =&gt;</span> state.products,</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<p>Good</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line">getters: &#123;</span><br><span class="line">  getFeaturedProducts: <span class="function"><span class="params">state</span> =&gt;</span> state.products.filter(<span class="function"><span class="params">p</span> =&gt;</span> p.isFeatured),</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-6-数据冻结-性能优化8"><a href="#6-6-数据冻结-性能优化8" class="headerlink" title="6.6 数据冻结 (性能优化8)"></a>6.6 数据冻结 (性能优化8)</h2><p>如果有一个巨大的数组或Object，并且确信数据不会修改，使用 Object.freeze() 可以让Vue不会给对象加上 getter/setter,性能会大幅提升。</p>
<p>在组件中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">export</span> <span class="keyword">default</span> &#123;</span><br><span class="line">  data: <span class="function">() =&gt;</span> (&#123;</span><br><span class="line">    users: &#123;&#125;</span><br><span class="line">  &#125;),</span><br><span class="line">  <span class="keyword">async</span> <span class="function"><span class="title">created</span>(<span class="params"></span>)</span> &#123;</span><br><span class="line">    <span class="keyword">const</span> users = <span class="keyword">await</span> axios.get(<span class="string">&quot;/api/users&quot;</span>);</span><br><span class="line">    <span class="built_in">this</span>.users = <span class="built_in">Object</span>.freeze(users);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>在store中：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br></pre></td><td class="code"><pre><span class="line"><span class="keyword">const</span> mutations = &#123;</span><br><span class="line">  <span class="function"><span class="title">setUsers</span>(<span class="params">state, users</span>)</span> &#123;</span><br><span class="line">    state.users = <span class="built_in">Object</span>.freeze(users);</span><br><span class="line">    <span class="comment">// 也可以做修改</span></span><br><span class="line">    <span class="comment">// state.users = Object.freeze([...state.users, user]);</span></span><br><span class="line">  &#125;</span><br><span class="line">&#125;;</span><br></pre></td></tr></table></figure>

<p>如果是嵌套对象，则使用深度冻结，也就是遍历对象，用下方的 deepFreeze 替换上边写的 Object.freeze。</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br><span class="line">12</span><br><span class="line">13</span><br><span class="line">14</span><br><span class="line">15</span><br><span class="line">16</span><br><span class="line">17</span><br><span class="line">18</span><br></pre></td><td class="code"><pre><span class="line"><span class="comment">/**</span></span><br><span class="line"><span class="comment"> * 深度冻结对象</span></span><br><span class="line"><span class="comment"> *  <span class="doctag">@param </span>target 要冻结的嵌套对象</span></span><br><span class="line"><span class="comment"> */</span></span><br><span class="line"><span class="function"><span class="keyword">function</span> <span class="title">deepFreeze</span>(<span class="params">target</span>) </span>&#123;</span><br><span class="line">  <span class="built_in">Object</span>.freeze(target);</span><br><span class="line"></span><br><span class="line">  <span class="built_in">Object</span>.getOwnPropertyNames(target).forEach(<span class="function">(<span class="params">prop</span>) =&gt;</span> &#123;</span><br><span class="line">    <span class="keyword">if</span> (target.hasOwnProperty(prop)</span><br><span class="line">      &amp;&amp; target[prop] !== <span class="literal">null</span></span><br><span class="line">      &amp;&amp; (<span class="keyword">typeof</span> target[prop] === <span class="string">&#x27;object&#x27;</span> || <span class="keyword">typeof</span> target[prop] === <span class="string">&#x27;function&#x27;</span>)</span><br><span class="line">      &amp;&amp; !<span class="built_in">Object</span>.isFrozen(target[prop])) &#123;</span><br><span class="line">      deepFreeze(target[prop]);</span><br><span class="line">    &#125;</span><br><span class="line">  &#125;);</span><br><span class="line"></span><br><span class="line">  <span class="keyword">return</span> target;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-7-图片压缩-性能优化9"><a href="#6-7-图片压缩-性能优化9" class="headerlink" title="6.7 图片压缩 (性能优化9)"></a>6.7 图片压缩 (性能优化9)</h2><p>使用 image-webpack-loader 对图片进行压缩。<br>安装：</p>
<figure class="highlight bash"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">npm i -D image-webpack-loader</span><br></pre></td></tr></table></figure>

<p>在 vue.config.js 中 添加配置：</p>
<figure class="highlight javascript"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br><span class="line">6</span><br><span class="line">7</span><br><span class="line">8</span><br><span class="line">9</span><br><span class="line">10</span><br><span class="line">11</span><br></pre></td><td class="code"><pre><span class="line"><span class="built_in">module</span>.exports = &#123;</span><br><span class="line">  configureWebpack: <span class="function">(<span class="params">config</span>) =&gt;</span> &#123;</span><br><span class="line">      <span class="comment">// 压缩图片</span></span><br><span class="line">      config.module.rules.push(&#123;</span><br><span class="line">        test: <span class="regexp">/\.(png|jpe?g|gif|svg)(\?.*)?$/</span>,</span><br><span class="line">        use: [&#123;</span><br><span class="line">          loader: <span class="string">&#x27;image-webpack-loader&#x27;</span>,</span><br><span class="line">        &#125;],</span><br><span class="line">      &#125;);</span><br><span class="line">  &#125;</span><br><span class="line">&#125;</span><br></pre></td></tr></table></figure>

<h2 id="6-8-使用KeepAlive-按需缓存路由页面-性能优化10"><a href="#6-8-使用KeepAlive-按需缓存路由页面-性能优化10" class="headerlink" title="6.8 使用KeepAlive 按需缓存路由页面 (性能优化10)"></a>6.8 使用KeepAlive 按需缓存路由页面 (性能优化10)</h2><figure class="highlight html"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br></pre></td><td class="code"><pre><span class="line"><span class="tag">&lt;<span class="name">keep-alive</span> <span class="attr">include</span>=<span class="string">&#x27;要缓存的组件名称,要缓存的组件名称&#x27;</span>&gt;</span></span><br><span class="line">  <span class="tag">&lt;<span class="name">router-view</span>&gt;</span><span class="tag">&lt;/<span class="name">router-view</span>&gt;</span></span><br><span class="line"><span class="tag">&lt;/<span class="name">keep-alive</span>&gt;</span></span><br></pre></td></tr></table></figure>

<h2 id="6-9-使用CDN或者引入其它服务器上的文件地址实现对静态资源并行请求-性能优化11"><a href="#6-9-使用CDN或者引入其它服务器上的文件地址实现对静态资源并行请求-性能优化11" class="headerlink" title="6.9 使用CDN或者引入其它服务器上的文件地址实现对静态资源并行请求 (性能优化11)"></a>6.9 使用CDN或者引入其它服务器上的文件地址实现对静态资源并行请求 (性能优化11)</h2><p>浏览器针对每个域名能创建的最大TCP连接数是有限制的（谷歌浏览器6个），通过将静态资源放在不同的域中可以增加并行请求数。</p>
<h2 id="6-10-GZip-性能优化12"><a href="#6-10-GZip-性能优化12" class="headerlink" title="6.10 GZip  (性能优化12)"></a>6.10 GZip  (性能优化12)</h2><p>使用 Nginx 进行动态压缩，具体请看Nginx相关的文档（待补充）。</p>
<h1 id="7-其它"><a href="#7-其它" class="headerlink" title="7 其它"></a>7 其它</h1><h2 id="7-1-静态分析"><a href="#7-1-静态分析" class="headerlink" title="7.1 静态分析"></a>7.1 静态分析</h2><p>使用ESLint作为代码静态分析工具，遵从 Airbnb+自定义风格。</p>
<h2 id="7-2-常用插件"><a href="#7-2-常用插件" class="headerlink" title="7.2 常用插件"></a>7.2 常用插件</h2><p><a target="_blank" rel="noopener" href="https://github.com/surmon-china/vue-awesome-swiper">Vue-Awesome-Swiper</a>：基于 <a target="_blank" rel="noopener" href="http://www.swiper.com.cn/">Swiper4</a>、适用于 Vue 的轮播组件。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/hilongjw/vue-lazyload">Vue-Lazyload</a>：图片懒加载。 (性能优化13)</p>
<p><a target="_blank" rel="noopener" href="https://github.com/cenkai88/vue-svg-icon">vue-svg-icon</a>：可定义svg图标的颜色。</p>
<h2 id="7-3-常用工具"><a href="#7-3-常用工具" class="headerlink" title="7.3 常用工具"></a>7.3 常用工具</h2><p><a target="_blank" rel="noopener" href="https://github.com/ovity/octotree">Octotree</a>：GitHub可视化代码树插件。</p>
<p><a target="_blank" rel="noopener" href="https://github.com/tjunnone/npm-check-updates">npm-check-updates</a>：更新package.json中的所有依赖到最新版本。</p>
<h2 id="7-4-资源"><a href="#7-4-资源" class="headerlink" title="7.4 资源"></a>7.4 资源</h2><p><a target="_blank" rel="noopener" href="https://biaochenxuying.cn/articleDetail?article_id=5cd7896c74289f3d47ed13ea">一张思维导图辅助你深入了解</a>Vue | Vue-Router | Vuex 源码架构</p>
<h1 id="8-写在最后"><a href="#8-写在最后" class="headerlink" title="8 写在最后"></a>8 写在最后</h1><p>看过一篇文章，觉得观点挺好的，就直接拿来用了。</p>
<p>Best Practice ：最佳实践。Wikipedia 上对其解释为：A best practice is a method or technique that has been generally accepted as superior to any alternatives because it produbces results that are superior to those achieved by other means or because it has become a standard way of doing things.　(最佳实践是一种：因其产生的结果优于其它选择下的结果，或其已经成为一种做事的标准，从而被普遍认可优于任何替代方案的方法或技术。)</p>
<p>最佳实践本身是美好的存在，犹如夜空中的一轮明月，照亮黑暗中的方向，指引着摸索前行的凡人。</p>
<p>但凡事有度，子曰：&quot;过犹不及。&quot;</p>
<p><strong>首先，最佳实践容易带来思想包袱，让人无法专注于解决问题本身。</strong></p>
<p>总是希望采用最好的技术方法，不愿意在不正确的做法上浪费时间，导致瞻前顾后，甚至裹足不前。此时的最佳实践，已然成为了一种毒药，一旦偏离了问题本身这个出发点，就会不知不觉走进&quot;宏大构想&quot;的思维陷阱。把简单的问题复杂化，阻碍了迈出第一步，直到能规划出&quot;包罗万象&quot;的解决方案后才肯动手，拖延症就这样来了，时间却走了。</p>
<p><strong>其次，对最佳实践的执念容易让人钻牛角尖，将目标的重心带偏。</strong></p>
<p>过度关注实施过程是否符合标准化，忽视了项目中其它重要的东西，比如用户体验，比如实际需求。</p>
<p><strong>再次，工程师思维，沉迷于奇技淫巧中无法自拔。</strong></p>
<p>比如性能优化。&quot;优秀的程序员应该榨干每一字节内存&quot;，听起来很熟悉，不是吗？但经济学上来讲，边际效应决定了一次项目中，越优化性价比越低。有一个很容易被忽略的事实：硬件其实比程序员要便宜。</p>
<p>再比如对设计模式的崇拜。设计模式当然是好东西，但如果像强迫症一样使用它们，坚持用上它们才是正确的编程，就会导致按图索骥，强行让问题去适应设计模式，而不是让解决方案针对问题，这就本末倒置了。</p>
<p><strong>最后，一个项目的开发顺利与否，并不在于技术选型是否为最佳实践。</strong></p>
<p>工作数年，大小项目经历若干，慢慢体会到，一个项目的开发顺利与否，并不在于技术选型是否为最佳实践，更多的时候，取决于开发方案和技术储备之间的平衡。做项目毕竟是要讲方案落地的，如果最佳实践中的技术成本，超出了开发者的落实能力，那就是坑，这时盲从最佳实践无异于挖坟。如果是一个人的项目，抽时间恶补一通，兴许能填填坑，这取决于IQ。但要是一个团队，那就不是什么 IQ，EQ，QQ 的问题了，这中间产生的学习成本，集体培训成本，反复沟通成本，大量的初级错误，千奇百怪的代码，互相冲突引发的焦躁情绪等等。这些负面的东西如果不能妥善的处理，足以抵消掉最佳实践带来的好处。别忘了，deadline 正在迫近。</p>
<p>当尘埃落定，蓦然回首，最佳实践很可能没你想象中那么重要。它更多的是一种精神层面的求道，并非物质世界的必要。</p>
<p><strong>全篇能全部看下来，觉得自己基础扎实，想在前端道路上有进一步发展的请加微信： zapzqc</strong><br>只要你肯努力，这里将会为你提供充足的发展空间。</p>
</div><div class="article-licensing box"><div class="licensing-title"><p>Vue.js2最佳实践(持续更新至Vue.js3出来😁)</p><p><a href="https://ths-fe.github.io/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/">https://ths-fe.github.io/2020/04/29/Vue-js2%E6%9C%80%E4%BD%B3%E5%AE%9E%E8%B7%B5/</a></p></div><div class="licensing-meta level is-mobile"><div class="level-left"><div class="level-item is-narrow"><div><h6>作者</h6><p>天下布武</p></div></div><div class="level-item is-narrow"><div><h6>发布于</h6><p>2020-04-29</p></div></div><div class="level-item is-narrow"><div><h6>更新于</h6><p>2020-07-26</p></div></div><div class="level-item is-narrow"><div><h6>许可协议</h6><p><a class="icon" rel="noopener" target="_blank" title="Creative Commons" href="https://creativecommons.org/"><i class="fab fa-creative-commons"></i></a><a class="" rel="noopener" target="_blank" title="CC BY-NC-SA 4.0" href="https://creativecommons.org/licenses/by-nc-sa/4.0/">CC BY-NC-SA 4.0</a></p></div></div></div></div></div><div class="article-tags is-size-7 mb-4"><span class="mr-2">#</span><a class="link-muted mr-2" rel="tag" href="/tags/Vue-js2/">Vue.js2</a></div><div class="sharethis-inline-share-buttons"></div><script src="https://platform-api.sharethis.com/js/sharethis.js#property=5ea1492221690600121bcf3a&amp;product=inline-share-buttons&amp;cms=sop" defer></script></article></div><div class="card"><div class="card-content"><h3 class="menu-label has-text-centered">喜欢这篇文章？打赏一下作者吧</h3><div class="buttons is-centered"><a class="button donate" data-type="alipay"><span class="icon is-small"><i class="fab fa-alipay"></i></span><span>支付宝</span><span class="qrcode"><img src="/img/alipayqr.jpg" alt="支付宝"></span></a><a class="button donate" href="https://www.buymeacoffee.com/zapzqc?new=1" target="_blank" rel="noopener" data-type="buymeacoffee"><span class="icon is-small"><i class="fas fa-coffee"></i></span><span>送我杯咖啡</span></a><a class="button donate" data-type="wechat"><span class="icon is-small"><i class="fab fa-weixin"></i></span><span>微信</span><span class="qrcode"><img src="/img/wechatqr.jpg" alt="微信"></span></a></div></div></div><nav class="post-navigation mt-4 level is-mobile"><div class="level-start"><a class="article-nav-prev level level-item link-muted" href="/2020/05/21/%E4%BB%8E%E9%9B%B6%E5%BC%80%E5%A7%8B%E6%90%AD%E5%BB%BA%E5%89%8D%E7%AB%AF%E9%A1%B9%E7%9B%AE%E5%BC%80%E5%8F%91%E7%8E%AF%E5%A2%83/"><i class="level-item fas fa-chevron-left"></i><span class="level-item">从零开始搭建前端项目开发环境</span></a></div><div class="level-end"><a class="article-nav-next level level-item link-muted" href="/2020/04/26/HTTP%E8%AF%B7%E6%B1%82%E6%96%B9%E6%B3%95%E7%9A%84%E5%BC%82%E5%90%8C/"><span class="level-item">HTTP请求方法的异同</span><i class="level-item fas fa-chevron-right"></i></a></div></nav><div class="card"><div class="card-content"><h3 class="title is-5">评论</h3><div class="content" id="valine-thread"></div><script src="//cdn1.lncld.net/static/js/3.0.4/av-min.js"></script><script src="https://cdn.jsdelivr.net/npm/valine@1.4.14/dist/Valine.min.js"></script><script>new Valine({
            el: '#valine-thread' ,
            appId: "4o5OfjCIGaSyqIwg7jop80Ge-gzGzoHsz",
            appKey: "Rj9jcPLhW8WgWd6bDmXGmKaA",
            placeholder: "欢迎评论交流",
            avatar: "mm",
            
            meta: ["nick","mail","link"],
            pageSize: 10,
            lang: "zh-CN",
            
            highlight: true,
            
            
            
            
            
            requiredFields: [],
        });</script></div></div></div><div class="column column-left is-4-tablet is-4-desktop is-4-widescreen  order-1 is-sticky"><div class="card widget" id="toc" data-type="toc"><div class="card-content"><div class="menu"><h3 class="menu-label">目录</h3><ul class="menu-list"><li><a class="level is-mobile" href="#1-写在开头"><span class="level-left"><span class="level-item">1 写在开头</span></span></a></li><li><a class="level is-mobile" href="#2-Vue-js2模板工程说明"><span class="level-left"><span class="level-item">2 Vue.js2模板工程说明</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-1-目的"><span class="level-left"><span class="level-item">2.1 目的</span></span></a></li><li><a class="level is-mobile" href="#2-2-下载"><span class="level-left"><span class="level-item">2.2 下载</span></span></a></li><li><a class="level is-mobile" href="#2-3-目录结构"><span class="level-left"><span class="level-item">2.3 目录结构</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-3-1-JavaScript版"><span class="level-left"><span class="level-item">2.3.1 JavaScript版</span></span></a></li><li><a class="level is-mobile" href="#2-3-2-TypeScript版"><span class="level-left"><span class="level-item">2.3.2 TypeScript版</span></span></a></li></ul></li><li><a class="level is-mobile" href="#2-4-配置变更"><span class="level-left"><span class="level-item">2.4 配置变更</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#2-4-1-新增依赖"><span class="level-left"><span class="level-item">2.4.1 新增依赖</span></span></a></li><li><a class="level is-mobile" href="#2-4-2-新增功能"><span class="level-left"><span class="level-item">2.4.2 新增功能</span></span></a></li><li><a class="level is-mobile" href="#2-4-3-配置新增"><span class="level-left"><span class="level-item">2.4.3 配置新增</span></span></a></li></ul></li><li><a class="level is-mobile" href="#2-5-安装运行"><span class="level-left"><span class="level-item">2.5 安装运行</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-命名"><span class="level-left"><span class="level-item">3 命名</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1-组件"><span class="level-left"><span class="level-item">3.1 组件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-1-1（官）使用两个或以上单词"><span class="level-left"><span class="level-item">3.1.1（官）使用两个或以上单词</span></span></a></li><li><a class="level is-mobile" href="#3-1-2（官）使用PascalCase或kebab-case命名组件文件"><span class="level-left"><span class="level-item">3.1.2（官）使用PascalCase或kebab-case命名组件文件</span></span></a></li><li><a class="level is-mobile" href="#3-1-3（官）JS-JSX-中的组件名应该始终使用-PascalCase-进行命名"><span class="level-left"><span class="level-item">3.1.3（官）JS/JSX 中的组件名应该始终使用 PascalCase 进行命名</span></span></a></li><li><a class="level is-mobile" href="#3-1-4（官）和父组件紧密耦合的子组件应该以父组件名作为前缀命名"><span class="level-left"><span class="level-item">3.1.4（官）和父组件紧密耦合的子组件应该以父组件名作为前缀命名</span></span></a></li><li><a class="level is-mobile" href="#3-1-5（官）以高级别的-通常是一般化描述的-单词开头，以描述性的修饰词结尾"><span class="level-left"><span class="level-item">3.1.5（官）以高级别的(通常是一般化描述的) 单词开头，以描述性的修饰词结尾</span></span></a></li><li><a class="level is-mobile" href="#3-1-6（官）使用完整单词而不是缩写"><span class="level-left"><span class="level-item">3.1.6（官）使用完整单词而不是缩写</span></span></a></li><li><a class="level is-mobile" href="#3-1-7（官）基础组件-也就是展示类的、无逻辑的或无状态的组件-应该全部以一个特定的前缀开头，比如-Base"><span class="level-left"><span class="level-item">3.1.7（官）基础组件(也就是展示类的、无逻辑的或无状态的组件) 应该全部以一个特定的前缀开头，比如 Base</span></span></a></li><li><a class="level is-mobile" href="#3-1-8（官）单个活跃实例的组件应该以The前缀命名，以示其唯一性"><span class="level-left"><span class="level-item">3.1.8（官）单个活跃实例的组件应该以The前缀命名，以示其唯一性</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-2-Prop"><span class="level-left"><span class="level-item">3.2 Prop</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-2-1（官）应该始终使用camelCase，而在模板和-JSX-中应该始终使用-kebab-case"><span class="level-left"><span class="level-item">3.2.1（官）应该始终使用camelCase，而在模板和 JSX 中应该始终使用 kebab-case</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-3-method"><span class="level-left"><span class="level-item">3.3 method</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-3-1-要是动宾短语"><span class="level-left"><span class="level-item">3.3.1 要是动宾短语</span></span></a></li><li><a class="level is-mobile" href="#3-3-2-使用camelCase进行命名"><span class="level-left"><span class="level-item">3.3.2 使用camelCase进行命名</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-4-事件"><span class="level-left"><span class="level-item">3.4 事件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-4-1（官）使用kebab-case进行命名"><span class="level-left"><span class="level-item">3.4.1（官）使用kebab-case进行命名</span></span></a></li><li><a class="level is-mobile" href="#3-4-2-以动词或是名词结尾"><span class="level-left"><span class="level-item">3.4.2 以动词或是名词结尾</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-5-文件夹"><span class="level-left"><span class="level-item">3.5 文件夹</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-5-1-尽量是小写的单个名词"><span class="level-left"><span class="level-item">3.5.1 尽量是小写的单个名词</span></span></a></li><li><a class="level is-mobile" href="#3-5-2-如不是单个，则使用-kebab-case进行命名"><span class="level-left"><span class="level-item">3.5.2 如不是单个，则使用 kebab-case进行命名</span></span></a></li></ul></li><li><a class="level is-mobile" href="#3-6-文件"><span class="level-left"><span class="level-item">3.6 文件</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#3-6-1-js文件命名规范"><span class="level-left"><span class="level-item">3.6.1 *.js文件命名规范</span></span></a></li><li><a class="level is-mobile" href="#3-6-2-ts文件命名规范"><span class="level-left"><span class="level-item">3.6.2 *.ts文件命名规范</span></span></a></li><li><a class="level is-mobile" href="#3-6-3-scss文件命名规范"><span class="level-left"><span class="level-item">3.6.3 *.scss文件命名规范</span></span></a></li><li><a class="level is-mobile" href="#3-6-4-其它文件命名规范"><span class="level-left"><span class="level-item">3.6.4 其它文件命名规范</span></span></a></li></ul></li></ul></li><li><a class="level is-mobile" href="#4-一般约束"><span class="level-left"><span class="level-item">4 一般约束</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#4-1（官）顶级App组件和布局组件中的样式可以是全局的，但是其它所有组件都应该是有作用域的"><span class="level-left"><span class="level-item">4.1（官）顶级App组件和布局组件中的样式可以是全局的，但是其它所有组件都应该是有作用域的</span></span></a></li><li><a class="level is-mobile" href="#4-2（官）始终为插件、混入等不考虑作为对外公共API的自定义私有属性使用-前缀。并附带一个命名空间以回避和其它作者的冲突"><span class="level-left"><span class="level-item">4.2（官）始终为插件、混入等不考虑作为对外公共API的自定义私有属性使用 $_ 前缀。并附带一个命名空间以回避和其它作者的冲突</span></span></a></li><li><a class="level is-mobile" href="#4-3（官）在单文件组件、字符串模板和JSX中没有内容的组件应该是自闭合的——但在-DOM-模板里永远不要这样做"><span class="level-left"><span class="level-item">4.3（官）在单文件组件、字符串模板和JSX中没有内容的组件应该是自闭合的——但在 DOM 模板里永远不要这样做</span></span></a></li><li><a class="level is-mobile" href="#4-4（官）组件的data必须是一个函数"><span class="level-left"><span class="level-item">4.4（官）组件的data必须是一个函数</span></span></a></li><li><a class="level is-mobile" href="#4-5（官）Prop定义要详细：类型、必填、验证"><span class="level-left"><span class="level-item">4.5（官）Prop定义要详细：类型、必填、验证</span></span></a></li><li><a class="level is-mobile" href="#4-6（官）尽量使用指令缩写，而且要么都用要么都不用"><span class="level-left"><span class="level-item">4.6（官）尽量使用指令缩写，而且要么都用要么都不用</span></span></a></li><li><a class="level is-mobile" href="#4-7（官）应该优先通过Vuex管理全局状态，而不是通过-this-root-或一个全局事件总线"><span class="level-left"><span class="level-item">4.7（官）应该优先通过Vuex管理全局状态，而不是通过 this.$root 或一个全局事件总线</span></span></a></li><li><a class="level is-mobile" href="#4-8（官）简单逻辑可在模板中使用表达式，中等逻辑操作使用computed-，复杂或需调用异步方法时使用watch"><span class="level-left"><span class="level-item">4.8（官）简单逻辑可在模板中使用表达式，中等逻辑操作使用computed ，复杂或需调用异步方法时使用watch</span></span></a></li><li><a class="level is-mobile" href="#4-9-生命周期函数调用规则"><span class="level-left"><span class="level-item">4.9 生命周期函数调用规则</span></span></a></li></ul></li><li><a class="level is-mobile" href="#5-编程思想"><span class="level-left"><span class="level-item">5 编程思想</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#5-1（官）组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法"><span class="level-left"><span class="level-item">5.1（官）组件模板应该只包含简单的表达式，复杂的表达式则应该重构为计算属性或方法</span></span></a></li><li><a class="level is-mobile" href="#5-2（官）应该优先通过prop和事件进行父子组件之间的通信，而不是-this-parent-或改变-prop"><span class="level-left"><span class="level-item">5.2（官）应该优先通过prop和事件进行父子组件之间的通信，而不是 this.$parent 或改变 prop</span></span></a></li><li><a class="level is-mobile" href="#5-3-谨慎使用-this-refs"><span class="level-left"><span class="level-item">5.3 谨慎使用 this.$refs</span></span></a></li><li><a class="level is-mobile" href="#5-4-按照一定的结构顺序来组织组件"><span class="level-left"><span class="level-item">5.4 按照一定的结构顺序来组织组件</span></span></a></li><li><a class="level is-mobile" href="#5-5-接口调用流程"><span class="level-left"><span class="level-item">5.5 接口调用流程</span></span></a></li><li><a class="level is-mobile" href="#5-6-每个分类都只有一个入口（如：router、store、plugins等分类下）"><span class="level-left"><span class="level-item">5.6 每个分类都只有一个入口（如：router、store、plugins等分类下）</span></span></a></li><li><a class="level is-mobile" href="#5-7-每个分类内部模块互相引用时，使用相对路径-分类之间模块引用时，使用绝对路径"><span class="level-left"><span class="level-item">5.7 每个分类内部模块互相引用时，使用相对路径; 分类之间模块引用时，使用绝对路径</span></span></a></li><li><a class="level is-mobile" href="#5-8-组件封装"><span class="level-left"><span class="level-item">5.8 组件封装</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-性能优化"><span class="level-left"><span class="level-item">6 性能优化</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-1（官）总是用key配合-v-for-性能优化2"><span class="level-left"><span class="level-item">6.1（官）总是用key配合 v-for (性能优化2)</span></span></a></li><li><a class="level is-mobile" href="#6-2（官）永远不要把v-if-和-v-for-同时用在同一个元素上-性能优化3"><span class="level-left"><span class="level-item">6.2（官）永远不要把v-if 和 v-for 同时用在同一个元素上 (性能优化3)</span></span></a></li><li><a class="level is-mobile" href="#6-3-组件销毁时及时清除事件监听、定时器等-性能优化4"><span class="level-left"><span class="level-item">6.3 组件销毁时及时清除事件监听、定时器等 (性能优化4)</span></span></a></li><li><a class="level is-mobile" href="#6-4-通过ES6动态导入的方式引入异步组件-性能优化5"><span class="level-left"><span class="level-item">6.4 通过ES6动态导入的方式引入异步组件 (性能优化5)</span></span></a></li><li><a class="level is-mobile" href="#6-5-VueX状态管理"><span class="level-left"><span class="level-item">6.5 VueX状态管理</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#6-5-1-不要过度使用Store-性能优化6"><span class="level-left"><span class="level-item">6.5.1 不要过度使用Store (性能优化6)</span></span></a></li><li><a class="level is-mobile" href="#6-5-2-State"><span class="level-left"><span class="level-item">6.5.2 State</span></span></a></li><li><a class="level is-mobile" href="#6-5-3-Getter"><span class="level-left"><span class="level-item">6.5.3 Getter</span></span></a></li></ul></li><li><a class="level is-mobile" href="#6-6-数据冻结-性能优化8"><span class="level-left"><span class="level-item">6.6 数据冻结 (性能优化8)</span></span></a></li><li><a class="level is-mobile" href="#6-7-图片压缩-性能优化9"><span class="level-left"><span class="level-item">6.7 图片压缩 (性能优化9)</span></span></a></li><li><a class="level is-mobile" href="#6-8-使用KeepAlive-按需缓存路由页面-性能优化10"><span class="level-left"><span class="level-item">6.8 使用KeepAlive 按需缓存路由页面 (性能优化10)</span></span></a></li><li><a class="level is-mobile" href="#6-9-使用CDN或者引入其它服务器上的文件地址实现对静态资源并行请求-性能优化11"><span class="level-left"><span class="level-item">6.9 使用CDN或者引入其它服务器上的文件地址实现对静态资源并行请求 (性能优化11)</span></span></a></li><li><a class="level is-mobile" href="#6-10-GZip-性能优化12"><span class="level-left"><span class="level-item">6.10 GZip  (性能优化12)</span></span></a></li></ul></li><li><a class="level is-mobile" href="#7-其它"><span class="level-left"><span class="level-item">7 其它</span></span></a><ul class="menu-list"><li><a class="level is-mobile" href="#7-1-静态分析"><span class="level-left"><span class="level-item">7.1 静态分析</span></span></a></li><li><a class="level is-mobile" href="#7-2-常用插件"><span class="level-left"><span class="level-item">7.2 常用插件</span></span></a></li><li><a class="level is-mobile" href="#7-3-常用工具"><span class="level-left"><span class="level-item">7.3 常用工具</span></span></a></li><li><a class="level is-mobile" href="#7-4-资源"><span class="level-left"><span class="level-item">7.4 资源</span></span></a></li></ul></li><li><a class="level is-mobile" href="#8-写在最后"><span class="level-left"><span class="level-item">8 写在最后</span></span></a></li></ul></div></div><style>.menu-list > li > a.is-active + .menu-list { display: block; }.menu-list > li > a + .menu-list { display: none; }</style><script src="/js/toc.js" defer></script></div><div class="card widget" data-type="adsense"><div class="card-content"><div class="menu"><h3 class="menu-label"> </h3><script async src="https://pagead2.googlesyndication.com/pagead/js/adsbygoogle.js"></script><ins class="adsbygoogle" style="display:block" data-ad-client="ca-pub-6826040978803389" data-ad-slot="1033672070" data-ad-format="auto" data-full-width-responsive="true"></ins><script>(adsbygoogle = window.adsbygoogle || []).push({});</script></div></div></div></div><!--!--></div></div></section><footer class="footer"><div class="container"><div class="level"><div class="level-start"><a class="footer-logo is-block mb-2" href="/"><img src="/img/ths.png" alt="思路大前端团队" height="28"></a><p class="is-size-7"><span>&copy; 2020 天下布武</span>  Powered by <a href="https://hexo.io/" target="_blank" rel="noopener">Hexo</a> &amp; <a href="https://github.com/ppoffice/hexo-theme-icarus" target="_blank" rel="noopener">Icarus</a><br><span id="busuanzi_container_site_uv">共<span id="busuanzi_value_site_uv">0</span>个访客</span></p></div><div class="level-end"></div></div></div></footer><script src="https://cdn.jsdelivr.net/npm/jquery@3.3.1/dist/jquery.min.js"></script><script src="https://cdn.jsdelivr.net/npm/moment@2.22.2/min/moment-with-locales.min.js"></script><script src="https://cdn.jsdelivr.net/npm/clipboard@2.0.4/dist/clipboard.min.js" async></script><script>moment.locale("zh-CN");</script><script>var IcarusThemeSettings = {
            article: {
                highlight: {
                    clipboard: true,
                    fold: 'unfolded'
                }
            }
        };</script><script src="/js/column.js"></script><script src="/js/animation.js"></script><a id="back-to-top" title="回到顶端" href="javascript:;"><i class="fas fa-chevron-up"></i></a><script src="/js/back_to_top.js" defer></script><!--!--><!--!--><!--!--><script src="https://cdn.jsdelivr.net/npm/lightgallery@1.6.8/dist/js/lightgallery.min.js" defer></script><script src="https://cdn.jsdelivr.net/npm/justifiedGallery@3.7.0/dist/js/jquery.justifiedGallery.min.js" defer></script><script>window.addEventListener("load", () => {
            if (typeof $.fn.lightGallery === 'function') {
                $('.article').lightGallery({ selector: '.gallery-item' });
            }
            if (typeof $.fn.justifiedGallery === 'function') {
                if ($('.justified-gallery > p > .gallery-item').length) {
                    $('.justified-gallery > p > .gallery-item').unwrap();
                }
                $('.justified-gallery').justifiedGallery();
            }
        });</script><!--!--><!--!--><!--!--><!--!--><!--!--><script src="/js/main.js" defer></script><div class="searchbox"><div class="searchbox-container"><div class="searchbox-header"><div class="searchbox-input-container"><input class="searchbox-input" type="text" placeholder="想要查找什么..."></div><a class="searchbox-close" href="javascript:;">×</a></div><div class="searchbox-body"></div></div></div><script src="/js/insight.js" defer></script><script>document.addEventListener('DOMContentLoaded', function () {
            loadInsight({"contentUrl":"/content.json"}, {"hint":"想要查找什么...","untitled":"(无标题)","posts":"文章","pages":"页面","categories":"分类","tags":"标签"});
        });</script></body></html>